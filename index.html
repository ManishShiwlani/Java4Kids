<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>Java Programming for Kids</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: rgba(0, 0, 0, 0.8); padding: 0; margin: 0; font-family: "Noto Serif", "DejaVu Serif", serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.45; color: #7a2518; font-weight: normal; margin-top: 0; margin-bottom: 0.25em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #2156a5; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #1d4b8f; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Open Sans", "DejaVu Sans", sans-serif; font-weight: 300; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.0125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddddd8; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace; font-weight: normal; color: rgba(0, 0, 0, 0.9); }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: rgba(0, 0, 0, 0.8); border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.9375em; color: rgba(0, 0, 0, 0.6); }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: rgba(0, 0, 0, 0.6); }

blockquote, blockquote p { line-height: 1.6; color: rgba(0, 0, 0, 0.85); }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dedede; }
table thead, table tfoot { background: #f7f8f7; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f7; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; word-spacing: -0.05em; }
h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong { font-weight: 400; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 0.1em 0.5ex; word-spacing: -0.15em; background-color: #f7f7f8; -webkit-border-radius: 4px; border-radius: 4px; line-height: 1.45; text-rendering: optimizeSpeed; }

pre, pre > code { line-height: 1.45; color: rgba(0, 0, 0, 0.9); font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace; font-weight: normal; text-rendering: optimizeSpeed; }

.keyseq { color: rgba(51, 51, 51, 0.8); }

kbd { display: inline-block; color: rgba(0, 0, 0, 0.8); font-size: 0.75em; line-height: 1.4; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: rgba(0, 0, 0, 0.8); }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: rgba(0, 0, 0, 0.9); }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: rgba(0, 0, 0, 0.85); margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddddd8; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddddd8; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddddd8; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: rgba(0, 0, 0, 0.6); display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: rgba(0, 0, 0, 0.85); }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: rgba(0, 0, 0, 0.85); }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: rgba(0, 0, 0, 0.85); border-bottom: 1px solid #ddddd8; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #efefed; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Open Sans", "DejaVu Sans", sans-serif; list-style-type: none; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #7a2518; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f8f8f7; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #efefed; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #efefed; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: rgba(0, 0, 0, 0.8); padding: 1.25em; }

#footer-text { color: rgba(255, 255, 255, 0.8); line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #efefed; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-family: "Noto Serif", "DejaVu Serif", serif; font-size: 1rem; font-style: italic; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: rgba(0, 0, 0, 0.85); }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Open Sans", "DejaVu Sans", sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddddd8; color: rgba(0, 0, 0, 0.6); }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; text-align: center; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #f7f7f8; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { -webkit-border-radius: 4px; border-radius: 4px; word-wrap: break-word; padding: 1em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #f7f7f8; background-color: rgba(0, 0, 0, 0.9); }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 4px; border-radius: 4px; }

.listingblock pre.prettyprint { border-width: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddddd8; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: rgba(0, 0, 0, 0.85); font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #7a2518; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid rgba(0, 0, 0, 0.6); }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: rgba(0, 0, 0, 0.85); font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.9375em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.05em; color: rgba(0, 0, 0, 0.6); }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.spread { width: 100%; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dedede; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.6; background: #f7f8f7; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: rgba(0, 0, 0, 0.8); font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-check-square-o:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .75em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
span.footnote a:active, span.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #19407c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: rgba(0, 0, 0, 0.8); -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

h1, h2 { letter-spacing: -0.01em; }

dt, th.tableblock, td.content { text-rendering: optimizeLegibility; }

p, td.content { letter-spacing: -0.01em; }
p strong, td.content strong { letter-spacing: -0.005em; }

p, blockquote, dt, td.content { font-size: 1.0625rem; }

p { margin-bottom: 1.25rem; }

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock { font-size: 1em; }

.exampleblock > .content { background-color: #fffef7; border-color: #e0e0dc; -webkit-box-shadow: 0 1px 4px #e0e0dc; box-shadow: 0 1px 4px #e0e0dc; }

.print-only { display: none !important; }

@media print { @page { margin: 1.25cm 0.75cm; }
  * { -webkit-box-shadow: none !important; box-shadow: none !important; text-shadow: none !important; }
  a { color: inherit !important; text-decoration: underline !important; }
  a.bare, a[href^="#"], a[href^="mailto:"] { text-decoration: none !important; }
  a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after, a[href^="mailto:"]:not(.bare):after { content: "(" attr(href) ")"; display: inline-block; font-size: 0.875em; padding-left: 0.25em; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  pre, blockquote, tr, img { page-break-inside: avoid; }
  thead { display: table-header-group; }
  img { max-width: 100% !important; }
  p, blockquote, dt, td.content { font-size: 1em; orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  #toc, .sidebarblock, .exampleblock > .content { background: none !important; }
  #toc { border-bottom: 1px solid #ddddd8 !important; padding-bottom: 0 !important; }
  .sect1 { padding-bottom: 0 !important; }
  .sect1 + .sect1 { border: 0 !important; }
  #header > h1:first-child { margin-top: 1.25rem; }
  body.book #header { text-align: center; }
  body.book #header > h1:first-child { border: 0 !important; margin: 2.5em 0 1em 0; }
  body.book #header .details { border: 0 !important; display: block; padding: 0 !important; }
  body.book #header .details span:first-child { margin-left: 0 !important; }
  body.book #header .details br { display: block; }
  body.book #header .details br + span:before { content: none !important; }
  body.book #toc { border: 0 !important; text-align: left !important; padding: 0 !important; margin: 0 !important; }
  body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 { page-break-before: always; }
  .listingblock code[data-lang]:before { display: block; }
  #footer { background: none !important; padding: 0 0.9375em; }
  #footer-text { color: rgba(0, 0, 0, 0.6) !important; font-size: 0.9em; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }

</style>
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Java Programming for Kids</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of content</div>
<ul class="sectlevel1">
<li><a href="#preface">Preface</a></li>
<li><a href="#_writing_your_first_program">1. Writing Your First Program</a>
<ul class="sectlevel2">
<li><a href="#_installing_java_on_your_computer">1.1. Installing Java on Your Computer</a>
<ul class="sectlevel3">
<li><a href="#_for_windows_users_only">1.1.1. For Windows Users Only</a></li>
</ul>
</li>
<li><a href="#_three_main_steps_in_java_programming">1.2. Three Main Steps in Java Programming</a>
<ul class="sectlevel3">
<li><a href="#_command_window">1.2.1. Command Window</a></li>
<li><a href="#_step_1_write_the_program">1.2.2. Step 1 – Write the Program</a></li>
<li><a href="#_step_2_compile_the_program">1.2.3. Step 2 – Compile the Program</a></li>
<li><a href="#_step_3_run_the_program">1.2.4. Step 3 – Run the Program</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_getting_comfy_in_idea_ide">2. Getting Comfy In IDEA IDE</a>
<ul class="sectlevel2">
<li><a href="#_installing_intellij_idea">2.1. Installing IntelliJ IDEA</a></li>
<li><a href="#_creating_your_first_project">2.2. Creating Your First Project</a></li>
<li><a href="#_creating_helloworld_class_in_idea">2.3. Creating HelloWorld Class in IDEA</a>
<ul class="sectlevel3">
<li><a href="#_adding_the_method_main">2.3.1. Adding the method main</a></li>
<li><a href="#_running_helloworld_in_idea">2.3.2. Running HelloWorld in IDEA</a></li>
</ul>
</li>
<li><a href="#_how_does_code_helloworld_code_work">2.4. How Does <code>HelloWorld</code> Work?</a></li>
</ul>
</li>
<li><a href="#_meet_classes_the_main_language_constructs">3. Meet Classes - the Main Language Constructs</a>
<ul class="sectlevel2">
<li><a href="#_dissecting_classes_and_objects">3.1. Dissecting Classes and Objects</a>
<ul class="sectlevel3">
<li><a href="#_classes">3.1.1. Classes</a></li>
<li><a href="#_objects">3.1.2. Objects</a></li>
</ul>
</li>
<li><a href="#_java_data_types_and_variables">3.2. Java Data Types and Variables</a>
<ul class="sectlevel3">
<li><a href="#_primitives">3.2.1. Primitives</a></li>
<li><a href="#_classes_as_data_types">3.2.2. Classes as Data Types</a></li>
<li><a href="#_how_much_memory_is_needed">3.2.3. How Much Memory is Needed</a></li>
</ul>
</li>
<li><a href="#_creation_of_a_pet">3.3. Creation of a Pet</a></li>
<li><a href="#_inheritance_a_fish_can_be_a_pet_too">3.4. Inheritance – a Fish Can Be a Pet Too</a></li>
<li><a href="#_method_overriding">3.5. Method Overriding</a></li>
<li><a href="#_challenge_yourself">3.6. Challenge Yourself</a></li>
</ul>
</li>
<li><a href="#_java_building_blocks">4. Java Building Blocks</a>
<ul class="sectlevel2">
<li><a href="#_program_comments">4.1. Program Comments</a></li>
<li><a href="#_making_decisions">4.2. Making Decisions</a>
<ul class="sectlevel3">
<li><a href="#_the_if_statement">4.2.1. The if Statement</a></li>
<li><a href="#_logical_operators">4.2.2. Logical Operators</a></li>
<li><a href="#_conditional_operator">4.2.3. Conditional operator</a></li>
<li><a href="#_using_code_else_if_code">4.2.4. Using <code>else if</code></a></li>
<li><a href="#_the_code_switch_code_statement">4.2.5. The <code>switch</code> Statement</a></li>
</ul>
</li>
<li><a href="#_how_long_will_a_variables_live">4.3. How Long Will A Variables Live?</a>
<ul class="sectlevel3">
<li><a href="#_the_keyword_code_static_code">4.3.1. The Keyword <code>static</code></a></li>
</ul>
</li>
<li><a href="#_special_methods_constructors">4.4. Special Methods: Constructors</a></li>
<li><a href="#_the_keyword_code_this_code">4.5. The Keyword <code>this</code></a></li>
<li><a href="#_arrays">4.6. Arrays</a></li>
<li><a href="#_repeating_actions_with_loops">4.7. Repeating Actions with Loops</a></li>
<li><a href="#_challenge_yourself_2">4.8. Challenge Yourself</a></li>
</ul>
</li>
<li><a href="#_interfaces_lambdas_abstract_and_anonymous_classes">5. Interfaces, Lambdas, Abstract and Anonymous Classes</a>
<ul class="sectlevel2">
<li><a href="#_java_interfaces">5.1. Java Interfaces</a>
<ul class="sectlevel3">
<li><a href="#_default_methods_in_interfaces">5.1.1. Default Methods in Interfaces</a></li>
<li><a href="#_static_methods_in_interfaces">5.1.2. Static Methods in Interfaces</a></li>
<li><a href="#_final_static_variables_in_interfaces">5.1.3. Final Static Variables in Interfaces</a></li>
<li><a href="#_functional_interfaces">5.1.4. Functional Interfaces</a></li>
</ul>
</li>
<li><a href="#_abstract_classes">5.2. Abstract Classes</a>
<ul class="sectlevel3">
<li><a href="#_what_s_the_difference_between_abstract_classes_and_interfaces">5.2.1. What&#8217;s the difference between abstract classes and interfaces?</a></li>
</ul>
</li>
<li><a href="#_anonymous_classes">5.3. Anonymous Classes</a></li>
<li><a href="#_lambda_expressions">5.4. Lambda Expressions</a>
<ul class="sectlevel3">
<li><a href="#_simplifying_code_with_lambdas">5.4.1. Simplifying Code With Lambdas</a></li>
</ul>
</li>
<li><a href="#_project_java_interfaces_and_lambda_expressions">5.5. Project: Java Interfaces and Lambda Expressions</a></li>
</ul>
</li>
<li><a href="#_access_levels_collections_generics_and_multi_threading">6. Access Levels, Collections, Generics, and Multi-Threading</a>
<ul class="sectlevel2">
<li><a href="#_access_levels">6.1. Access Levels</a></li>
<li><a href="#_casting">6.2. Casting</a></li>
<li><a href="#_selected_data_collections">6.3. Selected Data Collections</a>
<ul class="sectlevel3">
<li><a href="#_the_class_arraylist">6.3.1. The Class ArrayList</a></li>
<li><a href="#_the_class_hashtable">6.3.2. The Class Hashtable</a></li>
</ul>
</li>
<li><a href="#_introduction_to_generics">6.4. Introduction to Generics</a></li>
<li><a href="#_light_introduction_to_multi_threading">6.5. Light Introduction to Multi-Threading</a>
<ul class="sectlevel3">
<li><a href="#_how_to_create_a_thread">6.5.1. How to Create a Thread</a></li>
</ul>
</li>
<li><a href="#_project_using_arraylist_and_generics">6.6. Project: Using ArrayList and Generics</a></li>
</ul>
</li>
<li><a href="#_introduction_to_gui_with_javafx">7. Introduction to GUI with JavaFX</a>
<ul class="sectlevel2">
<li><a href="#_introduction_to_javafx">7.1. Introduction to JavaFX</a></li>
<li><a href="#_brief_overview_of_javafx_layouts">7.2. Brief Overview of JavaFX Layouts</a></li>
<li><a href="#_getting_started_with_scene_builder">7.3. Getting Started With Scene Builder</a></li>
<li><a href="#_gridpane_layout">7.4. GridPane Layout</a>
<ul class="sectlevel3">
<li><a href="#_designing_a_sign_in_window_in_scene_builder">7.4.1. Designing a Sign In Window in Scene Builder</a></li>
<li><a href="#_programming_the_sign_in_window_in_java">7.4.2. Programming the Sign In Window in Java</a></li>
</ul>
</li>
<li><a href="#_styling_with_css">7.5. Styling With CSS</a></li>
<li><a href="#_borderpane_and_combining_layouts">7.6. BorderPane and Combining Layouts</a></li>
<li><a href="#_project_creating_a_gui_for_calculator">7.7. Project: Creating a GUI for Calculator</a></li>
</ul>
</li>
<li><a href="#_programming_user_interaction_in_javafx">8. Programming User Interaction in JavaFX</a>
<ul class="sectlevel2">
<li><a href="#_events">8.1. Events</a>
<ul class="sectlevel3">
<li><a href="#_assigning_event_handlers_in_fxml">8.1.1. Assigning Event Handlers in FXML</a></li>
<li><a href="#_adding_controller_to_sign_in_application">8.1.2. Adding Controller to Sign In application</a></li>
<li><a href="#_data_exchange_between_gui_components_and_controller">8.1.3. Data Exchange Between GUI Components And Controller</a></li>
<li><a href="#_assigning_event_handlers_in_java">8.1.4. Assigning Event Handlers in Java</a></li>
<li><a href="#_further_reading_on_event_handling">8.1.5. Further Reading on Event Handling</a></li>
</ul>
</li>
<li><a href="#_data_binding_and_properties">8.2. Data Binding and Properties</a></li>
<li><a href="#_application_thread_in_javafx">8.3. Application Thread in JavaFX</a>
<ul class="sectlevel3">
<li><a href="#_the_frozen_screen_demo">8.3.1. The Frozen Screen Demo</a></li>
</ul>
</li>
<li><a href="#_deploying_with_javafx_packager">8.4. Deploying With JavaFX Packager</a></li>
<li><a href="#_what_to_study_next_about_javafx">8.5. What to Study Next About JavaFX</a></li>
<li><a href="#_project_adding_events_handling_for_calculator">8.6. Project: Adding Events Handling for Calculator</a>
<ul class="sectlevel3">
<li><a href="#_challenge_yourself_3">8.6.1. Challenge Yourself</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_error_handling">9. Error Handling</a>
<ul class="sectlevel2">
<li><a href="#_reading_the_stack_trace">9.1. Reading the Stack Trace</a></li>
<li><a href="#_genealogical_tree_of_exceptions">9.2. Genealogical Tree of Exceptions</a></li>
<li><a href="#_try_catch_block">9.3. Try/Catch Block</a></li>
<li><a href="#_the_keyword_code_throws_code">9.4. The keyword <code>throws</code></a></li>
<li><a href="#_the_keyword_code_finally_code">9.5. The Keyword <code>finally</code></a></li>
<li><a href="#_the_keyword_code_throw_code">9.6. The Keyword <code>throw</code></a></li>
<li><a href="#_creating_custom_exceptions">9.7. Creating Custom Exceptions</a></li>
<li><a href="#_project_create_a_javafx_bike_store">9.8. Project: Create a JavaFX Bike Store</a></li>
</ul>
</li>
<li><a href="#_creating_a_tic_tac_toe_game">10. Creating a Tic-Tac-Toe Game</a>
<ul class="sectlevel2">
<li><a href="#_developing_the_game_step_by_step">10.1. Developing the Game: Step by Step</a>
<ul class="sectlevel3">
<li><a href="#_developing_the_gui_part_in_scene_builder">10.1.1. Developing the GUI part in Scene Builder</a></li>
<li><a href="#_handling_button_clicks_in_controller">10.1.2. Handling Button Clicks in Controller</a></li>
<li><a href="#_styling_buttons_and_the_menu_bar">10.1.3. Styling Buttons and the Menu Bar</a></li>
<li><a href="#_implementing_the_game_strategy">10.1.4. Implementing the Game Strategy</a></li>
<li><a href="#_highlighting_the_winning_combination">10.1.5. Highlighting the Winning Combination</a></li>
<li><a href="#_handling_the_tic_tac_toe_menu_play">10.1.6. Handling the Tic-Tac-Toe Menu Play</a></li>
</ul>
</li>
<li><a href="#_project_playing_against_computer">10.2. Project: Playing Against Computer</a>
<ul class="sectlevel3">
<li><a href="#_challenge_yourself_4">10.2.1. Challenge Yourself</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_working_with_files_and_serialization">11. Working With Files and Serialization</a>
<ul class="sectlevel2">
<li><a href="#_basics_of_working_with_streams">11.1. Basics of Working With Streams</a>
<ul class="sectlevel3">
<li><a href="#_byte_streams">11.1.1. Byte Streams</a></li>
<li><a href="#_bufferred_streams">11.1.2. Bufferred Streams</a></li>
</ul>
</li>
<li><a href="#_character_streams">11.2. Character Streams</a></li>
<li><a href="#_working_with_files_using_java_nio">11.3. Working With Files Using java.nio</a>
<ul class="sectlevel3">
<li><a href="#_using_classes_path_and_paths">11.3.1. Using Classes Path and Paths</a></li>
<li><a href="#_using_the_class_files">11.3.2. Using the Class Files</a></li>
<li><a href="#_reading_a_file">11.3.3. Reading a File</a></li>
<li><a href="#_writing_into_a_file">11.3.4. Writing Into a File</a></li>
</ul>
</li>
<li><a href="#_command_line_arguments">11.4. Command-Line Arguments</a></li>
<li><a href="#_serialization_turning_an_object_into_bytes">11.5. Serialization: Turning an Object Into Bytes</a></li>
<li><a href="#_project_saving_the_game_scores">11.6. Project: Saving the Game Scores</a></li>
</ul>
</li>
<li><a href="#_networking_downloading_files_from_the_internet">12. Networking: Downloading Files From the Internet</a>
<ul class="sectlevel2">
<li><a href="#_how_computers_find_each_other_on_the_web">12.1. How Computers Find Each Other on the Web</a></li>
<li><a href="#_domain_names_and_ip_addresses">12.2. Domain Names and IP Addresses</a></li>
<li><a href="#_downloading_files_from_the_web">12.3. Downloading Files From the Web</a>
<ul class="sectlevel3">
<li><a href="#_downloading_any_file_from_the_internet">12.3.1. Downloading Any File From the Internet</a></li>
</ul>
</li>
<li><a href="#_project_downloading_music">12.4. Project: Downloading Music</a></li>
</ul>
</li>
<li><a href="#_creating_a_ping_pong_game">13. Creating a Ping-Pong Game</a>
<ul class="sectlevel2">
<li><a href="#_the_strategy">13.1. The Strategy</a></li>
<li><a href="#_step_1_creating_the_table">13.2. Step 1: Creating the Table</a></li>
<li><a href="#_step_2_handling_keyboard_events">13.3. Step 2: Handling Keyboard Events</a>
<ul class="sectlevel3">
<li><a href="#_processing_keyboard_events_in_the_controller">13.3.1. Processing Keyboard Events in the Controller</a></li>
<li><a href="#_the_enum_type">13.3.2. The enum Type</a></li>
<li><a href="#_preparing_to_process_the_keys_s_q_and_n">13.3.3. Preparing to Process the Keys S, Q, and N</a></li>
</ul>
</li>
<li><a href="#_step_3_moving_the_paddle">13.4. Step 3: Moving the Paddle</a></li>
<li><a href="#_step_4_moving_the_ball">13.5. Step 4. Moving the Ball</a>
<ul class="sectlevel3">
<li><a href="#_moving_the_ball_to_the_right_paddle">13.5.1. Moving the Ball to the Right Paddle</a></li>
<li><a href="#_serving_the_ball_horizontally">13.5.2. Serving the Ball Horizontally</a></li>
<li><a href="#_serving_the_ball_in_random_directions">13.5.3. Serving the Ball in Random Directions</a></li>
</ul>
</li>
<li><a href="#_step_5_moving_the_computer_s_paddle">13.6. Step 5: Moving the Computer&#8217;s Paddle</a></li>
<li><a href="#_step_6_bouncing_the_ball">13.7. Step 6: Bouncing the Ball</a></li>
<li><a href="#_project_displaying_the_game_score">13.8. Project: Displaying the Game Score</a></li>
</ul>
</li>
<li><a href="#_git_for_kids">14. Git for Kids</a>
<ul class="sectlevel2">
<li><a href="#_two_types_of_version_control_systems">14.1. Two Types of Version Control Systems</a></li>
<li><a href="#_introduction_to_git">14.2. Introduction to Git</a>
<ul class="sectlevel3">
<li><a href="#_introducing_yourself_to_git">14.2.1. Introducing Yourself to Git</a></li>
</ul>
</li>
<li><a href="#_creating_a_new_git_repository">14.3. Creating a New Git Repository</a></li>
<li><a href="#_selected_git_commands">14.4. Selected Git Commands</a>
<ul class="sectlevel3">
<li><a href="#_the_status_command">14.4.1. The status Command</a></li>
<li><a href="#_the_add_command">14.4.2. The add Command</a></li>
<li><a href="#_the_commit_command">14.4.3. The commit Command</a></li>
<li><a href="#_the_reset_command">14.4.4. The reset Command</a></li>
<li><a href="#_code_branching">14.4.5. Code Branching</a></li>
<li><a href="#_conflict_resolution">14.4.6. Conflict Resolution</a></li>
</ul>
</li>
<li><a href="#_publishing_your_code_on_github">14.5. Publishing Your Code on GitHub</a>
<ul class="sectlevel3">
<li><a href="#_creating_a_github_repository">14.5.1. Creating a GitHub Repository</a></li>
<li><a href="#_pushing_the_local_repository_to_github">14.5.2. Pushing the Local Repository to GitHub</a></li>
<li><a href="#_pulling_the_latest_version_from_github">14.5.3. Pulling The Latest Version from GitHub</a></li>
<li><a href="#_cloning">14.5.4. Cloning</a></li>
<li><a href="#_forking_and_pull_requests">14.5.5. Forking and Pull Requests</a></li>
<li><a href="#_cloning_from_intellij_idea">14.5.6. Cloning From IntelliJ IDEA</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_epilogue">Epilogue</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div id="FIG0-1" class="imageblock">
<div class="content">
<img src="images/Cover.png" alt="Cover">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preface">Preface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The book "Java for Kids" was written by Yakov Fain, <a href="https://java-champions.java.net/">Java Champion</a>. The goal is to help students learn to program in the most popular language in the world: Java. This book starts from an introduction to Java and then explains how to write programs that have Graphic User Interface by writing the Tic-Tac-Toe and Ping-Pong games.</p>
</div>
<div class="paragraph">
<p>The "Java for Kids" book can be used in multiple ways:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Teenagers can use it to teach themselves</p>
</li>
<li>
<p>Parents can use this book for teaching their kids Java</p>
</li>
<li>
<p>School teachers can use it as a text book in introductory classes on programming</p>
</li>
<li>
<p>University professors can use it as a supplement to their "Computer Science 101" classes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While this book is written for 12+ year old kids, adults looking for an easy intro to Java may find this book useful as well. In the book you&#8217;ll be using the same tools used by professional programmers. As a bonus, the last chapter will teach you how to publish your code on the Web on a super popular site called <a href="https://github.com/">GitHub</a>. Millions of programmers share their programs there and you should too.</p>
</div>
<div class="paragraph">
<p><a href="http://instagram.com/yurifain">Yuri Fain</a> produced illustrations for this book. If this material seems too easy for you get the second edition of my book for adults <a href="http://www.amazon.com/Java-Programming-24-Hour-Trainer-Yakov/dp/111895145X">"Java 24-Hour Trainer"</a> or a video course <a href="http://javatraining.eu/">"Introduction to Java and Java EE"</a>.</p>
</div>
<div class="paragraph">
<p>The online version of this book is offered for free under <a href="http://creativecommons.org/about/license/">Creative Commons license</a>, but the author would appreciate <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=VQGWLFGZHL55Q">a donation</a> if you find this book useful. After making a donation, you&#8217;ll be entitled to receive the PDF version of the book as well as in MOBI (for Kindle) and EPUB (for iBook) formats. You&#8217;ll also be able to join <a href="https://groups.google.com/d/forum/java4kids">the Internet group</a> where readers can post their questions and comments regarding the content of this book.</p>
</div>
<div class="paragraph">
<p>If you find an error in the code samples email your comments directly to me at <a href="mailto:yakovfain@gmail.com">yakovfain@gmail.com</a> or open an issue at <a href="https://github.com/yfain/Java4Kids_code">code samples repository</a> on GitHub.</p>
</div>
<div class="paragraph">
<p>All rights reserved. &#169; Yakov Fain 2015.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_writing_your_first_program">1. Writing Your First Program</h2>
<div class="sectionbody">
<div class="paragraph">
<p>People communicate with each other using different languages. These days people often spend more time communicating with computers, smartphones and tablets than with each other. We casually say to each other, “I’ve installed a cool application that can do this and that”.  In other words, people use applications to communicate with computers. So someone has to write these applications. Those who write computer applications are known as programmers or software developers.</p>
</div>
<div class="paragraph">
<p>Programmers write applications like games, calculators, and text editors using different programming languages. Without applications, computers, smartphones, and game consoles would have very limited use for most people.  Computing devices usually come with an Operational System (OS) installed such as Windows, Mac OS, iOS, and Android, but imagine an iPhone that has no applications at all or a laptop that can only show the OS logo. Who would want such a device?</p>
</div>
<div class="paragraph">
<p>Programmers create applications using different programming languages such as Java, Python, C++, JavaScript, C, and many others. Some of the languages are good for producing small programs that require very little memory space and can be embedded in computer chips. Some programming languages are great for programming Web applications that run inside the Web browsers. Some programming languages are great for running on the server and handling thousands of users’ requests.  There are languages that are fine tuned for creating beautiful graphics. Similar to human languages, programming languages have a set of words (a.k.a. keywords) and the rules for using them (the syntax).</p>
</div>
<div class="paragraph">
<p>In this book you’ll learn the syntax of the Java programming language, which can be used for programming most types of applications. And for many years the Java programming language has been one of the world’s most popular computer languages. In fact, as I write this, estimates are that there is an estimated 10 million professional Java programmers in the world, but what makes it so popular?</p>
</div>
<div class="paragraph">
<p>For one thing, the same Java program can run on different devices: from desktop computers running Windows or MacOS to handheld devices such as smartphones and tablets. As a matter of fact, Java programs don’t care what device they’re running on because they run inside a kind of virtual hardware called a virtual machine. We’ll talk about the Java Virtual Machine a bit later in this chapter.</p>
</div>
<div class="paragraph">
<p>Java can be embedded in tiny microchips that control various home appliances or industrial devices like the ones that power smart homes where the heat or light can be programmed remotely from your phone. These Internet-connected things can be programmed in Java.</p>
</div>
<div class="paragraph">
<p>Programming languages can have some general characteristics and we say that Java is an object-oriented language. Its program elements (<em>classes</em>) represent objects from the real world. For example, you can create a class called <code>Car</code> and give it attributes that real cars have, like doors, wheels, and so on. Next, you can create another class based on the <code>Car</code> class, like <code>Tesla</code>, with all the features of the <code>Car</code> class (doors, wheels) plus an electric motor.</p>
</div>
<div class="paragraph">
<p>And the software required to write Java is free. With so many million of professional Java programmers in the world, you’ll find lots of sample program online so if you’re run into a problem, you can either find the solution by searching or ask in one of the popular online forums like <a href="http://stackoverflow.com">Stack Overflow</a>, and someone will probably answer your question!</p>
</div>
<div class="paragraph">
<p>But enough talk. Let’s start learning Java.</p>
</div>
<div class="sect2">
<h3 id="_installing_java_on_your_computer">1.1. Installing Java on Your Computer</h3>
<div class="paragraph">
<p>To start programming in Java you need to download the Java Development Kit (JDK) from the company called Oracle, which makes releases and updates of Java versions. The full name of the software to download is Java SE Development Kit. We&#8217;ll download the  Java SE 8, which was the latest version of Java available while writing this book. Just visit
<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">Oracle&#8217;s Web site</a>. Accept the license agreement and select the proper link depending on the Operational System (OS) installed on your computer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
While Java programmers need JDK installed, the users of your applications need to have Java Runtime Environment (JRE) installed on their machines. JRE is included in JDK, but can be downloaded separately as well.
</td>
</tr>
</table>
</div>
<div id="FIG1-1" class="imageblock">
<div class="content">
<img src="./images/fig_1_01.png" alt="fig 1 01">
</div>
<div class="title">Figure 1. Selecting the Java SE version</div>
</div>
<div class="paragraph">
<p>If you use Windows OS, download the file named jdk-8-windows-i586.exe. Since I work with Apple computers running Mac OS X, the file <em>jdk-8-macosx-x64.dmg</em> is my Java installer. Run your installer program, agree with all default answers (just press the button Next) and you&#8217;re almost ready to go.</p>
</div>
<div class="paragraph">
<p>In Mac OS, Java is installed in the folder <em>/Library/Java/JavaVirtualMachines/jdk1.8.0.jdk</em> (there could other digits after zero, which indicates the update number). On Windows computers it&#8217;ll be installed under
<em>c:\Program Files\Java\jdk1.8.0</em>, where <em>c:</em> is the name of your hard drive or SSD. If you use Mac OS, your installation is complete.</p>
</div>
<div class="sect3">
<h4 id="_for_windows_users_only">1.1.1. For Windows Users Only</h4>
<div class="paragraph">
<p>If you use Windows, you&#8217;ll also need to add Java to the environment  variable <code>Path</code>. Click on the menu Start, Control Panel, System and search for <em>Environment Variables</em>. You&#8217;ll see all system variables that exist in your OS As shown on the screenshot <a href="#FIG1-4">Windows OS - System Variables</a>. If you have administrator&#8217;s rights onto your Windows PC, you can set user variables that will apply only when a certain user logs into your PC, or system variables that will apply to all users.</p>
</div>
<div id="FIG1-4" class="imageblock">
<div class="content">
<img src="./images/fig_1_04.png" alt="fig 1 04">
</div>
<div class="title">Figure 2. Windows OS - System Variables</div>
</div>
<div class="paragraph">
<p>Press the lower button <em>Edit</em> and add the <em>bin</em> directory from your JDK at the beginning of the <code>Path</code> variable value. For example, add  <em>c:\Program Files\java\jdk1.8.0\bin;</em> if this is where your JDK is installed:</p>
</div>
<div id="FIG1-5" class="imageblock">
<div class="content">
<img src="./images/fig_1_05.png" alt="fig 1 05">
</div>
<div class="title">Figure 3. Adding the bin directory Path variable</div>
</div>
<div class="paragraph">
<p>Now the Windows installation of JDK is complete! I&#8217;m sure you&#8217;re eager to start writing your first program now so let&#8217;s do it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_three_main_steps_in_java_programming">1.2. Three Main Steps in Java Programming</h3>
<div class="paragraph">
<p>If you have an idea <em>what</em> to program, typically you&#8217;ll need to perform the following three steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>Write</em> the program in Java and save it in a file.</p>
</li>
<li>
<p><em>Compile</em> the program to translate it from Java language into a special <em>byte code</em> that JVM understands.</p>
</li>
<li>
<p><em>Run</em> the program.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_command_window">1.2.1. Command Window</h4>
<div class="paragraph">
<p>In this chapter we&#8217;ll compile and run the Hello World program in the Command window if you use Microsoft Windows or from Terminal if you&#8217;re on Mac OS.</p>
</div>
<div class="paragraph">
<p>In Windows, to open the Command window click on the <em>Start</em> menu and enter the letters <em>cmd</em> in the field that reads <em>Search programs and files</em> . On a Mac, open the Spotlight window by clicking on the looking glass icon at the top right corner of the screen, type the word Terminal and hit the Return on the keyboard.</p>
</div>
<div class="paragraph">
<p>First, create a folder named <em>practice</em> by entering the following command:</p>
</div>
<div class="paragraph">
<p><em>mkdir practice</em></p>
</div>
<div class="paragraph">
<p>This will be the place where we&#8217;ll store all of our Java programs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_1_write_the_program">1.2.2. Step 1 – Write the Program</h4>
<div class="paragraph">
<p>Starting from Chapter 2, we will use a special application  called Integrated Development Environment (IDE) to write, compile, and run programs. But to get a better understanding of how things work, let&#8217;s use any plain text editor (e.g. Notepad, TextEdit et al.) to type the code for our first Java program. Afterwards, save the code in a text file with a name ending in <em>.java</em>.</p>
</div>
<div id="FIG1-8" class="imageblock">
<div class="content">
<img src="./images/fig_1_08.png" alt="fig 1 08">
</div>
<div class="title">Figure 4. Typing the code</div>
</div>
<div class="paragraph">
<p>For example, if you want to write a program called <code>HelloWorld</code>, enter its code in a text editor.
Here is the program that prints the words <em>Hello World!</em> on your computer&#8217;s screen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">HelloWorld</span><span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">){</span>

       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello World!&quot;</span><span class="tok-o">);</span>

    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the above code with the name <em>HelloWorld.java</em> in the folder <em>practice</em>. Keep in mind that you are not allowed to use blank spaces in Java file names.</p>
</div>
<div class="paragraph">
<p>I’ll explain how and why this program works a little later in this chapter. For now, if you followed each step correctly, the program will print the words <em>Hello World</em> on the screen that we will go over in step 3.</p>
</div>
<div class="paragraph">
<p>Programmers often use the words <em>the source code</em> to refer to a program. So it&#8217;s safe to say the we wrote the source code of the program Hello World. Unless you&#8217;re an experienced Java programmer, you can&#8217;t just assume that this program is written correctly. Let&#8217;s proceed to Step 2 to find out.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_2_compile_the_program">1.2.3. Step 2 – Compile the Program</h4>
<div class="paragraph">
<p>Now you need to use Java compiler to turn the source code of Hello World program into byte code that JRE  understands. The program named <em>javac</em> is Java compiler, which is installed on your computer as a part of the JDK and can be located in the <em>bin</em> folder in your JDK.</p>
</div>
<div id="FIG1-10" class="imageblock">
<div class="content">
<img src="./images/fig_1_10.png" alt="fig 1 10" width="400" height="550">
</div>
<div class="title">Figure 5. Compiling the source code</div>
</div>
<div class="paragraph">
<p>Change the directory to <em>practice</em> with the command <em>cd practice</em>. If you have never used the command <em>cd</em> before, read  the online instructions on how to do it on <a href="http://www.wikihow.com/Change-Directories-in-Command-Prompt">Windows</a> or on <a href="http://blog.teamtreehouse.com/introduction-to-the-mac-os-x-command-line">Mac OS</a>. Now compile the program using the following command:</p>
</div>
<div class="paragraph">
<p><em>javac HelloWorld.java</em></p>
</div>
<div class="paragraph">
<p>You won’t see any confirmation message that your program <code>HelloWorld</code> has been compiled successfully. Having no messages means there no problems occurred during compilation. Type a command <em>dir</em> on Windows or <em>ls</em> on Mac and you&#8217;ll see the list of files in folder <em>practice</em>. This is how it looks in my Terminal window:</p>
</div>
<div id="FIG1-11" class="imageblock">
<div class="content">
<img src="./images/fig_1_11.png" alt="fig 1 11">
</div>
<div class="title">Figure 6. HelloWorld compiled successfully</div>
</div>
<div class="paragraph">
<p>First, I&#8217;ve entered the <em>pwd</em> command to make sure I&#8217;m in the <em>practice</em> folder. You should see a new file named <code>HelloWorld.class</code>. This proves that your program has been successfully compiled. Your original file <code>HelloWorld.java</code> can also be found there, and you can modify this file later to print <em>Hello Mom</em> or something else.</p>
</div>
<div class="paragraph">
<p>If the program has syntax errors, for example you forgot to type the last curly brace, Java compiler will print an error message. Now you’d need to fix the error, and recompile the program again. If you have several errors, you may need to repeat these actions more than once until the file <code>HelloWorld.class</code> is created.</p>
</div>
</div>
<div class="sect3">
<h4 id="_step_3_run_the_program">1.2.4. Step 3 – Run the Program</h4>
<div class="paragraph">
<p>Now let’s run the program. In the same Command or Terminal window enter the following:</p>
</div>
<div class="paragraph">
<p><em>java HelloWorld</em></p>
</div>
<div class="paragraph">
<p>After running this command, you&#8217;ll see the text <em>Hello World!</em> printed in the Terminal window as shown in <a href="#FIG1-12">Running HelloWorld</a>. Have you noticed that this time you’ve used the program <em>java</em> and not <em>javac</em>?  This is how you start JRE by providing it the name of the application to run (<code>HelloWorld</code> in this case).</p>
</div>
<div id="FIG1-12" class="imageblock">
<div class="content">
<img src="./images/fig_1_12.png" alt="fig 1 12">
</div>
<div class="title">Figure 7. Running HelloWorld</div>
</div>
<div class="paragraph">
<p>Keep in mind that Java does not treat capital and small letters the same, which means that if you originally named the program <code>HelloWorld</code> with a capital <code>H</code> and a capital <code>W</code>, do not try to start the program <code>helloworld</code> or <code>helloWorld</code> – the JRE will signal an error. The file name should match the class name as well. Typically, each file of your application contains the code of one class.</p>
</div>
<div class="paragraph">
<p>Now let’s have some fun trying to guess how to modify the code of the program that prints Hello World.  I’ll explain how this program works in the next chapter, but for now attempt to guess what has to be done to say hello to your pet, friend or print your address. Go through all three steps to see if the program still works after your changes. If you don&#8217;t have a pet, you can always say hello to my puppy - his name is Sammy. Are you up for the challenge to write a program that prints Hello Sammy! on the screen?</p>
</div>
<div id="FIG1-07" class="imageblock">
<div class="content">
<img src="./images/fig_1_07_.png" alt="fig 1 07 ">
</div>
<div class="title">Figure 8. Sammy is 4 months old here</div>
</div>
<div class="paragraph">
<p>In the next chapter you&#8217;ll learn how to write, compile and run your programs in a more convenient environment than just a text editor and a Command window.
:toc-placement!:
:imagesdir: .</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_comfy_in_idea_ide">2. Getting Comfy In IDEA IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most programmers write, compile and run their applications in special programs that go by the name <em>Integrated Development Environment</em>  (IDE). Any IDE provides help as you type code, highlights the Java <em>keywords</em>,  has a <em>Help</em> menu that describes all elements of the language, and makes it easier to find and fix errors in your programs. There are several excellent IDEs that are free to use. The most popular are <a href="http://www.eclipse.org/downloads/">Eclipse</a>, <a href="https://netbeans.org/downloads/">NetBeans</a>, and <a href="http://www.jetbrains.com/idea/download/">IntelliJ IDEA</a>. In this book we&#8217;ll use IntelliJ IDEA Community Edition. This is an excellent IDE for developing Java applications, and if you decide to program later on in other programming languages, IDEA supports <a href="http://www.jetbrains.com/idea/webhelp/supported-languages.html">more than a dozen</a> other languages too.</p>
</div>
<div class="paragraph">
<p>In this chapter we&#8217;ll start with downloading and installing IntelliJ IDEA IDE (let&#8217;s just call it IDEA). Then we&#8217;ll create a project called  <code>Hello</code>. You&#8217;ll see that creating the Hello World application is a lot easier inside IDEA.</p>
</div>
<div class="sect2">
<h3 id="_installing_intellij_idea">2.1. Installing IntelliJ IDEA</h3>
<div class="paragraph">
<p>There are two version of IDEA IDE - Ultimate and Community. The Ultimate version is not free, but it has additional features useful for developing enterprise applications. But this book is about learning the basics of Java programming so using the free Community edition is all we will need.</p>
</div>
<div class="paragraph">
<p>Open the Web page <a href="http://www.jetbrains.com/idea/download/">IntelliJ IDEA</a> and click on the <em>Download Community</em> button. It&#8217;ll download the installer program with the name that starts with <em>ideaIC</em> - just run it. On MAC OS the installer doesn&#8217;t prompt any questions. Just drag the icon onto the Applications folder.</p>
</div>
<div id="FIG2-0-0" class="imageblock">
<div class="content">
<img src="./images/fig_2_install_idea_mac.png" alt="fig 2 install idea mac">
</div>
<div class="title">Figure 9. Installing IDEA on MAC OS</div>
</div>
<div class="paragraph">
<p>On Windows, you&#8217;ll need to select the folder where IDEA will be install as shown below. Windows installer will also offer to create a desktop icon for IDEA - agree with this.</p>
</div>
<div id="FIG2-0" class="imageblock">
<div class="content">
<img src="./images/fig_2_00.png" alt="fig 2 00">
</div>
<div class="title">Figure 10. Selecting the destination folder on Windows</div>
</div>
<div class="paragraph">
<p>In several seconds you&#8217;ll get the IDEA installed by clicking on the Next button. If you use MAC OS, find it using Spotlight on the top right corner of the screen and click on it. If you use Windows, click on the newly created IDEA icon on your desktop. The first question IDEA asks is if you want to import the settings from the older versions of IDEA. Do not select this. Next comes this Welcome screen:</p>
</div>
<div id="FIG2-1" class="imageblock">
<div class="content">
<img src="./images/fig_2_01.png" alt="fig 2 01">
</div>
<div class="title">Figure 11. Welcome to IntelliJ IDEA Community Edition</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_your_first_project">2.2. Creating Your First Project</h3>
<div class="paragraph">
<p>In IDEA, your Java applications will be located in separate projects. As you&#8217;ve probably guessed, you&#8217;ll need to select the option <em>Create New Project</em> on the Welcome screen. Then IDEA will ask you about the type of the project you want to create.</p>
</div>
<div id="FIG2-2" class="imageblock">
<div class="content">
<img src="./images/fig_2_02.png" alt="fig 2 02">
</div>
<div class="title">Figure 12. Selecting the project type</div>
</div>
<div class="paragraph">
<p>Select the option to create a Java project. In IDEA projects consist of modules. By selecting Java we state that our project will have a Java module. Hit the button Next and then again on the following window that will ask about selecting a template that will be used in this project. Now we need to give our project a name and select the JDK to be used with this project.</p>
</div>
<div id="FIG2-3" class="imageblock">
<div class="content">
<img src="./images/fig_2_03.png" alt="fig 2 03">
</div>
<div class="title">Figure 13. Selecting the project name and JDK</div>
</div>
<div class="paragraph">
<p>We don&#8217;t want our project to be <em>untitled</em>, so replace this name with <em>hello</em> in the top box. Note how the name of the folder in the Project location box changes accordingly. When you’ll try to do it on your computer, the project location will appear different than mine. Now you need to select the JDK. If you have never worked with Java before, the only JDK you will have is the one installed in Chapter 1 although Java programmers sometimes have more than one JDK installed. For example, they may not be allowed to use the latest JDK 8 for work projects, so they keep the JDK 7 around, but all the fun projects will be created with JDK 8.</p>
</div>
<div class="paragraph">
<p>We don&#8217;t have such restrictions, so JDK 8 is our only choice. Now figure out where to locate it.</p>
</div>
<div class="paragraph">
<p>Click on the button New, select the menu item <em>JDK</em>, and you&#8217;ll see a familiar screen for browsing the folders on your computer. Please refer to the first section of Chapter 1 ( <em>Installing Java on Your Computer</em>) depending on whether you are working with  MAC or Windows. I&#8217;m using MAC, so I&#8217;m choosing <em>Library</em>, <em>Java</em>, <em>JavaVirtualMachines</em>, <em>jdk1.8.0.jdk</em>. Notice the previous window now looks different.</p>
</div>
<div id="FIG2-4" class="imageblock">
<div class="content">
<img src="./images/fig_2_04.png" alt="fig 2 04">
</div>
<div class="title">Figure 14. The project name and JDK selected</div>
</div>
<div class="paragraph">
<p>Press the button Finish and your new project is created. Every time you start IDEA it offers you little tips on how to use its cool features. You can opt out from this, but I recommend you read them - you might find some little gems that will make your work with IDEA more fun. The project <em>hello</em> is ready, and you can start writing your Hello World program.</p>
</div>
<div id="FIG2-5" class="imageblock">
<div class="content">
<img src="./images/fig_2_05.png" alt="fig 2 05">
</div>
<div class="title">Figure 15. The project hello</div>
</div>
<div class="paragraph">
<p>This project consists of the module hello and External Libraries. The source code of your program(s) will be located in the folder src in the hello module. The file <em>hello.iml</em> is where IDEA remembers the settings of the project hello - you don&#8217;t need to touch it. Under External Libraries you&#8217;ll find a bunch of files that end in <em>.jar</em>. These JAR&#8217;s are the libraries of code that came with JDK.</p>
</div>
<div class="paragraph">
<p>A simple project like our <code>HelloWorld</code> will have just one file with the source code <em>HelloWorld.java</em>. More advanced projects will consist of multiple files. To simplify the application deployment, all these files could be packaged in one or more JARs too. Both JRE and Java SDK include dozens of JARs. Java comes with a jar utility that is used to archive multiple Java classes and other files into a file having the name extension .jar. Internal formats of .jar and .zip files are the same. If your IDEA project will have multiple classes, you can package them into one JAR by using the menu File | Project Structure | Artifacts and then selecting the type JAR.</p>
</div>
<div id="FIG2-5-1" class="imageblock">
<div class="content">
<img src="./images/fig_2_Jar.png" alt="fig 2 Jar">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_helloworld_class_in_idea">2.3. Creating HelloWorld Class in IDEA</h3>
<div class="paragraph">
<p>Java programs consist of <em>classes</em>, and you’ll start getting familiar classes' internals in the section "How Does Hello World Work". Let’s recreate the <code>HelloWorld</code> class from Chapter 1 in IDEA.  Select the folder <em>src</em> in your project, and then select the menu File | New | Java Class.  You&#8217;ll see a little popup window asking for a class name. Enter the name <code>HelloWorld</code> there.</p>
</div>
<div id="FIG2-6" class="imageblock">
<div class="content">
<img src="./images/fig_2_06.png" alt="fig 2 06">
</div>
<div class="title">Figure 16. Naming the class</div>
</div>
<div class="paragraph">
<p>In a second IDEA will generate an empty class <code>HelloWorld</code> as shown below. The white area on the right is a very smart text editor that will allow you to not only enter the text of your program, but will also help you by suggesting what to type next as you type. This editor is really smart!</p>
</div>
<div id="FIG2-7" class="imageblock">
<div class="content">
<img src="./images/fig_2_07.png" alt="fig 2 07">
</div>
<div class="title">Figure 17. An empty class HelloWorld</div>
</div>
<div class="paragraph">
<p>The text between <code>/**</code> and <code>*/</code> is one of the ways to write comments in your programs. This is an area where you can type any text you want that describes your program in general or any particular code inside the class. We&#8217;ll talk about various ways to write comments in the next chapter.</p>
</div>
<div class="sect3">
<h4 id="_adding_the_method_main">2.3.1. Adding the method main</h4>
<div class="paragraph">
<p>It&#8217;s time to key in the <code>main</code> method declaration inside the class like we did in Chapter 1:</p>
</div>
<div class="paragraph">
<p><code>public static void main(String[] args)</code></p>
</div>
<div class="paragraph">
<p>You can certainly type the above declaration, and IDEA will obediently start helping as you start typing. For example, I started typing the word <code>public</code>, and after entering the <code>pu</code> IDEA suggested the following selection of keywords that are appropriate in the current location inside the class.</p>
</div>
<div id="FIG2-8" class="imageblock">
<div class="content">
<img src="./images/fig_2_08.png" alt="fig 2 08">
</div>
<div class="title">Figure 18. Code Competion</div>
</div>
<div class="paragraph">
<p>Pressing the button <em>Tab</em> on the keyboard will turn <code>pu</code> into <code>public</code>. You can also press the keys <em>Control-Space</em> to see suggested code completion at any time. But there is an even faster way to enter the declaration of the <code>main</code> method. Just type in the first letters of these keywords <code>psvm</code>, and press the <em>Tab</em> key. IDEA will unfold these letters into the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Great job, IDEA! Such code completion minimizes typing and the number of typos you could make. At the end of this chapter in the section Additional Reading you&#8217;ll find the link to a Web page showing more advanced features of code completion in IDEA. It may be a little early for you to understand everything that&#8217;s explained there, but bookmark a link to this page for future reference.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
To become a real pro in IDEA, you should use the <em>hotkeys</em>, which are combinations of key-presses on the keyboard. With hotkeys you&#8217;ll be able to navigate in your IDEA projects a lot faster than by clicking through menus. You can find the link to the document listing IDEA&#8217;s hotkeys in the section Additional Reading at the end of this chapter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we have the class <code>HelloWorld</code> with an empty <em>method</em> <code>main</code>. The word <em>method</em> means <em>action</em>. To run a Java class as a program, this class must have a method called <code>main</code>. Usually your applications will have many classes, but only one of them will have the method <code>main</code>. This class becomes the entry point in your application.</p>
</div>
<div class="paragraph">
<p>To complete our program, place the cursor after the curly brace in the line with <code>main</code>, push the button <em>Enter</em> and type the following on the new line:</p>
</div>
<div class="paragraph">
<p><code>System.out.println("Hello World!");</code></p>
</div>
<div class="paragraph">
<p>After learning about the <code>psvm</code> shortcut you may be wondering, is there a way to do a similar trick with <code>System.out.println()</code>. Just type in <code>sout</code> and press the <em>Tab</em> key. Voila! The <code>sout</code> magically turns into <code>System.out.println();</code>. Java programmers often use printing to the console so the creators of IDEA provided a shortcut for it.</p>
</div>
<div class="paragraph">
<p>To save the code changes and compile the class, just press <em>Ctrl-S</em> on your keyboard. If you did not make any syntax errors, you won’t see any error messages therefore the program is compiled, but let’s introduce a syntax error on purpose to see what’s going to happen. Erase the last curly brace in the class <code>HelloWorld</code> and hit <em>Ctrl-S</em> again. IDEA will add a squiggly line where Java compiler found the error, the line is marked with the red mark on the right, and if you&#8217;ll hover the mouse pointer over this little red rectangle, you&#8217;ll see the error message:</p>
</div>
<div id="FIG2-9" class="imageblock">
<div class="content">
<img src="./images/fig_2_09.png" alt="fig 2 09">
</div>
<div class="title">Figure 19. Compiler caught a syntax error</div>
</div>
<div class="paragraph">
<p>As your project becomes larger, it’ll have several files and the compiler may catch more than one error. Can you see a list of errors from all classes? By default, IDEA doesn&#8217;t compile all the classes from your project, but you can request compiling of the entire project every time you make a change or save the source code. Go to the IDEA menu Preferences (or Settings), select <em>Compiler</em> and check off the option <em>Make project automatically</em>. Now select the menu View | Tool Windows | Problems to see all the problems in one list:</p>
</div>
<div id="FIG2-10" class="imageblock">
<div class="content">
<img src="./images/fig_2_10.png" alt="fig 2 10">
</div>
<div class="title">Figure 20. The Problems View</div>
</div>
<div class="paragraph">
<p>In our case we only have one compiler error. Java reached the end of the file while parsing (trying to understand your code), and something could not be found - the curly brace, of course. But what does this mysterious <em>(8,6)</em> mean? The error was found in the line number 8 around the sixth character from the left. To see line numbers, right-click on the gray vertical bar to the left of the code editor and select the option Show Line Numbers. Now it&#8217;s easier to map the error messages to the lines in the source code:</p>
</div>
<div id="FIG2-11" class="imageblock">
<div class="content">
<img src="./images/fig_2_11.png" alt="fig 2 11">
</div>
<div class="title">Figure 21. Displaying the line numbers</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_helloworld_in_idea">2.3.2. Running HelloWorld in IDEA</h4>
<div class="paragraph">
<p>After all syntax errors are fixed, compiler automatically creates the HelloWorld.class when you save the code. IDEA doesn&#8217;t show you <em>.class</em> files, but if you are curious where they are, open the menu File | Project Structure to see the folder where the compiler&#8217;s output goes. When a program is written, tested, does what it supposed to do (e.g. print Hello World), and if you want to give it to your friends you&#8217;ll need to give  only compiled <code>.class</code> files. They don&#8217;t need source code of your program, but they do need the JRE (not JDK) installed on their computer.</p>
</div>
<div class="paragraph">
<p>Java programmers can run their programs not only from a command window demonstrated in Chapter 1, but right from the IDE. Just right-click on the name HelloWorld in the Project view and select the menu item <em>Run HelloWorld.main()</em>. The program will run and you&#8217;ll see the results in the Console View right inside IDEA:</p>
</div>
<div id="FIG2-12" class="imageblock">
<div class="content">
<img src="./images/fig_2_12.png" alt="fig 2 12">
</div>
<div class="title">Figure 22. Running HelloWorld in IDEA</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_code_helloworld_code_work">2.4. How Does <code>HelloWorld</code> Work?</h3>
<div class="paragraph">
<p>It&#8217;s great that you&#8217;re following my instructions and the program works. But what exactly is happening in the program <code>HelloWorld</code>? What are all these keywords, braces and parentheses for?</p>
</div>
<div class="paragraph">
<p>Every Java program has at least one class, and Chapter 3 explains classes in detail. Classes can contain <em>methods</em>, which are the actions that the class can perform. The class <code>HelloWorld</code> has only one method <code>main</code>, which is a special action. It&#8217;s a program starter or an entry point of any Java application. You can tell that <code>main</code> is not a Java keyword, but a method, because it has parentheses after the word <code>main</code>. Methods can <em>call</em> (invoke) other methods, for example our method <code>main</code> calls the method <code>println</code> to display <code>Hello World!</code> on the screen.</p>
</div>
<div class="paragraph">
<p>Each method starts with a <em>declaration line</em> a.k.a. a <em>method signature</em>:</p>
</div>
<div class="paragraph">
<p><code>public static void main(String[] args)</code></p>
</div>
<div class="paragraph">
<p>This method signature tells us the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This method has <code>public</code> access level. The keyword <code>public</code> means that the method <code>main</code> could be accessed by any other Java class or the JRE itself.</p>
</li>
<li>
<p>This method is <code>static</code>. The keyword <code>static</code> means that you don’t have to create an <em>instance</em>  of the <code>HelloWorld</code> object in memory to use this method. We’ll talk about classes and object instances in the next chapter.</p>
</li>
<li>
<p>Does the method <code>main</code> <em>return</em> any data? Say, if you&#8217;ll write a method to add two numbers, it can return a result. The keyword <code>void</code> means that the method <code>main</code> doesn’t return any data to whomever calls it (JRE in this case).</p>
</li>
<li>
<p>The method name <code>main</code> goes right before parentheses.</p>
</li>
<li>
<p>Some methods have parameters (a.k.a. arguments), which go inside the parentheses. It&#8217;s the data that could be given to the method from another place of the program that invokes this method. The method <code>main</code> has parameters - and an array of text values <code>String[] args</code>. You&#8217;ll learn how to use the parameters of the method <code>main</code> in Chapter 9 in the section Command Line Arguments.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A Java program can consist of several classes, and each class may include methods. Usually, a Java class has several methods. For example, a class <code>Game</code> can have the methods <code>startGame</code>, <code>stopGame</code>, <code>readScore</code>, and so on. But only one class in the application will have the method <code>main</code>.</p>
</div>
<div class="paragraph">
<p>The body of our method <code>main</code> has only only one <em>statement</em>:</p>
</div>
<div class="paragraph">
<p><code>System.out.println("Hello World!");</code></p>
</div>
<div class="paragraph">
<p>Every statement or a method call must end with a semicolon. The method <code>println</code> knows how to print data on the <em>system console</em> (command window). Java method names are always followed by parentheses. If you see a method with empty parentheses, this means that  this method does not have any arguments and doesn&#8217;t expect to receive any data. The above method <code>println</code> has one argument - a <code>String</code> with the value <code>Hello World!</code>.</p>
</div>
<div class="paragraph">
<p><code>System.out</code> means that the variable <code>out</code> is defined inside the class <code>System</code> that comes with Java. How are you supposed to know that there’s something called <code>out</code> in the class <code>System</code>? IDEA will help you with this. After you type the word <code>System</code> and a dot, IDEA will show you everything that is available in this class. You can also put a cursor after the dot and press <em>Ctrl-Space</em> at any time to bring up a help box similar to this one:</p>
</div>
<div id="FIG2-15" class="imageblock">
<div class="content">
<img src="./images/fig_2_15.png" alt="fig 2 15">
</div>
<div class="title">Figure 23. Peeking inside the System class with code completion</div>
</div>
<div class="paragraph">
<p>This tells me that the Java class <code>System</code> has a variable <code>out</code> of type <code>PrintStream</code>. Are you curious as to what <code>PrintStream</code> is? Click on <code>out</code> in your code and select the menu <em>View | Quick Documentation</em> to read the dry documentation. The fact that a period goes after <code>out</code> followed by a method name - <code>out.println()</code> - tells us that <code>out</code> represents an object, which apparently has a method called <code>println()</code>.</p>
</div>
<div class="paragraph">
<p>We call it a <em>dot notation</em>. We write <em>class_name.method_name</em> or <em>variable_name.method_name</em>. Say you have a class <code>PingPongGame</code> that has a method <code>saveScore</code>.  If the method <code>saveScore</code> was declared with the two arguments <code>player</code> and <code>score</code>, you may <em>call</em> this method for Dave who won three games:</p>
</div>
<div class="paragraph">
<p><code>PingPongGame.saveScore("Dave", 3);</code></p>
</div>
<div class="paragraph">
<p>In this example, the arguments may be given to the method for some kind of processing like saving the score on the disk. Since the name Dave was placed in parentheses, we can guess that the first argument has a <code>String</code> type, which is used for text. The second argument is clearly of a numeric type but we can tell what&#8217;s the exact type only after reading the declaration of the method <code>saveScore</code> inside the source code of the class <code>PingPongGame</code>.</p>
</div>
<div class="paragraph">
<p>In the next chapter we&#8217;ll spend a lot more time seeing what Java classes consist of.
:toc-placement!:
:imagesdir: .</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_meet_classes_the_main_language_constructs">3. Meet Classes - the Main Language Constructs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the real world you see and use various objects, and each of them is belongs to some <em>kind</em> such as toys, food, animals, electronics et al. In Java, instead of saying what kind of objects, we say what <em>class</em> of objects. In other words, each object belongs to a class. A class is like a blueprint of an object. In this chapter you’ll get familiar with classes - the main constructs of the Java language.</p>
</div>
<div class="paragraph">
<p>Any program that you’ll write will have at least one class. You’ll learn how to declare a class and how to create one or more objects based on the class declaration. You’ll also learn about a class&#8217;s internals – what a class can consist of. Finally, I’ll show you how to create a class that inherits features of another class.</p>
</div>
<div class="paragraph">
<p>Java defines a number of data types. Some of them are simple, like <code>int</code>, which represents integer numbers. Some of them are more complex - they are called <em>classes</em>, like <code>System</code>, which can be used for things like printing text on the screen, exiting a program, or cleaning a computer&#8217;s memory.</p>
</div>
<div class="paragraph">
<p>When you installed Java on your computer, you installed thousands of Java classes. Your Java programs will also consist of <em>classes</em> that can represent <em>objects</em> from the real world. If a class is a data type, an object is a representative of a specific type. For instance, you can see ten dogs on the street, and they all represent the class <code>Dog</code>.</p>
</div>
<div class="paragraph">
<p>Programmers start working on any application by deciding  which Java classes to include in the program and how many of each object type to create. Say, they can define a class <code>Player</code> in the gaming application and create two object instances of this type.</p>
</div>
<div class="sect2">
<h3 id="_dissecting_classes_and_objects">3.1. Dissecting Classes and Objects</h3>
<div class="paragraph">
<p>When programmers talk to each other, they may say "Do something with the class Player" or "Do something with the object Player". We need to learn the difference between the meaning of the words <em>class</em> and <em>object</em>.</p>
</div>
<div class="sect3">
<h4 id="_classes">3.1.1. Classes</h4>
<div class="paragraph">
<p>Let&#8217;s see what Java classes can consist of. A very simple class can have nothing inside. Take a look at this class declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">VideoGame</span> <span class="tok-o">{</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class is empty. It knows nothing and can&#8217;t do anything because there is no code between the curly braces. From the Java syntax perspective, this class is legitimate and compiler won&#8217;t complain. There is a valid keyword <code>class</code> followed by its name <code>VideoGame</code>. The opening curly brace has the matching closing one. We need classes that can do stuff. We can place methods and attributes inside the class.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Methods define actions that a class can perform.</p>
</li>
<li>
<p>Attributes describe various properties of a class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A method consists of a callable code fragment, that can be called (and executed) by name from another part of the program. For example, a class can have a method named <code>saveScore</code> that contains a dozen of lines of code to save the game score. Let’s add some methods and attributes to the class <code>VideoGame</code>. This class may have several methods, which can tell <em>what an object of this class can do</em>: start the game, stop it, save the score, ask for additional lives on Facebook, and so on. This class also may have some attributes (a.k.a. fields): color, price and others. An object that represents the class <code>VideoGame</code> can look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">VideoGame</span> <span class="tok-o">{</span>

  <span class="tok-n">String</span> <span class="tok-n">color</span><span class="tok-o">;</span>
  <span class="tok-kt">int</span> <span class="tok-n">price</span><span class="tok-o">;</span>

  <span class="tok-kt">void</span> <span class="tok-nf">start</span> <span class="tok-o">()</span> <span class="tok-o">{</span>
     <span class="tok-c1">// The code to start the game goes here</span>
  <span class="tok-o">}</span>

  <span class="tok-kt">void</span> <span class="tok-nf">stop</span> <span class="tok-o">()</span> <span class="tok-o">{</span>
     <span class="tok-c1">// The code to stop the game goes here</span>
  <span class="tok-o">}</span>

  <span class="tok-kt">void</span> <span class="tok-nf">saveScore</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">playerName</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">score</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-c1">// The code to save score goes here</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class has two attributes <code>color</code> and <code>price</code>. The color attribute has the <code>String</code> data type, which is used for storing any text. The <code>price</code> attribute is of an <code>int</code> type, which is used for storing integer numbers. The class <code>VideoGame</code> has three <em>methods</em>: <code>start</code>, <code>stop</code>, and <code>saveScore</code>. These are the actions that our video game should perform. Each of these method declarations start with a keyword <code>void</code>, which means that these methods do not return a value to the caller of the method. In the next chapter I’ll show you a class <code>Fish</code>, which will include a method <code>dive</code> that returns a value.</p>
</div>
<div class="paragraph">
<p>At this point each of these methods has just a single line that starts with two slashes //.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a line starts with two slashes, it contains a <em>single line comment</em> - just the description of a code fragment. If you need to write several lines of comments, just type in a slash followed by the asterisk <code>/*</code>, then key in as many lines of a text as you want followed by <code>*/</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Our class <code>VideoGame</code> can be used as a starting building block for pretty much any video game – all game consoles have the color attribute, all of them allow to save score, and all of them have price tags.</p>
</div>
<div id="FIG3-1" class="imageblock">
<div class="content">
<img src="./images/fig_3_01.png" alt="fig 3 01" width="400" height="550">
</div>
<div class="title">Figure 24. The Video Game Object</div>
</div>
<div class="paragraph">
<p>We can be more specific and create another Java class called <code>PlayStation4</code>. It also belongs to the family of video games, but has some properties that are specific to the model Play Station 4, for example sharing on Facebook and Twitter. So among other things, the class <code>PlayStation4</code> will have methods <code>shareOnFacebook</code> and <code>shareOnTwitter</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">PlayStation4</span><span class="tok-o">{</span>

    <span class="tok-kt">int</span> <span class="tok-n">hardDiskSize</span><span class="tok-o">;</span>

  <span class="tok-c1">// Some other attributes and methods go here</span>

  <span class="tok-kt">void</span> <span class="tok-nf">shareOnFacebook</span><span class="tok-o">(){</span>
     <span class="tok-c1">// Code to share on Facebook go here</span>
  <span class="tok-o">}</span>

  <span class="tok-kt">void</span> <span class="tok-nf">shareOnTwitter</span><span class="tok-o">(){</span>
     <span class="tok-c1">// Code to share on Twitter go here</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_objects">3.1.2. Objects</h4>
<div class="paragraph">
<p>We&#8217;ll often use the phrase <em>create an instance of an object</em>, which means to create an object in a computer&#8217;s memory based on some class declaration. If a game factory will produce ten thousand games, a programmer can say that they created ten thousand instances of the class <code>PlayStation4</code>.</p>
</div>
<div class="paragraph">
<p>The factory description of <code>PlayStation4</code> relates to an actual game the same way as a Java class relates to its instance in memory. The process of building actual games based on this description in the game factory is similar to the process of creating instances of  <code>PlayStation4</code> objects in Java. For example, the next code sample creates one instance of the class <code>PlayStation4</code> and calls its method <code>shareOnFacebook</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CreatePlayStation4Objects</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-c1">// create one instance of PlayStation4 class</span>
    <span class="tok-n">PlayStation4</span> <span class="tok-n">firstPlayStation</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PlayStation4</span><span class="tok-o">();</span>

    <span class="tok-c1">// call the method shareOnFacebook</span>
    <span class="tok-n">firstPlayStation</span><span class="tok-o">.</span><span class="tok-na">shareOnFacebook</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In many cases, a program can use a Java class only after creating the instance of an object. The same with manufacturers - they create thousands of game copies based on the same description. Even though these copies represent the same class, they may have different <em>values</em> in their attributes - some of them are black while others can be silver. Some of them have 500GB hard disk dive while some are upgraded to 1TB.</p>
</div>
<div id="FIG3-2" class="imageblock">
<div class="content">
<img src="./images/fig_3_02.png" alt="fig 3 02">
</div>
<div class="title">Figure 25. One Class, Two Instances</div>
</div>
<div class="paragraph">
<p>In programmer&#8217;s jargon, you can create multiple instances of the <code>PlayStation4</code> objects with different values in the <code>hardDiskSize</code> attribute.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_java_data_types_and_variables">3.2. Java Data Types and Variables</h3>
<div class="paragraph">
<p>If you ever covered algebra at any point in school, you are familiar with expressions like <code>x=2</code>, which means that the variable <code>x</code> represents the number 2. In programming, we use variables a lot. In programming a variable can store a value in computer’s memory so you can access these values from various methods in your classes.  Using the same algebra example, we can say that we assign the value of 2 to the variable <code>x</code>. The equal sign represents the assignment of the value located to the right of the equal sign to the variable located on the left.</p>
</div>
<div class="paragraph">
<p>Java variables not only can store numbers, but other types of data as well so we need to declare the variable type, the name, and then assign some value to it.  For example, the class attribute that has a value of the disk size can be stored in the variable of type <code>String</code> that&#8217;s called <code>hardDiskSize</code>, which can be declared like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">String</span> <span class="tok-n">hardDiskSize</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the size of the hard disk is 500GB, we can assign this value to the variable <code>hardDiskSize</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">hardDiskSize</span><span class="tok-o">=</span><span class="tok-s">&quot;500GB&quot;</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>String</code> values are placed inside the quotes, and the numbers aren&#8217;t.</p>
</div>
<div class="paragraph">
<p>The method parameters (a.k.a. arguments) are also stored in variables. The method <code>saveStore</code> has two arguments: <code>playerName</code> of type <code>String</code> and <code>score</code> of type <code>int</code>:</p>
</div>
<div class="paragraph">
<p><code>void saveScore(String playerName, int score)</code></p>
</div>
<div class="sect3">
<h4 id="_primitives">3.2.1. Primitives</h4>
<div class="paragraph">
<p>Simple Java data types are called <em>primitives</em>. Their keywords are written in small letters (e.g. <code>int</code>, <code>long</code>, <code>char</code>, <code>boolean</code>). So the <code>score</code> is of a primitive data type, while the <code>playerName</code> is not. In Java you have to declare the type and the name of a variable first and then use it.</p>
</div>
<div class="paragraph">
<p>Remember algebra equations like <code>y=x+2</code>?  In Java you’d need to start with declaring the variables <code>x</code> and <code>y</code> of some numeric data type like <code>int</code>, <code>float</code> or <code>double</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span> <span class="tok-n">x</span><span class="tok-o">;</span>
<span class="tok-kt">int</span> <span class="tok-n">y</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can use the variables. The next two lines show how you can assign them values. If your program assigns the value of five to the variable <code>x</code>, after evaluating <code>x+2</code> the variable <code>y</code> will be equal to seven:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">x</span><span class="tok-o">=</span><span class="tok-mi">5</span><span class="tok-o">;</span>
<span class="tok-n">y</span><span class="tok-o">=</span><span class="tok-n">x</span><span class="tok-o">+</span><span class="tok-mi">2</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In Java you are also allowed to change the value of a variable in a somewhat unusual way. The following two lines change the value of the variable <code>y</code> from five to six:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span> <span class="tok-n">y</span><span class="tok-o">=</span><span class="tok-mi">5</span><span class="tok-o">;</span>
<span class="tok-n">y</span><span class="tok-o">++;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Despite the two plus signs, JVM is still going to increment the value of the variable <code>y</code> by one. The <code>y++</code> means read the value of the variable <code>y</code>, increment it by one, and assign it back to <code>y</code>. The longer syntax to achieve the same result would be <code>y=y+1</code>. After the next code fragment, the value of the variable <code>myScore</code> is also equal to six:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span> <span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-mi">5</span><span class="tok-o">;</span>
<span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-n">myScore</span><span class="tok-o">+</span><span class="tok-mi">1</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use multiplication, division and subtraction the same way. Look at the following piece of code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span> <span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-mi">10</span><span class="tok-o">;</span>

<span class="tok-n">myScore</span><span class="tok-o">--;</span>
<span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-n">myScore</span><span class="tok-o">*</span><span class="tok-mi">2</span><span class="tok-o">;</span>
<span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-n">myScore</span><span class="tok-o">/</span><span class="tok-mi">3</span><span class="tok-o">;</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;My score is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">myScore</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>What do you think this code prints? IntelliJ IDEA has a useful tool called Groovy Console (it&#8217;s under the Tools menu). It allows you to test any code snippet (like the one above) without even creating a class or methods. If you&#8217;ll copy the above code fragment into Groovy Console and hit the green button play, you see that the value of the variable <code>myScore</code> is 6.</p>
</div>
<div id="FIG3-3" class="imageblock">
<div class="content">
<img src="./images/fig_3_03.png" alt="fig 3 03">
</div>
<div class="title">Figure 26. Running the code fragment in Groovy Console</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">To</span> <span class="tok-n">see</span> <span class="tok-n">the</span> <span class="tok-n">result</span> <span class="tok-n">of</span> <span class="tok-n">the</span> <span class="tok-n">score</span> <span class="tok-n">calculations</span><span class="tok-o">,</span> <span class="tok-n">just</span>  <span class="tok-n">click</span> <span class="tok-n">on</span> <span class="tok-n">the</span> <span class="tok-n">console</span> <span class="tok-n">tab</span> <span class="tok-n">at</span> <span class="tok-n">the</span> <span class="tok-n">bottom</span> <span class="tok-n">of</span> <span class="tok-n">the</span> <span class="tok-nl">screen:</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>My score is 6</code></p>
</div>
<div class="paragraph">
<p>In this example the argument of the method <code>println</code> was constructed from two pieces – the text “My score is ” and the value of the variable <code>myScore</code>. Putting two or more strings together is called <em>concatenation</em>. Even though <code>myScore</code> is a number, Java is smart enough to convert this variable into a <code>String</code> and then attach it to the text "My Score is ".</p>
</div>
<div class="paragraph">
<p>Look at some other ways of changing the values of the variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-n">myScore</span><span class="tok-o">*</span><span class="tok-mi">2</span><span class="tok-o">;</span> <span class="tok-c1">// it&#39;s the same as `myScore*=2;</span>
<span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-n">myScore</span><span class="tok-o">+</span><span class="tok-mi">2</span><span class="tok-o">;</span> <span class="tok-c1">// it&#39;s the same as `myScore+=2;</span>
<span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-n">myScore</span><span class="tok-o">-</span><span class="tok-mi">2</span><span class="tok-o">;</span> <span class="tok-c1">// it&#39;s the same as `myScore-=2;</span>
<span class="tok-n">myScore</span><span class="tok-o">=</span><span class="tok-n">myScore</span><span class="tok-o">/</span><span class="tok-mi">2</span><span class="tok-o">;</span> <span class="tok-c1">// it&#39;s the same as `myScore/=2;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There are eight primitive data types in Java, and you have to decide which ones to use depending on the type and size of data you are planning to store in your variables. These are Java primitives:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Four data types for storing integer values – <code>byte</code>, <code>short</code>, <code>int</code>, and <code>long</code>.</p>
</li>
<li>
<p>Two data types for values with a decimal point – <code>float</code> and <code>double</code>.</p>
</li>
<li>
<p>One data type for storing a single character values – <code>char</code>.</p>
</li>
<li>
<p>One <em>logical</em> data type <code>boolean</code> that allows only two  values:  <code>true</code> or <code>false</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can assign an initial value to a variable during its declaration, and this is called <em>variable initialization</em>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">char</span> <span class="tok-n">grade</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;A&#39;</span><span class="tok-o">;</span>
<span class="tok-kt">int</span> <span class="tok-n">chairs</span> <span class="tok-o">=</span> <span class="tok-mi">12</span><span class="tok-o">;</span>
<span class="tok-kt">boolean</span> <span class="tok-n">playSound</span> <span class="tok-o">=</span> <span class="tok-kc">false</span><span class="tok-o">;</span>
<span class="tok-kt">double</span> <span class="tok-n">nationalIncome</span> <span class="tok-o">=</span> <span class="tok-mf">23863494965745.78</span><span class="tok-o">;</span>
<span class="tok-kt">float</span> <span class="tok-n">gamePrice</span> <span class="tok-o">=</span> <span class="tok-mf">12.50f</span><span class="tok-o">;</span>
<span class="tok-kt">long</span> <span class="tok-n">totalCars</span> <span class="tok-o">=</span><span class="tok-mi">4637283648392</span><span class="tok-n">l</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the last two lines the values have letters at the end. The <code>f</code> is for <code>float</code> and <code>l</code> means long.</p>
</div>
<div class="paragraph">
<p>If you declare, but won’t initialize primitive variables, Java will do it for you by assigning zero to each numeric variable, <code>false</code> to <code>boolean</code> variables, and a special code ‘\u0000’ to variables of type <code>char</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_classes_as_data_types">3.2.2. Classes as Data Types</h4>
<div class="paragraph">
<p>Not all variables have primitive data types. Each primitive data type has a corresponding <em>wrapper</em> class, for example <code>Integer</code>, <code>Double</code>, <code>Boolean</code>, etc. These classes also can store the values of the corresponding primitive type, but also have useful methods to convert data from one type to another.</p>
</div>
<div class="paragraph">
<p>In some cases there is no primitive type that suits your needs. For example, there is no primitive type for storing long texts. While the <code>char</code> data type is used to store only one character, Java also has a class <code>String</code> for working with a longer text, for example:</p>
</div>
<div class="paragraph">
<p><code>String lastName="Smith";</code></p>
</div>
<div class="paragraph">
<p>If you declare your own class, consider it a new data type. You can start declaring variables of this type, for example, you can declare the variable named <code>myFirstGame</code>  of type <code>VideoGame</code>:</p>
</div>
<div class="paragraph">
<p><code>VideoGame myFirstGame</code></p>
</div>
<div class="paragraph">
<p>Java programmers have agreed to name variables starting  with small letters. To make the variable name more meaningful, it can consist of several words, and each word starts with the capital letter as in <code>myFirstGame</code>. You&#8217;re also allowed to start variable names with the dollar sign like <code>$myMoney</code> or underscore: <code>_myBestFriend</code>.   Variable names cannot contain spaces.</p>
</div>
<div class="paragraph">
<p>Java also has a special keyword <code>final</code>, and if it’s used in a declaration of a variable, it means that you can assign a value to this variable only once, and this value cannot be changed afterwards. In Java we usually name final variables using capital letters:</p>
</div>
<div class="paragraph">
<p><code>final String STATE_CAPITAL="Washington";</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_how_much_memory_is_needed">3.2.3. How Much Memory is Needed</h4>
<div class="paragraph">
<p>Variables are stored in a computer&#8217;s memory and occupy more or less space depending on the data type. We measure memory in bits, bytes, kilobytes (1024 bytes), megabytes (1024 kilobytes or Kb), gigabytes (1024 Mb) and so on.  A bit is the smallest piece of data that can be stored in memory. It can hold either 1 or 0. A byte consists of eight bits.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>char</code> variable occupies two bytes in memory.</p>
</li>
<li>
<p>An <code>int</code> and a <code>float</code> take four bytes of memory each.</p>
</li>
<li>
<p>Variables of <code>long</code> and <code>double</code> types use eight bytes each.</p>
</li>
<li>
<p>Only one bit is required to store the value of <code>boolean</code> variable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Numeric data types that take more bytes can store larger numbers.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creation_of_a_pet">3.3. Creation of a Pet</h3>
<div class="paragraph">
<p>Let’s design and create a class <code>Pet</code>. First we need to decide what actions our pet will be able to do. How about eat, sleep, and speak? We’ll program these actions in the methods of the class <code>Pet</code>. We’ll also give our pet the following  attributes: age, height, weight, and color.</p>
</div>
<div class="paragraph">
<p>It&#8217;s time for hands-on work. Start IDEA IDE and create a new project as explained in Chapter 2. This time name it <code>MyPet</code> instead of <code>Hello</code>. Click on the <em>src</em> folder in IDEA and create a Java class called <code>Pet</code> using the menu File | New | Java Class.</p>
</div>
<div class="paragraph">
<p>Your screen should look similar to this one:</p>
</div>
<div id="FIG3-4" class="imageblock">
<div class="content">
<img src="./images/fig_3_04.png" alt="fig 3 04">
</div>
<div class="title">Figure 27. MyPet Project</div>
</div>
<div class="paragraph">
<p>Now we are ready to declare attributes and methods in the class <code>Pet</code>.  Java classes and methods enclose their bodies in curly braces.</p>
</div>
<div class="paragraph">
<p>To declare variables for class attributes we should pick data types for them. I suggest an <code>int</code> type for the age, <code>float</code> for  weight and height, and <code>String</code> for the pet’s color.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Pet</span> <span class="tok-o">{</span>

    <span class="tok-kt">int</span> <span class="tok-n">age</span><span class="tok-o">;</span>
    <span class="tok-kt">float</span> <span class="tok-n">weight</span><span class="tok-o">;</span>
    <span class="tok-kt">float</span> <span class="tok-n">height</span><span class="tok-o">;</span>
    <span class="tok-n">String</span> <span class="tok-n">color</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The next step is to add some methods to this class. Before declaring a method you should decide if it should take any arguments and should return a value. This is what I suggest:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The method <code>sleep</code> will just print a message <em>Good night, see you tomorrow</em> – it does not need any arguments and will not return any value.</p>
</li>
<li>
<p>The same is true for the method <code>eat</code>.It will print the message <em>I’m so hungry, let me have a snack like nachos!</em>.</p>
</li>
<li>
<p>The method <code>talk</code> will not be printing any messages, but will prepare a message based on the word or a phrase passed to this method as an argument. This method will build a phrase using the argument and will return it back to the calling program.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The new version of the class <code>Pet</code> will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Pet</span> <span class="tok-o">{</span>

    <span class="tok-kt">int</span> <span class="tok-n">age</span><span class="tok-o">;</span>
    <span class="tok-kt">float</span> <span class="tok-n">weight</span><span class="tok-o">;</span>
    <span class="tok-kt">float</span> <span class="tok-n">height</span><span class="tok-o">;</span>
    <span class="tok-n">String</span> <span class="tok-n">color</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">sleep</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
                <span class="tok-s">&quot;Good night, see you tomorrow!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">eat</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
         <span class="tok-s">&quot;I’m so hungry, let me have a snack like nachos!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">talk</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">aWord</span><span class="tok-o">){</span>
        <span class="tok-n">String</span> <span class="tok-n">petResponse</span> <span class="tok-o">=</span> <span class="tok-s">&quot;OK!! OK!! &quot;</span> <span class="tok-o">+</span><span class="tok-n">aWord</span><span class="tok-o">;</span>
        <span class="tok-k">return</span> <span class="tok-n">petResponse</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class represents these friendly little monsters from the "real world":</p>
</div>
<div id="FIG3-5" class="imageblock">
<div class="content">
<img src="./images/fig_3_05.png" alt="fig 3 05">
</div>
<div class="title">Figure 28. Little Monster</div>
</div>
<div class="paragraph">
<p>Let’s talk now about the signatures of each method in detail starting with the method <code>sleep</code>:</p>
</div>
<div class="paragraph">
<p><code>public void sleep()</code></p>
</div>
<div class="paragraph">
<p>This method signature tells us that <code>sleep</code> can be called from any other Java class ( because it&#8217;s <code>public</code>). This method does not return any data (the keyword <code>void</code>).  The empty parentheses mean that this method does not take any arguments - it does not need any data from the outside world to print the same text.</p>
</div>
<div class="paragraph">
<p>The signature of the method <code>eat</code> is similar to <code>sleep</code>.</p>
</div>
<div class="paragraph">
<p>The signature of the method <code>talk</code> looks like this:</p>
</div>
<div class="paragraph">
<p><code>public String talk(String aWord)</code></p>
</div>
<div class="paragraph">
<p>This method can also be called from any other Java class, but has to return some text, which is prescribed by the keyword <code>String</code> in front of the method name. Besides, it expects some text data from outside, hence the argument <code>String aWord</code>.</p>
</div>
<div id="FIG3-6" class="imageblock">
<div class="content">
<img src="./images/fig_3_06.png" alt="fig 3 06" width="400" height="550">
</div>
<div class="title">Figure 29. Little Monster eats</div>
</div>
<div class="paragraph">
<p>How do you decide if a method should or should not return a value? If a method performs some data manipulations and has to give the result of these  manipulations back to the  calling class, it has to return a value.  You may say that the class <code>Pet</code> does not have any calling class! That’s correct, so let’s create one called <code>PetMaster</code>. We&#8217;ll create it in the same IDEA project MyPet.</p>
</div>
<div class="paragraph">
<p>This class will need a method <code>main</code> to become a runnable program (the class <code>Pet</code> didn&#8217;t have one). Remember from Chapter 2, typing <em>psvm</em> followed by the Tab key will quickly create the method <code>main</code>. We&#8217;ll place the code communicating with the class <code>Pet</code> inside the method <code>main</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Do not forget to press <em>Ctrl-S</em> (<em>CMD-S</em> on Mac) to save and compile this class!
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PetMaster</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">String</span> <span class="tok-n">petReaction</span><span class="tok-o">;</span>      <b class="conum">(1)</b>

        <span class="tok-n">Pet</span> <span class="tok-n">myPet</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Pet</span><span class="tok-o">();</span>   <b class="conum">(2)</b>

        <span class="tok-n">myPet</span><span class="tok-o">.</span><span class="tok-na">eat</span><span class="tok-o">();</span>             <b class="conum">(3)</b>

        <span class="tok-n">petReaction</span> <span class="tok-o">=</span> <span class="tok-n">myPet</span><span class="tok-o">.</span><span class="tok-na">talk</span><span class="tok-o">(</span><span class="tok-s">&quot;Tweet!! Tweet!!&quot;</span><span class="tok-o">);</span> <b class="conum">(4)</b>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">petReaction</span><span class="tok-o">);</span>  <b class="conum">(5)</b>

        <span class="tok-n">myPet</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">();</span>        <b class="conum">(6)</b>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The variable <code>petReaction</code> will store the value returned by the method <code>say</code>.</p>
</li>
<li>
<p>This is how to create an instance of the object <code>Pet</code> using the Java operator <code>new</code>. This line declares a variable of type <code>Pet</code> - that’s right, you can treat any classes created by you as new Java data types.</p>
</li>
<li>
<p>Calling the method <code>eat</code> on the object <code>Pet</code>. After the instance of <code>Pet</code> was created, the variable <code>myPet</code> knows its address in memory. So you can call the method <code>eat</code> (as well as any other) on this particular instance of <code>Pet</code>.</p>
</li>
<li>
<p>If a method returns a value, specify a variable that will store returned value to the left of the equal sign. In our code it&#8217;s <code>petReaction</code> of type <code>String</code>.  Such variable should have the same type as the return value of the method.</p>
</li>
<li>
<p>The value of the variable <code>petReaction</code> is passed as an argument to the method <code>prinln</code> for output.</p>
</li>
<li>
<p>Calling the method <code>sleep</code> on the object <code>Pet</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To run the class <code>PetMaster</code> right-click on its name in the Project view in IDEA, and select the option <em>Run PetMaster.main()</em>. This program will output the following:</p>
</div>
<div class="paragraph">
<p><em>I’m so hungry,let me have a snack like nachos!
OK!! OK!! Tweet!! Tweet!!
Good night, see you tomorrow!</em></p>
</div>
<div id="FIG3-7" class="imageblock">
<div class="content">
<img src="./images/fig_3_07.png" alt="fig 3 07" width="400" height="550">
</div>
<div class="title">Figure 30. Tweet, Tweet!</div>
</div>
<div class="paragraph">
<p>At this point the project MyPet consists of two Java classes: <code>Pet</code> and <code>PetMaster</code>. The role of the class <code>Pet</code> is to represent attributes and behavior of a pet, while the class <code>PetMaster</code> starts the program, <em>instantiates</em> the class <code>Pet</code> and calls its methods.  Your typical projects will consist of multiple Java classes, but only one of them will have have the <code>main</code> method, which is the entry point of the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_inheritance_a_fish_can_be_a_pet_too">3.4. Inheritance – a Fish Can Be a Pet Too</h3>
<div class="paragraph">
<p>In the real life, every person inherits some features from his or her parents. Similarly, in the Java world you can also create a new class, based on the existing one. The class <code>Pet</code> will help us learn yet another important feature of Java called <em>inheritance</em>.</p>
</div>
<div class="paragraph">
<p>The class <code>Pet</code> can include behaviors and attributes that are shared by many pets – all of them eat and sleep, some of them make sounds, their skin has different colors, and so on. On the other hand, not all pets are the same. Dogs bark, fish swim and don&#8217;t make sounds, and parakeets speak better than dogs. But all of them eat and sleep. That’s why it’s easier to create a class <code>Fish</code> that will <em>inherit</em> some common behavior and attributes from the class <code>Pet</code>, rather than creating <code>Dog</code>, <code>Parrot</code> or <code>Fish</code> from scratch every time.</p>
</div>
<div class="paragraph">
<p>Java has a special keyword <code>extends</code> that will do the trick. Create a new class <code>Fish</code> in IDEA and then add to its declaration <code>extends Pet</code> so it&#8217;ll look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-kd">extends</span> <span class="tok-n">Pet</span><span class="tok-o">{</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class <code>Fish</code> is a <em>subclass</em> of the class <code>Pet</code>. Accordingly, the class <code>Pet</code> is a <em>superclass</em> of the class <code>Fish</code>. In other words, you use the class <code>Pet</code> as a template for creating a class <code>Fish</code>. The keyword <code>extends</code> defines relationship between classes. Since our <code>Fish</code> extends a <code>Pet</code>, we can say that a fish is a pet. But we can&#8217;t say that a pet is a fish.</p>
</div>
<div class="paragraph">
<p>Even if you will leave the class <code>Fish</code> empty as it is now, you can still use every method and attribute inherited from  the class <code>Pet</code>, because a fish is a pet! Take a look, we&#8217;re creating an instance of the object <code>Fish</code> and are calling its method <code>sleep</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Fish</span> <span class="tok-n">myLittleFish</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Fish</span><span class="tok-o">();</span>
<span class="tok-n">myLittleFish</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Even though we have not declared any methods in the class <code>Fish</code> yet, we call (invoke) the method <code>sleep</code>, which was declared in its superclass <code>Pet</code>! In Java all classes are automatically inherited from the class <code>Object</code>. Even though we&#8217;ve declared the class <code>Pet</code> without using the keyword <code>extends</code> it still extends the class <code>Object</code>. With the keyword <code>extends</code> you can build class hierarchies. For example, many animal classes can extend the class <code>Pet</code>.</p>
</div>
<div id="FIG3-8" class="imageblock">
<div class="content">
<img src="./images/fig_3_08.png" alt="fig 3 08" width="400" height="550">
</div>
<div class="title">Figure 31. Class Hierarchy</div>
</div>
<div class="paragraph">
<p>Let’s not forget, however, that we’ve  created the class <code>Fish</code> as a subclass of <code>Pet</code>, because we wanted to add some additional features that only fish have and reuse some of  the code that we wrote for a <em>general pet</em>.For instance, not all pets can dive, but fish certainly can. Let’s add a new method <code>dive</code> to the class <code>Fish</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-kd">extends</span> <span class="tok-n">Pet</span> <span class="tok-o">{</span>

   <span class="tok-kt">int</span> <span class="tok-n">currentDepth</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span>

   <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">){</span>

    <span class="tok-n">currentDepth</span><span class="tok-o">=</span><span class="tok-n">currentDepth</span> <span class="tok-o">+</span> <span class="tok-n">howDeep</span><span class="tok-o">;</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Diving for &quot;</span> <span class="tok-o">+</span>
                     <span class="tok-n">howDeep</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;I&#39;m at &quot;</span> <span class="tok-o">+</span> <span class="tok-n">currentDepth</span> <span class="tok-o">+</span>
                       <span class="tok-s">&quot; feet below sea level&quot;</span><span class="tok-o">);</span>

    <span class="tok-k">return</span> <span class="tok-n">currentDepth</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>dive</code> has an <em>argument (a.k.a. parameter)</em> <code>howDeep</code> that tells the fish how deep it should go. We’ve also declared a class variable <code>currentDepth</code> that will store and update the current depth every time you call the method <code>dive</code>. This method returns the current value of the variable <code>currenDepth</code> to the calling class. The plus sign in the <code>pintln</code> lines are not about addition - we&#8217;re building strings of characters by concatenating their pieces.</p>
</div>
<div class="paragraph">
<p>Using IDEA, create another class named <code>FishMaster</code> that will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FishMaster</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-n">Fish</span> <span class="tok-n">myFish</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Fish</span><span class="tok-o">();</span>

    <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">dive</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">);</span>
    <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">dive</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">);</span>

    <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>main</code> instantiates the object <code>Fish</code> and calls its method <code>dive</code> twice with different arguments - two and three. After that, it calls the method <code>sleep</code>. When you run the program <code>FishMaster</code>, it will print the following messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="text">Diving for 2 feet
I&#39;m at 2 feet below sea level
Diving for 3 feet
I&#39;m at 5 feet below sea level
Good night, see you tomorrow</code></pre>
</div>
</div>
<div class="paragraph">
<p>Have you noticed that beside the methods defined in the class <code>Fish</code>, the <code>FishMaster</code> also calls method <code>sleep</code>  from its superclass <code>Pet</code>? This is what inheritance is all about – you do not have to copy and paste code from the class <code>Pet</code> – just use the keyword <code>extends</code>, and the class <code>Fish</code> can use <code>Pet</code>’s methods!</p>
</div>
<div id="FIG3-9" class="imageblock">
<div class="content">
<img src="./images/fig_3_09.png" alt="fig 3 09" width="400" height="550">
</div>
<div class="title">Figure 32. What&#8217;s the current depth?</div>
</div>
<div class="paragraph">
<p>One more thing, even though the method <code>dive</code> returns the value of  <code>currentDepth</code>, our <code>FishMaster</code> does not use it. That’s fine, because our class`FishMaster` does not use the returned value, but there may be some other classes that will also use the class <code>Fish</code>, and they may find knowing the current depth  useful. For example, think of a class <code>FishTrafficDispatcher</code> that has to know positions of other fish under the sea before giving permissions to dive to avoid traffic accidents.</p>
</div>
</div>
<div class="sect2">
<h3 id="_method_overriding">3.5. Method Overriding</h3>
<div class="paragraph">
<p>As you know, fish do not speak, but our class <code>Fish</code> has been inherited from the class <code>Pet</code> that has the method <code>talk</code>. This means that nothing stops you from writing <code>myFish.talk();</code>.</p>
</div>
<div class="paragraph">
<p>Do you really want our fish to talk? If you do not want this to happen, the class <code>Fish</code> has to <em>override</em> the <code>Pet</code>’s typical behavior - the method <code>talk</code>. If you declare  a method with exactly the same signature in a subclass as in its superclass, the subclass' method will be used instead of  the method of the superclass. Let’s add the following method <code>talk</code> to the class <code>Fish</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">talk</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">something</span><span class="tok-o">){</span>
  <span class="tok-k">return</span> <span class="tok-s">&quot;Don&#39;t you know that fish do not talk?&quot;</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now add the following three lines to the method <code>main</code> of the class <code>FishMaster</code>:</p>
</div>
<div class="paragraph">
<p><code>String fishReaction;</code>
<code>fishReaction = myFish.talk("Hello");</code>
<code>System.out.println(fishReaction);</code></p>
</div>
<div class="paragraph">
<p>Run the program and it’ll print</p>
</div>
<div class="paragraph">
<p><code>Don&#8217;t you know that fish do not talk?</code></p>
</div>
<div class="paragraph">
<p>This proves that <code>Pet</code>’s method <code>talk</code> has been <em>overridden</em>, or in other words, suppressed.</p>
</div>
<div class="paragraph">
<p>Wow!  We’ve learned a lot in this chapter – let’s just take a break.</p>
</div>
</div>
<div class="sect2">
<h3 id="_challenge_yourself">3.6. Challenge Yourself</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We&#8217;ve  used the variable of type <code>int</code> to to store the price in the class <code>VideoGame</code>. Is there a more suitable primitive data type for storing prices?</p>
</li>
<li>
<p>Create a new project in IDEA named chapter3 and a new Java class <code>Car</code> with the following methods:</p>
<div class="paragraph">
<p><code>public void start()</code></p>
</div>
<div class="paragraph">
<p><code>public void stop()</code></p>
</div>
<div class="paragraph">
<p><code>public int drive(int howlong)</code></p>
</div>
<div class="paragraph">
<p>The method <code>drive</code> has one argument - the driving time. The method has to return the total distance driven by the car for the specified time. Use the following formula to calculate the distance: <code>distance = howlong*60;</code>. Use the statement <code>return distance</code> as the last line in the method <code>drive</code>.</p>
</div>
</li>
<li>
<p>Run this program by using the menu Run in IDEA.</p>
</li>
<li>
<p>Write another class <code>CarOwner</code> with the method <code>main</code> that creates an instance of the object <code>Car</code> and call its methods. The result of each method call has to be printed using <code>System.out.println()</code>.</p>
</li>
<li>
<p>Create a subclass of <code>Car</code> named <code>JamesBondCar</code> and override the method <code>drive</code> there. Now use the following formula to calculate the distance: <code>distance = howlong*180;</code></p>
<div class="paragraph">
<p>Be creative, print some funny messages from the method <code>drive</code>!</p>
</div>
</li>
<li>
<p>Create an instance of the class <code>JamesBondCar</code> in the <code>main</code> method of <code>CarOwner</code>. Re-run the program <code>CarOwner</code> to see that it calls the overridden method <code>drive</code>.
:toc-placement!:
:imagesdir: .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_building_blocks">4. Java Building Blocks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Classes are the major constructs in Java, but you need to know smaller elements that help you program the behavior and flow of the program. You need to know how commented your program so other people can understand your intentions (programmers often work in teams and help each other). You need to know how to write code that will invoke one method or the other depending on certain conditions. In this chapter I&#8217;ll show you some Java elements that you have to know and apply in pretty much any project.</p>
</div>
<div class="sect2">
<h3 id="_program_comments">4.1. Program Comments</h3>
<div class="paragraph">
<p>You can add any text comments to your program to explain what a particular line, method or class is for. First of all, someone else may read your program so comments would help in understanding your intentions. Second, even the  author of the code can&#8217;t remember every program he or she wrote. Besides, if a professional programmer decides to change the employer, if would be nice to leave well-commented code behind.</p>
</div>
<div class="paragraph">
<p>There are three different types of comments - single-line comments, block comments, and a javadoc comments. Here&#8217;s what they are for:</p>
</div>
<div class="paragraph">
<p>If your comment fits in one line, start it with two slashes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-c1">// This method calculates the distance between A and B.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to write multi-line comments, instead of starting each line with two slashes, just surround the entire text with these symbols: <code>/*</code> and <code>*/</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-cm">/* Now we&#39;ll handle the current</span>
<span class="tok-cm">   position of the Fish.</span>
<span class="tok-cm">*/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Java comes with a special program <code>javadoc</code> that can extract all comments from your programs into a separate help file that can be displayed by any Web browser. This file can be used as a <em>technical documentation</em> for your programs. Such comments are enclosed in  symbols <code>/**</code> and <code>*/</code>. Note the two asterisks after the first slash. Only the most important comments like the description of a class or a method should be placed between these symbols.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-cm">/** This method calculates the discount that depends</span>
<span class="tok-cm">on the price paid. If the price is more than $100,</span>
<span class="tok-cm">give the user 20% off, otherwise only 10%.</span>
<span class="tok-cm">*/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The javadoc tool can process your code, extract all comments that start with <code>/**</code> and create program documentation that can be published online or kept locally on the company server. We are not going to use javadoc in this book, but if you&#8217;re interested in learning more about this tool, read Oracle&#8217;s tutorial <a href="http://goo.gl/Bwm6Cb">How to Write Doc Comments for the Javadoc Tool</a>.</p>
</div>
<div class="paragraph">
<p>From now on, I’ll be adding comments to code samples to  give you a better idea how and where to use them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_making_decisions">4.2. Making Decisions</h3>
<div class="paragraph">
<p>We always make decisions in our life: <em>If she is going to tell me  this</em> – <em>I’m going to answer that, otherwise I’ll do something else</em>. You can write a Java program that will "make decisions" with the help of <code>if</code> and <code>switch</code> statements. You can also build more complex either-or conditions using logical operators.</p>
</div>
<div class="sect3">
<h4 id="_the_if_statement">4.2.1. The if Statement</h4>
<div class="paragraph">
<p>Java has an <code>if</code> statement that checks if a particular expression is <code>true</code> or <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Based on the result of evaluating this expression, your program execution forks, and only the relevant portion of the code will be invoked.</p>
</div>
<div class="paragraph">
<p>For example, if the expression <em>Do I want to go to grandma&#8217;s?</em> is <code>true</code>,  turn to the left, otherwise turn to the right.</p>
</div>
<div id="FIG4-1" class="imageblock">
<div class="content">
<img src="./images/fig_4_01.png" alt="fig 4 01">
</div>
<div class="title">Figure 33. The fork</div>
</div>
<div class="paragraph">
<p>Take a look at the following code sample.  If an expression inside the parentheses is <code>true</code>, JVM will execute the code between the first pair of curly braces, otherwise it goes to the code after the <code>else</code> statement. In other words, if the value of the variable  <code>totalSpent</code> is more than a hundred, give a 20% discount, otherwise take only 10% off.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-c1">// Assume that the method getTotalAmount()</span>
<span class="tok-c1">// adds up the prices from your shopping cart</span>

<span class="tok-kt">int</span> <span class="tok-n">totalSpent</span> <span class="tok-o">=</span> <span class="tok-n">getTotalAmount</span><span class="tok-o">();</span>
<span class="tok-kt">float</span> <span class="tok-n">discountedPrice</span><span class="tok-o">;</span>

<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">totalSpent</span> <span class="tok-o">&gt;</span> <span class="tok-mi">100</span><span class="tok-o">){</span>
  <span class="tok-n">discountedPrice</span><span class="tok-o">=</span><span class="tok-n">totalSpent</span><span class="tok-o">*</span><span class="tok-mf">0.8</span><span class="tok-o">;</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;You’ll get a 20% discount&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span>
<span class="tok-k">else</span><span class="tok-o">{</span>
  <span class="tok-n">discountedPrice</span><span class="tok-o">=</span><span class="tok-n">totalSpent</span><span class="tok-o">*</span><span class="tok-mf">0.9</span><span class="tok-o">;</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;You’ll get a 10% discount&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span>

<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Your discounted price is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">discountedPrice</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Let’s modify the method <code>dive()</code> in the class <code>Fish</code> from Chapter 3 to make sure that our fish is not allowed to dive below 100 feet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-kd">extends</span> <span class="tok-n">Pet</span> <span class="tok-o">{</span>

  <span class="tok-kt">int</span> <span class="tok-n">currentDepth</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">){</span>
    <span class="tok-n">currentDepth</span><span class="tok-o">=</span><span class="tok-n">currentDepth</span> <span class="tok-o">+</span> <span class="tok-n">howDeep</span><span class="tok-o">;</span>
      <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">currentDepth</span> <span class="tok-o">&gt;</span> <span class="tok-mi">100</span><span class="tok-o">){</span>
          <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;I am a little fish and &quot;</span>
                      <span class="tok-o">+</span> <span class="tok-s">&quot; can&#39;t dive below 100 feet&quot;</span><span class="tok-o">);</span>
          <span class="tok-n">currentDepth</span><span class="tok-o">=</span><span class="tok-n">currentDepth</span> <span class="tok-o">-</span> <span class="tok-n">howDeep</span><span class="tok-o">;</span>
      <span class="tok-o">}</span><span class="tok-k">else</span><span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Diving for &quot;</span> <span class="tok-o">+</span> <span class="tok-n">howDeep</span> <span class="tok-o">+</span>
                                             <span class="tok-s">&quot; feet&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;I&#39;m at &quot;</span> <span class="tok-o">+</span> <span class="tok-n">currentDepth</span> <span class="tok-o">+</span>
                        <span class="tok-s">&quot; feet below the sea level&quot;</span><span class="tok-o">);</span>
      <span class="tok-o">}</span>
      <span class="tok-k">return</span> <span class="tok-n">currentDepth</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">talk</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">something</span><span class="tok-o">){</span>
       <span class="tok-k">return</span> <span class="tok-s">&quot;Don&#39;t you know that fish do not talk?&quot;</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now just make a small change in the class <code>FishMaster</code> – let it  try  to make  our fish go deep under the sea:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FishMaster</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-n">Fish</span> <span class="tok-n">myFish</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Fish</span><span class="tok-o">();</span>

  <span class="tok-c1">// Try to have the fish go below 100 feet</span>

   <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">dive</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">);</span>  <span class="tok-c1">// go 2 feet down</span>
   <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">dive</span><span class="tok-o">(</span><span class="tok-mi">97</span><span class="tok-o">);</span> <span class="tok-c1">// go another 97 feet down</span>
   <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">dive</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">);</span>  <span class="tok-c1">// go 3 more feet down</span>

   <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run this program and it’ll print the following on the system console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">Diving for 2 feet.
I&#39;m at 2 feet below the sea level.
Diving for 97 feet.
I&#39;m at 99 feet below the sea level.
I am a little fish and can&#39;t dive below 100 feet.
Good night, see you tomorrow.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_logical_operators">4.2.2. Logical Operators</h4>
<div class="paragraph">
<p>Sometimes, to make a decision you may need to check more than just one conditional expression, for example if the name of the state is Texas or California, add the state sales tax to the price of every item in the store. This is an example of the <em>logical or</em> – either Texas or California.</p>
</div>
<div class="paragraph">
<p>In Java the sign for a logical <code>or</code> is one or two vertical bars. It works like this – if any of the two conditions is <code>true</code>, the result of the entire expression is also <code>true</code>.</p>
</div>
<div class="paragraph">
<p>In the following examples I use a variable of type <code>String</code>, which has a method <code>equals()</code> that compares the values of two strings. I use it to see whether the value of the variable <code>state</code> is <em>"Texas"</em> or  <em>"California"</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">state</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;Texas&quot;</span><span class="tok-o">)</span> <span class="tok-o">|</span> <span class="tok-n">state</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;California&quot;</span><span class="tok-o">))</span>
<span class="tok-o">{</span>
   <span class="tok-c1">// do something</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also rewrite this <code>if</code> statement using two vertical bars:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">state</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;Texas&quot;</span><span class="tok-o">)</span> <span class="tok-o">||</span> <span class="tok-n">state</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;California&quot;</span><span class="tok-o">))</span>
<span class="tok-o">{</span>
   <span class="tok-c1">// do something</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The difference between these two examples is that if you use two bars, and the first expression is <code>true</code>, the second expression won’t even be  checked. If you place just a single bar, JVM will evaluate both expressions.</p>
</div>
<div class="paragraph">
<p>The <em>logical and</em> is represented by one or two ampersands (<code>&amp;&amp;</code>) and each expression in the parentheses must be <code>true</code> to make the entire expression <code>true</code>. For example, charge the sales tax only if the state is New York and the price is more than $110. Both conditions must be <code>true</code> <em>at the same time</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">state</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;New York&quot;</span><span class="tok-o">)</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">price</span> <span class="tok-o">&gt;</span><span class="tok-mi">110</span><span class="tok-o">)</span>
<span class="tok-o">{</span>
   <span class="tok-c1">// do something</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">state</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;New York&quot;</span><span class="tok-o">)</span> <span class="tok-o">&amp;</span> <span class="tok-n">price</span> <span class="tok-o">&gt;</span><span class="tok-mi">110</span><span class="tok-o">)</span>
<span class="tok-o">{</span>
   <span class="tok-c1">// do something</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use double ampersand and the first expression is <code>false</code>, the second one won’t even be checked, because the entire expression will be <code>false</code> anyway.  With the single ampersand both expressions will be evaluated.</p>
</div>
<div class="paragraph">
<p>The <em>logical not</em> is also known as <code>negation</code> and is  represented by the exclamation point. The logical <em>not</em>  changes  expression to the opposite meaning. For example, if you want to perform some actions only if the state is not New York, use this syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(!</span><span class="tok-n">state</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;New York&quot;</span><span class="tok-o">))</span> <span class="tok-o">{</span>
   <span class="tok-c1">// do something</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following two expressions will produce the same result, because <em>more than 50</em> and <em>not less than or equal to 50</em> have the same meaning:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">price</span> <span class="tok-o">&gt;</span> <span class="tok-mi">50</span><span class="tok-o">)</span> <span class="tok-o">{</span>
   <span class="tok-c1">// do something</span>
<span class="tok-o">}</span>

<span class="tok-k">if</span> <span class="tok-o">(!(</span><span class="tok-n">price</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">50</span><span class="tok-o">))</span> <span class="tok-o">{</span>
   <span class="tok-c1">// do something</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the second example the <em>logical not</em> is applied to the expression in parentheses.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conditional_operator">4.2.3. Conditional operator</h4>
<div class="paragraph">
<p>There is another type of an if-statement called <em>conditional operator</em>, which allows you to assign a value to a variable based on the expression that ends with a question mark. It&#8217;s like you&#8217;re asking, "Is this true?". If such an  expression is <code>true</code>, the value after the question mark is used, otherwise the value after the colon is assigned to the variable on the left:</p>
</div>
<div class="paragraph">
<p><code>discount = price &gt; 50? 10:5;</code></p>
</div>
<div class="paragraph">
<p>If the price is greater than fifty, the variable <code>discount</code> will get a value of 10, otherwise <code>discount</code> will have a value of 5. It’s just a shorter replacement of the following if statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">price</span> <span class="tok-o">&gt;</span> <span class="tok-mi">50</span><span class="tok-o">){</span>
   <span class="tok-n">discount</span> <span class="tok-o">=</span> <span class="tok-mi">10</span><span class="tok-o">;</span>
<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
   <span class="tok-n">discount</span> <span class="tok-o">=</span> <span class="tok-mi">5</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_code_else_if_code">4.2.4. Using <code>else if</code></h4>
<div class="paragraph">
<p>You are also allowed to build more complex <code>if</code> statements with several <code>else if</code> blocks. To illustrate this technique let&#8217;s create a new class called <code>ReportCard</code>. This class will have two methods: <code>main()</code> and  <code>convertGrades()</code> with one argument  - the school test result. Depending on the number, it should print your grade like A, B, C, or D.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ReportCard</span> <span class="tok-o">{</span>

  <span class="tok-n">String</span> <span class="tok-n">studentName</span><span class="tok-o">;</span>

<span class="tok-cm">/**</span>
<span class="tok-cm"> The method convertGrades has one integer argument - the result of the school test.  The method returns one letter A, B, C or D depending on the argument&#39;s value.</span>
<span class="tok-cm">*/</span>
 <span class="tok-kd">public</span> <span class="tok-kt">char</span> <span class="tok-nf">convertGrades</span><span class="tok-o">(</span> <span class="tok-kt">int</span> <span class="tok-n">testResult</span><span class="tok-o">){</span>

  <span class="tok-kt">char</span> <span class="tok-n">grade</span><span class="tok-o">;</span>

  <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">testResult</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">90</span><span class="tok-o">){</span>
    <span class="tok-n">grade</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;A&#39;</span><span class="tok-o">;</span>
  <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">testResult</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">80</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">testResult</span> <span class="tok-o">&lt;</span> <span class="tok-mi">90</span><span class="tok-o">){</span>
        <span class="tok-n">grade</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;B&#39;</span><span class="tok-o">;</span>
  <span class="tok-o">}</span><span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">testResult</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">70</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">testResult</span> <span class="tok-o">&lt;</span> <span class="tok-mi">80</span><span class="tok-o">){</span>
        <span class="tok-n">grade</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;C&#39;</span><span class="tok-o">;</span>
  <span class="tok-o">}</span><span class="tok-k">else</span> <span class="tok-o">{</span>
        <span class="tok-n">grade</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;D&#39;</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-k">return</span> <span class="tok-n">grade</span><span class="tok-o">;</span>
 <span class="tok-o">}</span>

 <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">){</span>

  <span class="tok-n">ReportCard</span> <span class="tok-n">rc</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ReportCard</span><span class="tok-o">();</span>

  <span class="tok-kt">char</span> <span class="tok-n">yourGrade</span> <span class="tok-o">=</span> <span class="tok-n">rc</span><span class="tok-o">.</span><span class="tok-na">convertGrades</span><span class="tok-o">(</span><span class="tok-mi">88</span><span class="tok-o">);</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Your first grade is &quot;</span> <span class="tok-o">+</span>
                                          <span class="tok-n">yourGrade</span><span class="tok-o">);</span>

  <span class="tok-n">yourGrade</span> <span class="tok-o">=</span> <span class="tok-n">rc</span><span class="tok-o">.</span><span class="tok-na">convertGrades</span><span class="tok-o">(</span><span class="tok-mi">79</span><span class="tok-o">);</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Your second grade is &quot;</span> <span class="tok-o">+</span>
                                          <span class="tok-n">yourGrade</span><span class="tok-o">);</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Beside using the <code>else if</code> condition, this example also shows you how to use variables of type <code>char</code>. You can also see that with the <code>&amp;&amp;</code> operator you can check if a number falls into specific range. You can not just write <em>if testResult between 80 and 89</em>, but with <em>logical and</em> you can check the condition when <code>testResult</code> is greater than or equal to 80 and less then 89 at the same time:</p>
</div>
<div class="paragraph">
<p><code>testResult &gt;= 80 &amp;&amp; testResult &lt; 89</code></p>
</div>
<div class="paragraph">
<p>Take a guess as to why we could not use the <em>logical or</em> operator here? Say the <code>testResult</code> is 100. It&#8217;s greater than 80, and the above expression would evaluate to true, because for  the || operator having one <code>true</code> is enough to make the entire expression true. But this is not what we want - we need the above expression to be true only if the value of <code>testResult</code> is between 80 and 89. The <em>logical and</em> operator does the job by ensuring that both conditions are true.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_code_switch_code_statement">4.2.5. The <code>switch</code> Statement</h4>
<div class="paragraph">
<p>The <code>switch</code> statement sometimes can be used as an alternative to <code>if</code>. The variable after the keyword <code>switch</code>  is evaluated, and program goes only to one of the <code>case</code>  statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">){</span>

 <span class="tok-n">ReportCard</span> <span class="tok-n">rc</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ReportCard</span><span class="tok-o">();</span>
 <span class="tok-n">rc</span><span class="tok-o">.</span><span class="tok-na">studentName</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Jerry Lee&quot;</span><span class="tok-o">;</span>

 <span class="tok-kt">char</span> <span class="tok-n">yourGrade</span> <span class="tok-o">=</span> <span class="tok-n">rc</span><span class="tok-o">.</span><span class="tok-na">convertGrades</span><span class="tok-o">(</span><span class="tok-mi">88</span><span class="tok-o">);</span>

  <span class="tok-k">switch</span> <span class="tok-o">(</span><span class="tok-n">yourGrade</span><span class="tok-o">){</span>

   <span class="tok-k">case</span> <span class="tok-sc">&#39;A&#39;</span><span class="tok-o">:</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Excellent Job!&quot;</span><span class="tok-o">);</span>
     <span class="tok-k">break</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-sc">&#39;B&#39;</span><span class="tok-o">:</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Good Job!&quot;</span><span class="tok-o">);</span>
     <span class="tok-k">break</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-sc">&#39;C&#39;</span><span class="tok-o">:</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Need to work more!&quot;</span><span class="tok-o">);</span>
     <span class="tok-k">break</span><span class="tok-o">;</span>
   <span class="tok-k">case</span> <span class="tok-sc">&#39;D&#39;</span><span class="tok-o">:</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Change your attitude!&quot;</span><span class="tok-o">);</span>
   <span class="tok-k">break</span><span class="tok-o">;</span>
 <span class="tok-o">}</span>
 <span class="tok-c1">// Some other program code goes here</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Say, the value of <code>yourGrade</code> is <code>B</code>. Then the above code will print "Good Job!" and will break out of the <code>switch</code> statement to continue executing the rest of the program code if any.</p>
</div>
<div class="paragraph">
<p>Do not forget to put the keyword <code>break</code> at the end of each <code>case</code> statement to make the code jump out of the <code>switch</code>. For example, if you forget to put the <code>break</code> in the <code>case 'B'</code> block, the above code would print "Good Job!" followed by "You need to work more!".</p>
</div>
<div id="FIG4-2" class="imageblock">
<div class="content">
<img src="./images/fig_4_02.png" alt="fig 4 02">
</div>
<div class="title">Figure 34. The switch statement</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_long_will_a_variables_live">4.3. How Long Will A Variables Live?</h3>
<div class="paragraph">
<p>Class <code>ReportCard</code> declares a variable <code>grade</code> inside the method <code>convertGrades()</code>. If you declare a variable inside any method, such variable is called  <em>local</em>. This means that this variable is available only for the code <em>within this method</em>. When the method is complete, this variable automatically gets removed from memory.</p>
</div>
<div class="paragraph">
<p>Programmers use the word <em>scope</em> to say how long a variable will live, for example you can say that variables declared inside a method have a local scope. If a variable is declared within the code block surrounded with curly braces (e.g. in the if statement), it has a block scope and won&#8217;t be visible outside of this block.</p>
</div>
<div class="paragraph">
<p>If a variable has to be reused by several method calls, or it has to be visible from more than one method in a class, you should declare such a variable outside of any method. In the class <code>Fish</code> from Chapter 3, the <code>currentDepth</code> is a <em>member variable</em>. The member variable <code>currentDepth</code> is  alive until the instance of the object <code>Fish</code> exists in the computer&#8217;s memory. You can call <code>currentDepth</code> <em>a instance variable</em>, because its declaration doesn&#8217;t include the keyword <code>static</code>, which we&#8217;ll discuss shortly.</p>
</div>
<div class="paragraph">
<p>Member variables can be shared and reused by all methods of the class, and we can make them visible from external classes too, if need be. For example the method <code>main</code> of the class <code>ReportCard</code> includes the statement <code>System.out.println()</code>. It uses the class variable <code>out</code> that was declared in the Java class <code>System</code>.</p>
</div>
<div class="sect3">
<h4 id="_the_keyword_code_static_code">4.3.1. The Keyword <code>static</code></h4>
<div class="paragraph">
<p>Wait a minute! Can we use a member variable <code>out</code> from the class <code>System</code> if we haven&#8217;t even created an instance of this class? Yes we can, if the class <code>System</code> declares the variable <code>out</code> with a keyword <code>static</code>.</p>
</div>
<div class="paragraph">
<p>When you start any Java program it <em>loads</em> the definition of the required classes in memory. The definition of a class can be used for creation of one or more instances of this class. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">ReportCard</span> <span class="tok-n">rc</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ReportCard</span><span class="tok-o">();</span>
<span class="tok-n">rc1</span><span class="tok-o">.</span><span class="tok-na">studentName</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Jerry Lee&quot;</span><span class="tok-o">;</span>

<span class="tok-n">ReportCard</span> <span class="tok-n">rc2</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ReportCard</span><span class="tok-o">();</span>
<span class="tok-n">rc2</span><span class="tok-o">.</span><span class="tok-na">studentName</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Sarah Smith&quot;</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example we have two instances of the class <code>ReportCard</code>, and each of them has its own value in the variable <code>studentName</code>, which is an instance variable. Now, let&#8217;s change the declaration of this variable by adding the  keyword <code>static</code>:</p>
</div>
<div class="paragraph">
<p><code>static String studentName;</code></p>
</div>
<div class="paragraph">
<p>In this case both instances of the <code>ReportCard</code> would share the same variable <code>studentName</code>, and the above code would first assign "Jerry Lee" to this variable, and then it would be replaced with "Sarah Smith". This doesn&#8217;t seem like a good idea does it?</p>
</div>
<div class="paragraph">
<p>Moreover, if the declaration of a member variable or a method starts with <code>static</code>, you do not have to create an instance of this class to use such a variable or a method. Static members of a class are used to store the values that are the same for all instances of the class.</p>
</div>
<div class="paragraph">
<p>For example, the method <code>convertGrades</code> should be declared as <code>static</code> in the class <code>ReportCard</code>, because its code does not use  member variables to store values specific to a particular instance of the class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">char</span> <span class="tok-nf">convertGrades</span><span class="tok-o">(</span> <span class="tok-kt">int</span> <span class="tok-n">testResult</span><span class="tok-o">){</span>
   <span class="tok-c1">// the code of this method goes here</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There is no need to create instances to call static methods or access static variables. Just write the name of the class followed by the dot and the name of the static member:</p>
</div>
<div class="paragraph">
<p><code>char yourGrade = ReportCard.convertGrades(88);</code></p>
</div>
<div class="paragraph">
<p>Here’s another example: Java has a class <code>Math</code> that contains several dozen mathematical methods like <code>sqrt</code>, <code>sin</code>, <code>abs</code> and others. All these methods are <code>static</code> and you do not need to create an instance of the class <code>Math</code> to invoke them, for example:</p>
</div>
<div class="paragraph">
<p><code>double squareRoot = Math.sqrt(4.0);</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_special_methods_constructors">4.4. Special Methods: Constructors</h3>
<div class="paragraph">
<p>You&#8217;ve already learned that Java uses the operator <code>new</code> to create instances of  objects in memory, for example:</p>
</div>
<div class="paragraph">
<p><code>Fish myFish = new Fish();</code></p>
</div>
<div class="paragraph">
<p>Parentheses after the word <code>Fish</code> tell us that this class has some method called <code>Fish</code>. Yes, there are special methods that are called  <em>constructors</em>, and these methods have the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Constructors are special methods that are called only once  during construction of the object in memory.</p>
</li>
<li>
<p>They must have the same name as the class itself.</p>
</li>
<li>
<p>They do not return a value, and you do not even have to  use  the keyword  <code>void</code> in the constructor’s declaration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any class can have more than one constructor. If you do not create a constructor for the class, Java automatically creates one during the compilation time - it&#8217;s so-called <em>default no-argument constructor</em>.  That’s why Java compiler has never complained about the statements  <code>new Fish()</code> or <code>new ReportCard()</code>, even though neither class <code>Fish</code> nor class <code>ReportCard</code> has any explicitly declared constructor.</p>
</div>
<div class="paragraph">
<p>In general, constructors are used to assign initial values to  member variables of the class, for example the next version of the class <code>Fish</code> has a one-argument constructor that  just assigns the argument’s value to the instance variable <code>currentDepth</code> for future use.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-kd">extends</span> <span class="tok-n">Pet</span> <span class="tok-o">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">currentDepth</span><span class="tok-o">;</span>

  <span class="tok-c1">// This is constructor</span>
  <span class="tok-n">Fish</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">startingPosition</span><span class="tok-o">){</span>
    <span class="tok-n">currentDepth</span><span class="tok-o">=</span><span class="tok-n">startingPosition</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the class <code>FishMaster</code> can create an instance of the <code>Fish</code> and assign the initial position of the fish. The next example creates an instance of the <code>Fish</code> that is “submerged”  20 feet under the sea:</p>
</div>
<div class="paragraph">
<p><code>Fish myFish = new Fish(20);</code></p>
</div>
<div class="paragraph">
<p>If a constructor with arguments has been defined in a class, you can no longer use the default no-argument constructor. If you’d like to have a constructor without arguments - write one.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_keyword_code_this_code">4.5. The Keyword <code>this</code></h3>
<div class="paragraph">
<p>The keyword <code>this</code> is useful when your code needs to refer to the  instance of the object, where this code is running. Look at the next code example, which is a slight modification of the previous one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-o">{</span>
  <span class="tok-kt">int</span> <span class="tok-n">currentDepth</span> <span class="tok-o">;</span>

  <span class="tok-n">Fish</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">currentDepth</span><span class="tok-o">){</span>
  <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">currentDepth</span> <span class="tok-o">=</span> <span class="tok-n">currentDepth</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Have you noticed that the member variable and the constructor&#8217;s argument have the same name? The keyword <code>this</code> helps to avoid name conflicts. In this code sample <code>this.currentDepth</code> refers to the object&#8217;s member variable <code>currentDepth</code>, while the <code>currentDepth</code> refers to the argument’s value. In other words, the code points at the current instance of the <code>Fish</code> object.</p>
</div>
<div id="FIG4-3" class="imageblock">
<div class="content">
<img src="./images/fig_4_03.png" alt="fig 4 03">
</div>
<div class="title">Figure 35. I&#8217;m this object</div>
</div>
<div class="paragraph">
<p>You’ll see another important example of using the keyword <code>this</code> in Chapter 6 in the section <em>How to Pass Data Between  Classes</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_arrays">4.6. Arrays</h3>
<div class="paragraph">
<p>An array is an object that holds several values of the same type - primitives or objects. Let’s say your program has to store the names of four game players. Instead of declaring four different <code>String</code> variables, you can declare one <code>String</code> <em>array</em> that has four <em>elements</em>. Arrays are marked by placing square brackets either after the variable name, or after the data type:</p>
</div>
<div class="paragraph">
<p><code>String [] players;</code></p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p><code>String players[];</code></p>
</div>
<div class="paragraph">
<p>These declarations just tell the Java compiler that you are planning to store several text strings in the array <code>players</code>.  Each element has its own index (position number) starting from zero. The next sample actually creates an instance of an array that can store four <code>String</code> elements and assigns the values to the elements of this array:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">players</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">String</span> <span class="tok-o">[</span><span class="tok-mi">4</span><span class="tok-o">];</span>

<span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;David&quot;</span><span class="tok-o">;</span>
<span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-mi">1</span><span class="tok-o">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Daniel&quot;</span><span class="tok-o">;</span>
<span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-mi">2</span><span class="tok-o">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Anna&quot;</span><span class="tok-o">;</span>
<span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-mi">3</span><span class="tok-o">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Gregory&quot;</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You must declare the size of the array before assigning values to its elements. If you do not know in advance how many elements you are going to have, you cannot use arrays, but you should look into other classes - Java collections. For example the <code>ArrayList</code> object does not require you to announce the exact number of elements in advance. I&#8217;ll show you some examples of using the <code>ArrayList</code> collection in Chapter 10 about data collections.</p>
</div>
<div class="paragraph">
<p>Any array has an attribute called <code>length</code> that stores the  number of elements in this array, and you can always find out how many elements are there:</p>
</div>
<div class="paragraph">
<p><code>int  totalPlayers = players.length;</code></p>
</div>
<div class="paragraph">
<p>If you know all the values that will be stored in the array at the time when you declare it, Java allows you to declare and initialize such array in one shot:</p>
</div>
<div class="paragraph">
<p><code>String [] players = {"David", "Daniel", "Anna", "Gregory"};</code></p>
</div>
<div id="FIG4-4" class="imageblock">
<div class="content">
<img src="./images/fig_4_04.png" alt="fig 4 04">
</div>
<div class="title">Figure 36. The array of players</div>
</div>
<div class="paragraph">
<p>Imagine that the second player is a winner and you’d like to write the code to congratulate this kid. If the players’ names are stored in an array get its second element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">String</span> <span class="tok-n">theWinner</span> <span class="tok-o">=</span> <span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-mi">1</span><span class="tok-o">];</span>
<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Congratulations, &quot;</span> <span class="tok-o">+</span> <span class="tok-n">theWinner</span> <span class="tok-o">+</span> <span class="tok-s">&quot;!&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The output from these two lines of code will look like this:</p>
</div>
<div class="paragraph">
<p><em>Congratulations, Daniel!</em></p>
</div>
<div class="paragraph">
<p>Do you know why the second element has the index [1]? Of course you do, because the index of the first element is always [0].</p>
</div>
<div class="paragraph">
<p>The array of players in our example is called <em>one-dimensional array</em>. Imagine the players sitting like ducks in a row. The single dimension is the seat number here. If the players (or game spectators) will occupy several rows, then we&#8217;ll have two dimensions - the row number and a set number within the row. This is the case where we&#8217;d need to declare a two-dimensional array. Java allows creation of <em>multi-dimensional</em> arrays, and I’ll show you how to do this in Chapter 10.</p>
</div>
</div>
<div class="sect2">
<h3 id="_repeating_actions_with_loops">4.7. Repeating Actions with Loops</h3>
<div class="paragraph">
<p>A loop is a language construct that allows to repeat the same action multiple times. For example, if we need to print congratulation to several winners, the printing code should be invokes several times <em>in a loop</em>. When you know in advance how many times this action has to be repeated, you can use a loop with a keyword <code>for</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span>  <span class="tok-n">totalPlayers</span> <span class="tok-o">=</span> <span class="tok-n">players</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">;</span>
<span class="tok-kt">int</span> <span class="tok-n">counter</span><span class="tok-o">;</span>

<span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">counter</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">counter</span> <span class="tok-o">&lt;</span> <span class="tok-n">totalPlayers</span><span class="tok-o">;</span> <span class="tok-n">counter</span><span class="tok-o">++){</span>
 <span class="tok-n">String</span> <span class="tok-n">thePlayer</span> <span class="tok-o">=</span> <span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-n">counter</span><span class="tok-o">];</span>
 <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Congratulations,&quot;</span><span class="tok-o">+</span>
                                    <span class="tok-n">thePlayer</span><span class="tok-o">+</span><span class="tok-s">&quot;!&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code means the following:</p>
</div>
<div class="paragraph">
<p><em>Print the value of the element from the <code>players</code> array  whose number is the same as the current value of the</em> <code>counter</code>. <em>Start from the element number 0: _ <code>counter=0)</code>, _and  increment the value of the</em> <code>counter</code>  <em>by one:</em> <code>(counter++)</code>. <em>Keep doing this  while the</em> <code>counter</code> <em>is less than</em>  <code>totalPlayers`<em>:</em> `counter&lt;totalPlayers</code>.</p>
</div>
<div class="paragraph">
<p>JVM executes every line between the curly braces and then returns back to the first line of the loop to increment the counter and check the conditional expression.</p>
</div>
<div class="paragraph">
<p>There is another flavor of the <code>for</code> loop known as <em>for each loop</em>. It allows the program to repeat the same action to every element of the collection without even knowing how many are there. You are basically saying, do this for each element.The for-each loop allows to congratulate players in a more concise manner:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-nl">pl:</span> <span class="tok-n">players</span><span class="tok-o">){</span>
 <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Congratulations,&quot;</span> <span class="tok-o">+</span> <span class="tok-n">pl</span> <span class="tok-o">+</span><span class="tok-s">&quot;!&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can read the above code as follows:</p>
</div>
<div class="paragraph">
<p><em>The variable</em> <code>pl</code> <em>has the type</em> <code>String</code> <em>- the same as as the array&#8217;s elements. Use this variable as a cursor, point it to each element in the array</em> <code>players</code> <em>one by one and repeatedly execute the code inside the curly brackets for the current element.</em></p>
</div>
<div class="paragraph">
<p>There is another keyword for writing loops - <code>while</code>. In these loops you do not have to declare exactly how many times to repeat the action, but you still need to know when to end the loop. Let’s see how we can congratulate players using the <code>while</code> loop that will end when the value of the variable <code>counter</code> becomes equal to the value of <code>totalPlayers</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span>  <span class="tok-n">totalPlayers</span> <span class="tok-o">=</span> <span class="tok-n">players</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">;</span>
<span class="tok-kt">int</span> <span class="tok-n">counter</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span>

<span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-n">counter</span><span class="tok-o">&lt;</span> <span class="tok-n">totalPlayers</span><span class="tok-o">){</span>
  <span class="tok-n">String</span> <span class="tok-n">thePlayer</span> <span class="tok-o">=</span> <span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-n">counter</span><span class="tok-o">];</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Congratulations, &quot;</span>
                                <span class="tok-o">+</span> <span class="tok-n">thePlayer</span> <span class="tok-o">+</span> <span class="tok-s">&quot;!&quot;</span><span class="tok-o">);</span>
  <span class="tok-n">counter</span><span class="tok-o">++;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In Chapter 9 you’ll learn how to save the data on the disk and how to read the saved data back into computer’s memory. If you read game scores from the disk file, you do not know in advance how many scores were saved there. Most likely you’ll be reading the scores using the <code>while</code> or for-each loop, which don&#8217;t require you to state the number of iterations upfront.</p>
</div>
<div class="paragraph">
<p>You can also use two important keywords with loops: <code>break</code> and <code>continue</code>.</p>
</div>
<div class="paragraph">
<p>As with <code>switch</code> statements, the keyword <code>break</code> is used to jump out of the loop when some particular condition is <code>true</code>. Let’s say we do not want to print more than 3 congratulations, regardless of how many players we’ve got. In the next example, after printing the array elements 0, 1 and 2, the <code>break</code> will make the code go out of the loop and the program will continue from the line after the closing curly brace.</p>
</div>
<div class="paragraph">
<p>The next code sample has the double equal sign <code>==</code> in the <code>if</code> statement. This means that you are comparing the value of the variable <code>counter</code> with number 3. A single equal sign in the here would mean assigning the value of 3 to the variable <code>counter</code>. Placing <code>=</code> in an <code>if</code> statement instead of <code>==</code> is a very tricky mistake, and it can lead to unpredictable program errors that may be dificcult to find.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span> <span class="tok-n">counter</span> <span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span>
<span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-n">counter</span><span class="tok-o">&lt;</span> <span class="tok-n">totalPlayers</span><span class="tok-o">){</span>

  <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">counter</span> <span class="tok-o">==</span> <span class="tok-mi">3</span><span class="tok-o">){</span>
   <span class="tok-k">break</span><span class="tok-o">;</span> <span class="tok-c1">// Jump out of the loop</span>
  <span class="tok-o">}</span>
  <span class="tok-n">String</span> <span class="tok-n">thePlayer</span> <span class="tok-o">=</span> <span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-n">counter</span><span class="tok-o">];</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Congratulations, &quot;</span><span class="tok-o">+</span><span class="tok-n">thePlayer</span><span class="tok-o">+</span> <span class="tok-s">&quot;!&quot;</span><span class="tok-o">);</span>
  <span class="tok-n">counter</span><span class="tok-o">++;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The keyword <code>continue</code> allows the code to skip some code lines and return back to the beginning of the loop.  Imagine that you want to congratulate everyone but David – the keyword <code>continue</code> will return the program back to the beginning of the loop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-n">counter</span><span class="tok-o">&lt;</span> <span class="tok-n">totalPlayers</span><span class="tok-o">){</span>
  <span class="tok-n">counter</span><span class="tok-o">++;</span>

  <span class="tok-n">String</span> <span class="tok-n">thePlayer</span> <span class="tok-o">=</span> <span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-n">counter</span><span class="tok-o">];</span>

  <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">thePlayer</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;David&quot;</span><span class="tok-o">){</span>
      <span class="tok-k">continue</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Congratulations, &quot;</span><span class="tok-o">+</span> <span class="tok-n">thePlayer</span><span class="tok-o">+</span> <span class="tok-o">!</span><span class="tok-err">&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There is yet another type of the <code>while</code> loop that starts with the word <code>do</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">do</span> <span class="tok-o">{</span>
   <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Congratulations, &quot;</span><span class="tok-o">+</span>
                         <span class="tok-n">players</span><span class="tok-o">[</span><span class="tok-n">counter</span><span class="tok-o">]</span> <span class="tok-o">+</span> <span class="tok-o">!</span><span class="tok-err">&quot;</span><span class="tok-o">);</span>
   <span class="tok-n">counter</span><span class="tok-o">++;</span>

 <span class="tok-o">}</span> <span class="tok-k">while</span> <span class="tok-o">(</span><span class="tok-n">counter</span><span class="tok-o">&lt;</span> <span class="tok-n">totalPlayers</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Such loops check an expression <em>after</em> executing the code between curly braces, which means that code in the loop will  be executed <em>at least once</em>.  Loops that start with the keyword <code>while</code> might not be executed at all if the loop expression is <code>false</code> to begin with.</p>
</div>
</div>
<div class="sect2">
<h3 id="_challenge_yourself_2">4.8. Challenge Yourself</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new IntelliJ Idea Java project as described in Chapter 2. Name it <code>Chapter4</code>.</p>
</li>
<li>
<p>In the src directory of the project create a new class (the menu File | New) named <em>TemperatureConverter</em>.</p>
</li>
<li>
<p>Add the method <code>convertTemp()</code> so the code of the class looks like this:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TemperatureConverter</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">float</span> <span class="tok-nf">convertTemp</span> <span class="tok-o">(</span><span class="tok-kt">float</span> <span class="tok-n">temperature</span><span class="tok-o">,</span>
                               <span class="tok-kt">char</span> <span class="tok-n">convertTo</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Write the if statement inside the method <code>convertTemp</code> to check the value of the argument <code>convertTo</code>. If it&#8217;s <code>F</code>, the temperature has to be converted to Fahrenheit, and if it’s <code>C</code>, convert it to Celsius. Return the result. The method <code>convertTemp</code> should look like this:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-n">String</span> <span class="tok-nf">convertTemp</span> <span class="tok-o">(</span><span class="tok-kt">float</span> <span class="tok-n">temperature</span><span class="tok-o">,</span> <span class="tok-kt">char</span> <span class="tok-n">convertTo</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">convertTo</span><span class="tok-o">==</span><span class="tok-sc">&#39;F&#39;</span><span class="tok-o">){</span>
             <span class="tok-k">return</span> <span class="tok-s">&quot;The temperature in Fahrenheit is &quot;</span> <span class="tok-o">+</span> <span class="tok-o">(</span><span class="tok-mi">9</span><span class="tok-o">*</span><span class="tok-n">temperature</span><span class="tok-o">/</span><span class="tok-mi">5</span> <span class="tok-o">+</span> <span class="tok-mi">32</span><span class="tok-o">);</span>
         <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span><span class="tok-o">(</span><span class="tok-n">convertTo</span><span class="tok-o">==</span><span class="tok-sc">&#39;C&#39;</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-s">&quot;The temperature in Celsius is &quot;</span> <span class="tok-o">+</span> <span class="tok-o">(</span><span class="tok-n">temperature</span> <span class="tok-o">-</span> <span class="tok-mi">32</span><span class="tok-o">)</span> <span class="tok-o">*</span> <span class="tok-mi">5</span><span class="tok-o">/</span><span class="tok-mi">9</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>  <span class="tok-k">else</span><span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-s">&quot;You can enter either F or C as convertTo argument&quot;</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Add the method <code>main</code> using the shortcut psvm + Tab as explained in Chapter 2. It should look like this:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Converting 21C to Fahrenheit. &quot;</span> <span class="tok-o">+</span>  <span class="tok-n">convertTemp</span><span class="tok-o">(</span><span class="tok-mi">21</span><span class="tok-o">,</span><span class="tok-sc">&#39;F&#39;</span><span class="tok-o">));</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Converting 70F to Celsius. &quot;</span> <span class="tok-o">+</span>  <span class="tok-n">convertTemp</span><span class="tok-o">(</span><span class="tok-mi">70</span><span class="tok-o">,</span><span class="tok-sc">&#39;C&#39;</span><span class="tok-o">));</span>

    <span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Run the program <code>TemperatureConverter</code> using the IDEA menu Run | Run TemperatureConverter. If you did everything right, you should see the following output on the IDEA console:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ext">Converting 21C to Fahrenheit. The temperature in Fahrenheit is 69.8
Converting 70F to Celsius. The temperature in Celsius is 21.11111</code></pre>
</div>
</div>
</li>
<li>
<p>Do a little research to change this program so it always prints the temperature with two digits after the decimal point. Study Oracle&#8217;s tutorial about formatting numeric output: <a href="http://goo.gl/3riLIZ" class="bare">http://goo.gl/3riLIZ</a>.
:toc-placement!:
:imagesdir: .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interfaces_lambdas_abstract_and_anonymous_classes">5. Interfaces, Lambdas, Abstract and Anonymous Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter I&#8217;ll focus on discussing how you can program <em>behavior</em> in Java.  Classes have attributes (e.g. color, number of doors) and exhibit behavior (e.g. eat, sleep, or dive). There is a special group of programming languages that are called <em>functional</em> (e.g. JavaScript, Scala et al). In these languages you can simply write functions like <code>eat</code>, <code>sleep</code>, or <code>dive</code>, and these functions can live their independent lives and don&#8217;t have to be declared in classes. In <em>object-oriented</em> languages behavior is implemented in methods defined in classes.</p>
</div>
<div class="paragraph">
<p>The phrase <em>to implement a method</em> simply means <em>to write code in a method</em>. Starting from Java 8 you can also program behavior in so called <em>lambda expressions</em> covered later in this chapter.</p>
</div>
<div class="paragraph">
<p>So far I was declaring and implementing behavior in methods located inside Java classes. But there is a way and a reason to separate the method declaration from its implementation. Such separation can be done using <em>interfaces</em>.</p>
</div>
<div class="sect2">
<h3 id="_java_interfaces">5.1. Java Interfaces</h3>
<div class="paragraph">
<p>While you can just create a Java class and implement all its methods there, a more formal way of declaring the behavior of the class in a separate <code>interface</code>. Then a class declaration would include the keyword <code>implements</code> followed by the name of the interface. This is a way to declare an application program interface (API) - what the class can do - so the programmer can quickly look at the short declaration of the interface rather than going through a longer code of the class.</p>
</div>
<div class="paragraph">
<p>For years, Java <em>interfaces</em> were used mainly for holding method declarations and <code>final</code> <code>static</code> variables. For example, the interface <code>Talkable</code> contains the declaration of just one method <code>talk</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">interface</span> <span class="tok-nc">Talkable</span><span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">talk</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the method <code>talk</code> is not implemented here, it&#8217;s called <em>abstract</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To create a new interface in IDEA, select the menu File | New | Java class and select Interface in the Kind box.
</td>
</tr>
</table>
</div>
<div id="FIG5-1" class="imageblock">
<div class="content">
<img src="./images/fig_5_01.png" alt="fig 5 01">
</div>
<div class="title">Figure 37. Creating an interface in IDEA</div>
</div>
<div class="paragraph">
<p>You should be thinking, "What&#8217;s the point of simply declaring a method without implementing it?" The thing is that more than one class can exhibit the same behavior. For example, a dog, a cat, and a parrot can "talk". But they "implement it" differently. A parrot can repeat words, while dogs bark. Cats talk by meowing. Accordingly you can declare three classes that will <em>implement</em> <code>Talkative</code> interface differently, as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Parrot</span> <span class="tok-kd">implements</span> <span class="tok-n">Talkative</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">talk</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;My name is Kesha.&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Dog</span> <span class="tok-kd">implements</span> <span class="tok-n">Talkative</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">talk</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Bark! Bark-bark!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Cat</span> <span class="tok-kd">implements</span> <span class="tok-n">Talkative</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">talk</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Meow! Meow!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These three classes use the Java keyword <code>implements</code>, which means they promise to implement all abstract methods in the interface(s) listed after the keyword <code>implements</code> otherwise the Java compiler will complain: "You promised to implement all abstract methods from <code>Talkable</code>, where are they? Keep your promise!"</p>
</div>
<div class="paragraph">
<p>What if we need to create the class <code>Fish</code> that uses interfaces? Fish don&#8217;t talk. But they swim. Dogs can talk (bark) and swim, right? Why won&#8217;t we declare yet another interface <code>Swimmable</code> with the methods <code>swim</code> and <code>dive</code>?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Swimmable</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">swim</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howFar</span><span class="tok-o">);</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s leave the parrots alone. Let&#8217;s create a new class <code>Fish</code> and change the class <code>Dog</code> just a little bit. The <code>Fish</code> will implement <code>Swimmable</code> and the <code>Dog</code> will implement two interfaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-kd">implements</span> <span class="tok-n">Swimmable</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">swim</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howFar</span><span class="tok-o">){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;OK, will swim &quot;</span> <span class="tok-o">+</span> <span class="tok-n">howFar</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;OK, will dive &quot;</span> <span class="tok-o">+</span> <span class="tok-n">howDeep</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Dog</span> <span class="tok-kd">implements</span> <span class="tok-n">Talkative</span><span class="tok-o">,</span> <span class="tok-n">Swimmable</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">talk</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Bark! Bark-bark!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">swim</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howFar</span><span class="tok-o">){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Will swim about a half of this distance: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">howFar</span><span class="tok-o">/</span><span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;C&#39;mon, don&#39;t ask a dog to dive, please!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When a class implements several interfaces, make sure to implement each and every abstract method declared in these interfaces. A class can extend another class and implement interfaces at the same time, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-kd">extends</span> <span class="tok-n">Pet</span> <span class="tok-kd">implements</span> <span class="tok-n">Swimmable</span><span class="tok-o">{</span>

  <span class="tok-c1">// your code implementing swim(), dive()</span>
  <span class="tok-c1">// and any other methods goes here</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Java includes several interfaces that don&#8217;t declare any methods (e.g. <code>Serializable</code>). They are called <em>marker interfaces</em>. You don&#8217;t need to implement any methods in classes that implement marker interfaces. They are used by the Java compiler internally to generate the byte code in a special way.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_default_methods_in_interfaces">5.1.1. Default Methods in Interfaces</h4>
<div class="paragraph">
<p>To tell you the truth, I don&#8217;t like the fact that I had to implement the method <code>dive</code> in the class <code>Dog</code>. The dogs I&#8217;ve seen can&#8217;t dive. Can the interface <code>Swimmable</code> be changed so I&#8217;m not forced to write the implementation of the method <code>dive</code> in the class <code>Dog</code>? Yes, it can. Java 8 introduced a new keyword <code>default</code>. Now you&#8217;re allowed to write a default implementation of a method in the interface. Such a method won&#8217;t be considered abstract anymore, and you won&#8217;t be forced to implement it in your class. Let&#8217;s add a default implementation of the method <code>dive</code> to <code>Swimmable</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Swimmable</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">swim</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howFar</span><span class="tok-o">);</span>

    <span class="tok-kd">public</span> <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t dive, sorry&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">};</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the class <code>Dog</code> doesn&#8217;t have to implement the method <code>dive</code> - the compiler will see a default implementation and won&#8217;t complain. The next version of the class <code>Dog</code> implements only the method <code>swim</code> from <code>Swimmable</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Dog</span> <span class="tok-kd">implements</span> <span class="tok-n">Talkative</span><span class="tok-o">,</span> <span class="tok-n">Swimmable</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">talk</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Bark! Bark-bark!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">swim</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howFar</span><span class="tok-o">){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Will swim about a half of this distance: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">howFar</span><span class="tok-o">/</span><span class="tok-mi">2</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There is no need to change the class <code>Fish</code>. It also implements <code>Swimmable</code>, but has its own version of the method <code>dive</code>, which will override the default implementation of the <code>dive</code> from <code>Swimmable</code>. You can still invoke the method <code>dive</code> on the instance of the <code>Dog</code> class - the default implementation will be invoked. The next class <code>PetMaster</code> will demonstrate this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PetMaster</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">Dog</span> <span class="tok-n">myDog</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Dog</span><span class="tok-o">();</span>
        <span class="tok-n">myDog</span><span class="tok-o">.</span><span class="tok-na">talk</span><span class="tok-o">();</span>
        <span class="tok-n">myDog</span><span class="tok-o">.</span><span class="tok-na">swim</span><span class="tok-o">(</span><span class="tok-mi">7</span><span class="tok-o">);</span>
        <span class="tok-n">myDog</span><span class="tok-o">.</span><span class="tok-na">dive</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">);</span>  <span class="tok-c1">// will use default method</span>

        <span class="tok-n">Fish</span> <span class="tok-n">myFish</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Fish</span><span class="tok-o">();</span>
        <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">swim</span><span class="tok-o">(</span><span class="tok-mi">50</span><span class="tok-o">);</span>
        <span class="tok-n">myFish</span><span class="tok-o">.</span><span class="tok-na">dive</span><span class="tok-o">(</span><span class="tok-mi">20</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run this program and you&#8217;ll see the following output on the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">_Bark</span><span class="tok-o">!</span> <span class="tok-n">Bark</span><span class="tok-o">-</span><span class="tok-n">bark</span><span class="tok-o">!</span>
<span class="tok-n">Will</span> <span class="tok-n">swim</span> <span class="tok-n">about</span> <span class="tok-n">a</span> <span class="tok-n">half</span> <span class="tok-n">of</span> <span class="tok-k">this</span> <span class="tok-nl">distance:</span> <span class="tok-mi">3</span> <span class="tok-n">feet</span>
<span class="tok-n">Can</span><span class="tok-err">&#39;</span><span class="tok-n">t</span> <span class="tok-n">dive</span><span class="tok-o">,</span> <span class="tok-n">sorry</span>
<span class="tok-n">OK</span><span class="tok-o">,</span> <span class="tok-n">will</span> <span class="tok-n">swim</span> <span class="tok-mi">50</span> <span class="tok-n">feet</span>
<span class="tok-n">OK</span><span class="tok-o">,</span> <span class="tok-n">will</span> <span class="tok-n">dive</span> <span class="tok-mi">20</span> <span class="tok-n">feet</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The message "Can&#8217;t dive, sorry" was printed by the default method <code>dive</code> from the interface <code>Swimmable</code>.</p>
</div>
<div id="FIG5-1-1" class="imageblock">
<div class="content">
<img src="./images/fig_5-01-1.png" alt="fig 5 01 1">
</div>
<div class="title">Figure 38. Dogs can&#8217;t dive</div>
</div>
</div>
<div class="sect3">
<h4 id="_static_methods_in_interfaces">5.1.2. Static Methods in Interfaces</h4>
<div class="paragraph">
<p>Starting from Java 8, interfaces are also allowed to include static methods, which are not specific to any instance and can be used only internally by other methods of the interface. The following example illustrates the use of a static method in the interface. Now the default implementation of the method <code>dive</code> won&#8217;t just reject an offer to swim, but will check the current month: if it&#8217;s June, July, or August then diving is allowed because the water should be warm.</p>
</div>
<div class="paragraph">
<p>The modified version of the <code>Swimmable</code> interface includes a static method <code>isSummer</code> that checks the current month and returns <code>true</code> if it&#8217;s June, July, or August. I&#8217;m using the Java Date and Time API here. The default method <code>dive</code> calls the static method <code>isSummer</code> and either agrees or disagrees to dive depending on the time of the year.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDate</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.time.Month</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Swimmable</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">swim</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howFar</span><span class="tok-o">);</span>

    <span class="tok-kd">public</span> <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">){</span>

        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">isSummer</span><span class="tok-o">()){</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;OK, will dive. The water should be warm.&quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t dive, sorry. The water&#39;s cold for diving.&quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">};</span>

    <span class="tok-c1">// Check if it&#39;s summer now</span>
     <span class="tok-kd">static</span> <span class="tok-kt">boolean</span> <span class="tok-nf">isSummer</span><span class="tok-o">(){</span>
        <span class="tok-n">Month</span> <span class="tok-n">month</span> <span class="tok-o">=</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">().</span><span class="tok-na">getMonth</span><span class="tok-o">();</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">month</span> <span class="tok-o">==</span> <span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">JUNE</span> <span class="tok-o">||</span> <span class="tok-n">month</span> <span class="tok-o">==</span> <span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">JULY</span> <span class="tok-o">||</span> <span class="tok-n">month</span> <span class="tok-o">==</span> <span class="tok-n">Month</span><span class="tok-o">.</span><span class="tok-na">AUGUST</span><span class="tok-o">){</span>
            <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
        <span class="tok-o">}</span> <span class="tok-k">else</span><span class="tok-o">{</span>
            <span class="tok-k">return</span> <span class="tok-kc">false</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>isSummer</code> uses the class <code>LocalTime</code> to get <code>Month</code>, which has a data type <code>enum</code> that I haven&#8217;t used so far. It&#8217;s a special data type to represent a fixed number of some values, like months in this case. There are only 12 months, and Java Date and Time API listed them by name in the <code>enum</code> called <code>Month</code>. The only values that are allowed here are <code>Month.JANUARY</code> to <code>Month.DECEMBER</code>. Using enums makes the programs more readable - it&#8217;s easier to deal with months by names than by numbers.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Packages and import statements</div>
<div class="paragraph">
<p>Java comes with many useful classes that are organized in packages. Some packages include classes responsible for drawing, while other packages have classes to work with the Internet, and so on. For example the class <code>LocalDate</code> is located in the package called <code>java.time</code>, and the full name of the class <code>LocalDate</code> is <code>java.time.LocalDate</code>.</p>
</div>
<div class="paragraph">
<p>To let the compiler know where the class <code>LocalDate</code> is located you could specify the full class name, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">time</span><span class="tok-o">.</span><span class="tok-na">LocalDate</span> <span class="tok-n">todaysDate</span> <span class="tok-o">=</span> <span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">time</span><span class="tok-o">.</span><span class="tok-na">LocalDate</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But this syntax is difficult to read so we use the <code>import</code> statements above the class declaration to let the compiler know the location of the class, interface, or enumeration. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDate</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can use just the class name without the need to specify the package name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">LocalDate</span> <span class="tok-n">todaysDate</span> <span class="tok-o">=</span> <span class="tok-n">LocalDate</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The packages are stored in directories and subdirectories on the disk. If you see a full class name <code>java.time.LocalDate</code> it means that this class was originally created in the subdirectory <em>time</em> of the directory <em>java</em>.</p>
</div>
<div class="paragraph">
<p>From now on we&#8217;ll use packages and import statement in every chapter of this book. If you want to place your class into a package, just create a subdirectory (e.g. <em>pets</em>) and add a <code>package</code> statement on the top of your class definition, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">pets</span><span class="tok-o">;</span>

<span class="tok-kd">class</span> <span class="tok-nc">Dog</span><span class="tok-o">{</span>
	<span class="tok-c1">// your code goes here</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>One last thing: Lazy kids use the wild cards in import statements. Instead of writing one import statement per class, they would use an asterisk:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.time.*</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This means that definitions needed for my program are located in the package <code>java.time</code>. Of course, writing one import statement instead of several ones looks appealing, but the readability of the program suffers. Packages can have dozens of classes and it&#8217;s better to explicitly state which classes your program uses.</p>
</div>
<div id="FIG5-1-2" class="imageblock">
<div class="content">
<img src="./images/fig_5-01-2.png" alt="fig 5 01 2">
</div>
<div class="title">Figure 39. Java packages</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_final_static_variables_in_interfaces">5.1.3. Final Static Variables in Interfaces</h4>
<div class="paragraph">
<p>Beside method declarations, default and static methods you can add <code>static final</code> variables to the interface declaration.  Such variables can be used by the code inside the interface or in the classes that implements it. For example, the interface <code>Swimmable</code> can define the maximum depth allowed for diving. Here&#8217;s yet another version of the interface <code>Swimmable</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Swimmable</span> <span class="tok-o">{</span>

    <span class="tok-kd">static</span> <span class="tok-kd">final</span> <span class="tok-n">MAX_DEPTH</span> <span class="tok-o">=</span> <span class="tok-mi">10</span><span class="tok-o">;</span> <span class="tok-c1">// in feet</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">swim</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howFar</span><span class="tok-o">);</span>

    <span class="tok-kd">public</span> <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">){</span>
        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">howDeep</span> <span class="tok-o">&gt;</span> <span class="tok-n">MAX_DEPTH</span><span class="tok-o">){</span>
           <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t dive, sorry&quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">};</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A class that implements <code>Swimmable</code> can use the value of <code>MAX_DEPTH</code> as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_functional_interfaces">5.1.4. Functional Interfaces</h4>
<div class="paragraph">
<p>If an interface has only one abstract method declared (default and static methods don&#8217;t count) it&#8217;s called <em>functional interface</em>. Both <code>Talkative</code> and <code>Swimmable</code> are  examples of a functional interface - each has only one abstract method. Java 8 introduced a special way of implementing functional interfaces using lambda expressions, which we&#8217;ll discuss later in this lesson.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_abstract_classes">5.2. Abstract Classes</h3>
<div class="paragraph">
<p>If a method is not implemented we call it abstract, but classes can be declared abstract too, and Java has the keyword <code>abstract</code> for this. An abstract class is called abstract if it was declared with the keyword <code>abstract</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">Animal</span><span class="tok-o">{</span>
    <span class="tok-c1">// some code goes here</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If a class is declared as abstract, you can&#8217;t create an instance of it. Typically, abstract classes have some non-implemented methods that are also declared with the <code>abstract</code> keyword:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kd">class</span> <span class="tok-nc">Animal</span> <span class="tok-o">{</span>

    <span class="tok-n">String</span> <span class="tok-n">animalClass</span><span class="tok-o">;</span>
    <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setName</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">){</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">sleep</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The &quot;</span> <span class="tok-o">+</span> <span class="tok-n">name</span> <span class="tok-o">+</span>
                <span class="tok-s">&quot; is tired and goes to sleep.&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">abstract</span> <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">talk</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The class <code>Animal</code> has two implemented methods: <code>setName</code> and <code>sleep</code> and one abstract method <code>talk</code>. Since the abstract class can not be instantiated, the programmer has to create a descendant class and implement the method <code>talk</code> there if he or she wants to create an instance of such a class, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Dog</span> <span class="tok-kd">extends</span> <span class="tok-n">Animal</span><span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">talk</span><span class="tok-o">(){</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Bark! Bark-bark!&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Strictly speaking, it&#8217;s not a must to implement the method <code>talk</code> in the class <code>Dog</code>, but in this case <code>Dog</code> remains  abstract and can&#8217;t be instantiated. Maybe the programmer wants to create a class <code>Puppy</code> that extends <code>Dog</code> and implements the method <code>talk</code> there?</p>
</div>
<div class="paragraph">
<p>And again you might be wondering, "Why complicate a programmer&#8217;s life by declaring non-implemented methods?" If you want to build a hierarchy of classes that extend from <code>Animal</code> you might want to declare an unified method signature, so each class (<code>Dog</code>, <code>Parrot</code>, <code>Fish</code> et al.) will have the same way of initiating the talk.</p>
</div>
<div class="sect3">
<h4 id="_what_s_the_difference_between_abstract_classes_and_interfaces">5.2.1. What&#8217;s the difference between abstract classes and interfaces?</h4>
<div class="paragraph">
<p>Abstract classes and interfaces allow to create classes that implement <em>polymorphism</em>, which is an advanced topic and won&#8217;t be covered in this book. You can read about it in <a href="https://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html">Oracle&#8217;s tutorial</a> if interested. Abstract classes allow you to implement some common static or instance-specific behavior, e.g. <code>setName</code> and <code>sleep</code> in the vertical class hierarchy.</p>
</div>
<div class="paragraph">
<p>Interfaces can&#8217;t have instance methods, but they don&#8217;t enforce any class hierarchy. So you can have a class <code>Dog</code> that extends any class, while implementing an interface <code>Talkative</code> that declares the method <code>talk</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_anonymous_classes">5.3. Anonymous Classes</h3>
<div class="paragraph">
<p>If you need to use an object of certain type only once, you can kill two birds with one stone: declare an anonymous class and create an instance of it. In this case you don&#8217;t even need to give a class a name, hence why it&#8217;s <em>anonymous</em>. I&#8217;ll show you an example of a program that&#8217;s first written without and then written with them.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say I want to write a simple calculator in Java. In chapters 8 and 9 you&#8217;ll create a real calculator with the  graphical Users Interface (GUI), but for now I&#8217;ll show you how to program operations such as addition and subtraction. The multiplication and division operations can be programmed  similarly, so I won&#8217;t be implementing these operations.</p>
</div>
<div class="paragraph">
<p>I want to keep these examples in the package called <code>calc</code>. You can create a subdirectory named <em>calc</em> in your project and save your classes there. The other option is to right-click on the folder <em>src</em> in your IDEA project and select the menu New | Package and enter the package name there:</p>
</div>
<div id="FIG5-2" class="imageblock">
<div class="content">
<img src="./images/fig_5_02.png" alt="fig 5 02">
</div>
<div class="title">Figure 40. Creating a new package in IDEA</div>
</div>
<div class="paragraph">
<p>First comes the version that doesn&#8217;t use anonymous classes - I&#8217;ll just use one method for each operation. The code of the class <code>Calculator</code> is pretty simple. Note the first line that declares the package where the class <code>Calculator</code> belongs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">calc</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Calculator</span> <span class="tok-o">{</span>

 <span class="tok-kd">static</span> <span class="tok-kt">double</span> <span class="tok-nf">addTwoNumbers</span> <span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">first</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">second</span><span class="tok-o">){</span>
     <span class="tok-kt">double</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-n">second</span><span class="tok-o">;</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span> <span class="tok-o">+</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-s">&quot; + &quot;</span> <span class="tok-o">+</span>
                       <span class="tok-n">second</span> <span class="tok-o">+</span> <span class="tok-s">&quot; = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span>  <span class="tok-o">);</span>
     <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
 <span class="tok-o">}</span>

 <span class="tok-kd">static</span> <span class="tok-kt">double</span> <span class="tok-nf">subtractTwoNumbers</span> <span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">first</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">second</span><span class="tok-o">){</span>
     <span class="tok-kt">double</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">first</span> <span class="tok-o">-</span> <span class="tok-n">second</span><span class="tok-o">;</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span> <span class="tok-o">+</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-s">&quot; - &quot;</span> <span class="tok-o">+</span>
             <span class="tok-n">second</span> <span class="tok-o">+</span> <span class="tok-s">&quot; = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span>  <span class="tok-o">);</span>
     <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
 <span class="tok-o">}</span>

 <span class="tok-o">}</span>

 <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

     <span class="tok-n">addTwoNumbers</span><span class="tok-o">(</span><span class="tok-mf">3.55</span><span class="tok-o">,</span> <span class="tok-mf">50.00</span><span class="tok-o">);</span>
     <span class="tok-n">subtractTwoNumbers</span><span class="tok-o">(</span><span class="tok-mf">3.55</span><span class="tok-o">,</span> <span class="tok-mf">50.00</span><span class="tok-o">);</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class has two methods that manipulate numbers (one per operation), and its <code>main</code> method invokes each method  passing the same values as arguments. After performing the arithmetic operation each method prints the result. Running this program produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-mf">3.55</span> <span class="tok-o">+</span> <span class="tok-mf">50.0</span> <span class="tok-o">=</span> <span class="tok-mf">53.55</span>
<span class="tok-mf">3.55</span> <span class="tok-o">-</span> <span class="tok-mf">50.0</span> <span class="tok-o">=</span> <span class="tok-o">-</span><span class="tok-mf">46.45</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s redesign this application. Instead of writing a separate method for each operation, I want to write a generic method that can receive the code of the operation and two numbers to be operated upon. This method will have three arguments: the arithmetic operation, the first, and the second number.</p>
</div>
<div class="paragraph">
<p>The operation is a behavior, so let&#8217;s declare an interface to represent it using a functional interface with a single abstract method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">calc</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">ArithmeticOperation</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">performOperation</span><span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">a</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">b</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;ll write two implementations of the <code>ArithmeticOperation</code> interface using anonymous classes - one for addition and one for subtraction. I will also write a method <code>calculate</code>   that will take three arguments: the object that implements <code>ArithmeticOperation</code> and two numbers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">calc</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CalculatorWithAnonymousClasses</span> <span class="tok-o">{</span>

    <span class="tok-c1">// The first anonymous class for addition</span>
    <span class="tok-kd">static</span> <span class="tok-n">ArithmeticOperation</span> <span class="tok-n">addition</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ArithmeticOperation</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">performOperation</span><span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">first</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">second</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-kt">double</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-n">second</span><span class="tok-o">;</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span> <span class="tok-o">+</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-s">&quot; * &quot;</span> <span class="tok-o">+</span>
                    <span class="tok-n">second</span> <span class="tok-o">+</span> <span class="tok-s">&quot; = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span> <span class="tok-o">);</span>
            <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>
    <span class="tok-o">};</span>

    <span class="tok-c1">// The second anonymous class for subtraction</span>
    <span class="tok-kd">static</span> <span class="tok-n">ArithmeticOperation</span> <span class="tok-n">subtraction</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ArithmeticOperation</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-kd">public</span> <span class="tok-kt">double</span> <span class="tok-nf">performOperation</span><span class="tok-o">(</span><span class="tok-kt">double</span> <span class="tok-n">first</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">second</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-kt">double</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">first</span> <span class="tok-o">-</span> <span class="tok-n">second</span><span class="tok-o">;</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span> <span class="tok-o">+</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-s">&quot; - &quot;</span> <span class="tok-o">+</span>
                    <span class="tok-n">second</span> <span class="tok-o">+</span> <span class="tok-s">&quot; = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span> <span class="tok-o">);</span>
            <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>
    <span class="tok-o">};</span>


    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">(</span><span class="tok-n">ArithmeticOperation</span> <span class="tok-n">whatToDo</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">a</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">b</span> <span class="tok-o">){</span>

        <span class="tok-k">return</span> <span class="tok-n">whatToDo</span><span class="tok-o">.</span><span class="tok-na">performOperation</span><span class="tok-o">(</span><span class="tok-n">a</span><span class="tok-o">,</span><span class="tok-n">b</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">calculate</span><span class="tok-o">(</span><span class="tok-n">addition</span><span class="tok-o">,</span> <span class="tok-mf">3.55</span><span class="tok-o">,</span> <span class="tok-mf">50.00</span><span class="tok-o">);</span>
        <span class="tok-n">calculate</span><span class="tok-o">(</span><span class="tok-n">subtraction</span><span class="tok-o">,</span> <span class="tok-mf">3.55</span><span class="tok-o">,</span> <span class="tok-mf">50.00</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The output of the <code>CalculatorWithAnonymousClasses</code> program will be the same as from <code>Calculator</code>. What did we achieve by re-writing calculator this way? We separated the declaration of the behavior and its implementation. The behavior is declared in the interface, and if more than one class needs to implement <code>ArithmeticOperation</code>, we&#8217;ll reuse this interface. The anonymous classes allowed me to create a wrapper object around the method <code>performOperation</code>, so this object could be passed as an argument to the method <code>calculate</code>. In the next section I&#8217;ll rewrite this calculator again in a more elegant way with lambda expressions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Access Levels</div>
<div class="paragraph">
<p>In many code samples I&#8217;ve been using the keyword <code>public</code> in declaration of member variables and methods. This means that such a variable or a method can be accessed by any other code from the project. In the next chapter I&#8217;ll explain how to control access levels in Java.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lambda_expressions">5.4. Lambda Expressions</h3>
<div class="paragraph">
<p>Up till now, to invoke a method we&#8217;ve been creating named or anonymous classes and instantiating objects, but <em>lambda expressions</em> allow to define and invoke a piece of code even without the need to declare classes or instantiate objects.</p>
</div>
<div class="paragraph">
<p>First, let me introduce a new term - <em>a function</em>. So far to implement any behavior you&#8217;d write a method that could be invoked by specifying the class name and a method name (static methods) or by specifying the object variable and a method name (non-static methods). This is a main idea of any object-oriented programming language - the classes and objects are the first-class citizens. You can&#8217;t write a program without them.</p>
</div>
<div class="paragraph">
<p>But there are functional programming languages that don&#8217;t need to wrap behavior inside classes. They allow you to implement behavior by writing functions, which are similar to methods in that they can have names, take arguments, and return results. But functions don&#8217;t have to be placed inside classes and can live independently.</p>
</div>
<div class="paragraph">
<p>A lambda expression is a function without a name or <em>anonymous function</em> that you can assign to a variable, pass as an argument to a method or return from a method. In earlier versions of Java you could pass a value to a method only if this value was an object or a primitive. But now a function (a piece of code) becomes a value that can be passed around. Now let&#8217;s see it in action.</p>
</div>
<div id="FIG5-3" class="imageblock">
<div class="content">
<img src="./images/fig_5-03.png" alt="fig 5 03">
</div>
<div class="title">Figure 41. The Lambda sign</div>
</div>
<div class="paragraph">
<p>In the new version of calculator I&#8217;ll declare each arithmetic operation as a lambda expression. I will reuse the same functional interface with the three-argument method <code>calcuate</code>, but will pass the lambda expression that implements <code>ArithmeticOperation</code> as the first argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CalculatorWithLambdas</span> <span class="tok-o">{</span>

    <span class="tok-c1">// Implementing addition as a lambda expression</span>
    <span class="tok-kd">static</span> <span class="tok-n">ArithmeticOperation</span> <span class="tok-n">addition</span><span class="tok-o">=(</span><span class="tok-n">first</span><span class="tok-o">,</span> <span class="tok-n">second</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
        <span class="tok-kt">double</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-n">second</span><span class="tok-o">;</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span> <span class="tok-o">+</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-s">&quot; + &quot;</span> <span class="tok-o">+</span>
                <span class="tok-n">second</span> <span class="tok-o">+</span> <span class="tok-s">&quot; = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span> <span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
    <span class="tok-o">};</span>

    <span class="tok-c1">// Implementing addition as a lambda expression</span>
    <span class="tok-kd">static</span> <span class="tok-n">ArithmeticOperation</span> <span class="tok-n">subtraction</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">first</span><span class="tok-o">,</span> <span class="tok-n">second</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
        <span class="tok-kt">double</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">first</span> <span class="tok-o">-</span> <span class="tok-n">second</span><span class="tok-o">;</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span> <span class="tok-o">+</span> <span class="tok-n">first</span> <span class="tok-o">+</span> <span class="tok-s">&quot; - &quot;</span> <span class="tok-o">+</span>
                <span class="tok-n">second</span> <span class="tok-o">+</span> <span class="tok-s">&quot; = &quot;</span> <span class="tok-o">+</span> <span class="tok-n">result</span> <span class="tok-o">);</span>
        <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-o">;</span>
    <span class="tok-o">};</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">double</span> <span class="tok-nf">calculate</span><span class="tok-o">(</span><span class="tok-n">ArithmeticOperation</span> <span class="tok-n">whatToDo</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">a</span><span class="tok-o">,</span> <span class="tok-kt">double</span> <span class="tok-n">b</span> <span class="tok-o">){</span>

        <span class="tok-k">return</span> <span class="tok-n">whatToDo</span><span class="tok-o">.</span><span class="tok-na">performOperation</span><span class="tok-o">(</span><span class="tok-n">a</span><span class="tok-o">,</span><span class="tok-n">b</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">calculate</span><span class="tok-o">(</span><span class="tok-n">addition</span><span class="tok-o">,</span> <span class="tok-mf">3.55</span><span class="tok-o">,</span> <span class="tok-mf">50.00</span><span class="tok-o">);</span>
        <span class="tok-n">calculate</span><span class="tok-o">(</span><span class="tok-n">subtraction</span><span class="tok-o">,</span> <span class="tok-mf">3.55</span><span class="tok-o">,</span> <span class="tok-mf">50.00</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The difference between <code>CalculatorWithAnonymousClasses</code> from the previous section and <code>CalculatorWithLambdas</code> is that the former implements the functional interface as anonymous classes and the latter as lambdas. Lambda expressions offer a concise way of implementation of functional interfaces. To write a lambda expression you need the play by the rules:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Declare an the interface that has only one abstract method.</p>
</li>
<li>
<p>Make sure that the arguments of your lambda expression match the arguments of the abstract method.</p>
</li>
<li>
<p>Make sure that the return value of your lambda expression matches the return value of the abstract method.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Review the code of the <code>CalculatorWithLambdas</code>. Both lambdas <code>addition</code> and <code>subtraction</code> abide by these rules.</p>
</div>
<div class="paragraph">
<p>You may wonder, "Why are there no data types specified for the lambda parameters first and second?" The reason being that Java compiler is smart enough to guess their data types because it knows which abstract method this lambda implements. An educated guess such as this is called <em>type inference</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
IntelliJ IDEA can automatically convert anonymous classes that implement functional interfaces into lambda expressions. Just make sure that your project language level is 8.0. You can do this by selecting the menu File | Project Structure.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_simplifying_code_with_lambdas">5.4.1. Simplifying Code With Lambdas</h4>
<div class="paragraph">
<p>Let&#8217;s return to our examples with pets. I&#8217;d like to show you how lambda expressions can simplify your code by reducing the number of required classes. Earlier in this chapter we&#8217;ve created the classes <code>Dog</code>, <code>Parrot</code> and the only difference between them was the implementation of the interface <code>Talkative</code>. But we can declare just one class with a method that can take the implementation of the <code>Talkative</code> in a form of lambda expression.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start with defining the functional interface <code>Talkative</code>. This time I&#8217;ll slightly change the signature of the method <code>talk</code> comparing to the version shown earlier in this chapter. I do this to show you how to write a lambda expression that implements a method that has an argument and returns some value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Talkative</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">talk</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">petName</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s write the class <code>Pet</code> with a method <code>speakup</code> that will take implementation of the <code>Talkative</code> interface as the first argument and the pet&#8217;s name as a second one. The class <code>Pet</code> may have many other useful methods, but I&#8217;d like to focus on the <code>speakup</code> that can receive a piece of code defining the rules of talking and apply this code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Pet</span> <span class="tok-o">{</span>

    <span class="tok-c1">// Some other code can go here</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">speakup</span><span class="tok-o">(</span><span class="tok-n">Talkative</span> <span class="tok-n">talkRules</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">){</span>
        <span class="tok-k">return</span> <span class="tok-n">talkRules</span><span class="tok-o">.</span><span class="tok-na">talk</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The only other class we need to create is <code>PetMasterLambda</code> that will create instances of <code>Pet</code> representing both dogs and parrots, but passing different implementation of the <code>Talkative</code> interface. Here it comes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PetMasterLambda</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

     <span class="tok-c1">// dogs</span>
     <span class="tok-n">Pet</span> <span class="tok-n">myDog</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Pet</span><span class="tok-o">();</span>

     <span class="tok-n">Talkative</span> <span class="tok-n">dogTalkRules</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
         <span class="tok-k">return</span>  <span class="tok-s">&quot;I&#39;m a dog. My name is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">name</span><span class="tok-o">;</span>
     <span class="tok-o">};</span>

     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">myDog</span><span class="tok-o">.</span><span class="tok-na">speakup</span><span class="tok-o">(</span><span class="tok-n">dogTalkRules</span><span class="tok-o">,</span> <span class="tok-s">&quot;Sammy&quot;</span><span class="tok-o">));</span>

     <span class="tok-c1">// parrots</span>
     <span class="tok-n">Pet</span> <span class="tok-n">myParrot</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Pet</span><span class="tok-o">();</span>

     <span class="tok-n">Talkative</span> <span class="tok-n">parrotTalkRules</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
         <span class="tok-k">return</span>  <span class="tok-s">&quot;I&#39;m a parrot. Don&#39;t call me &quot;</span> <span class="tok-o">+</span> <span class="tok-n">name</span><span class="tok-o">;</span>
     <span class="tok-o">};</span>

     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">myDog</span><span class="tok-o">.</span><span class="tok-na">speakup</span><span class="tok-o">(</span><span class="tok-n">parrotTalkRules</span><span class="tok-o">,</span> <span class="tok-s">&quot;Charlie&quot;</span><span class="tok-o">));</span>
     <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;ve defined different rules for talking parrots and dogs as lambdas in variables <code>parrotTalkRules</code> and <code>dogTalkRules</code> accordingly. Not that I have not specified the data type of the variable <code>name</code>. It&#8217;s yet another example of the inferred typing - the <code>Talkative</code> interface has a single abstract method with the argument of type <code>String</code>. The second argument of the method <code>speakup</code> will be passed to the method <code>talk</code>. Run this program and it&#8217;ll print the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">I</span><span class="tok-err">&#39;</span><span class="tok-n">m</span> <span class="tok-n">a</span> <span class="tok-n">dog</span><span class="tok-o">.</span> <span class="tok-n">My</span> <span class="tok-n">name</span> <span class="tok-n">is</span> <span class="tok-n">Sammy</span>
<span class="tok-n">I</span><span class="tok-err">&#39;</span><span class="tok-n">m</span> <span class="tok-n">a</span> <span class="tok-n">parrot</span><span class="tok-o">.</span> <span class="tok-n">Don</span><span class="tok-err">&#39;</span><span class="tok-n">t</span> <span class="tok-n">call</span> <span class="tok-n">me</span> <span class="tok-n">Charlie</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By using lambda expressions I was able to eliminate the need for creating a separate class for each animal. Of course, this is possible only if the only difference between classes <code>Dog</code> and <code>Parrot</code> was implementation of the talking behavior.</p>
</div>
<div class="paragraph">
<p>I&#8217;d like to draw your attention to the fact, that my class Pet has no state - it doesn&#8217;t define any class variables. This means that we don&#8217;t even need to create instances of the class <code>Pet</code>, but could simply define its method <code>speakup</code> as <code>static</code> and call it just like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Pet</span><span class="tok-o">.</span><span class="tok-na">saySomething</span><span class="tok-o">(</span><span class="tok-n">dogTalkRules</span><span class="tok-o">,</span> <span class="tok-s">&quot;Mary&quot;</span><span class="tok-o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In Chapter 9 I&#8217;ll show you more lambda expressions while explaining how to process GUI <em>events</em> such as click on a button or a mouse move. In the Part 2 of the assignment that you&#8217;re about to work on, I&#8217;ll challenge you to re-write the class <code>Pet</code> so it&#8217;ll keep the rules of talking in its class variable.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_java_interfaces_and_lambda_expressions">5.5. Project: Java Interfaces and Lambda Expressions</h3>
<div class="paragraph">
<p><strong>Part 1.</strong> In this part you&#8217;ll do an exercise to prove that you understand Java interfaces.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new IDEA project named <em>chapter5</em>.</p>
</li>
<li>
<p>Create a package named <em>pets</em>.</p>
</li>
<li>
<p>In the package <em>pets</em> recreate the final versions of classes <code>Dog</code>, <code>Fish</code> and interfaces <code>Swimmable</code> and <code>Talkable</code> from the section Interfaces.</p>
</li>
<li>
<p>In the package <em>pets</em> create a new class <code>Pet</code> with a constructor that will take the name of the pet (of type <code>String</code>) as an argument.</p>
</li>
<li>
<p>Change the declarations of the classes <code>Dog</code> and <code>Fish</code> so each of them extend <code>Pet</code> while implementing <code>Talkable</code> and <code>Swimable</code> interfaces.</p>
</li>
<li>
<p>Create the class <code>PetMaster</code> from the section "Interfaces", but give pets names while instantiating classes <code>Dog</code> and <code>Fish</code>.</p>
</li>
<li>
<p>Modify the implementations of the methods <code>talk</code> and <code>swim</code> so they would print the pet&#8217;s name as a part of the output in <code>System.out.println</code>. For example, "My name is Sammy. Bark-Bark-Bark!"</p>
</li>
<li>
<p>Run and test the <code>PetMaster</code> program.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Part 2.</strong> In this part you&#8217;ll do an exercise to prove that you understand the basics of lambda expressions.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the project <em>chapter5</em> create a new package called <em>lambdapets</em>.</p>
</li>
<li>
<p>In the package <em>lambdapets</em> declare the following  <code>Talkative</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Talkative</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">talk</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">petName</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a new version of the class <code>Pet</code> with the constructor that takes the rules of talking and pet&#8217;s name as arguments. Its method <code>speakup</code> will not have arguments. This is how the code of the new <code>Pet</code> should look like:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Pet</span> <span class="tok-o">{</span>

    <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-n">Talkative</span> <span class="tok-n">myTalkingRules</span><span class="tok-o">;</span>

    <span class="tok-n">Pet</span><span class="tok-o">(</span><span class="tok-n">Talkative</span> <span class="tok-n">talkRules</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">){</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span> <span class="tok-o">=</span> <span class="tok-n">name</span><span class="tok-o">;</span>
        <span class="tok-n">myTalkingRules</span> <span class="tok-o">=</span> <span class="tok-n">talkRules</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">speakup</span><span class="tok-o">(){</span>

        <span class="tok-k">return</span> <span class="tok-n">myTalkingRules</span><span class="tok-o">.</span><span class="tok-na">talk</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Write a new version of the class <code>PetMasterLambda</code> that will define talking rules for dogs and parrots. It should create two instances of <code>Pet</code> (one for a dog, and one for a parrot) and invoke the method <code>speakup</code> on each instance.
:toc-placement!:
:imagesdir: .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_access_levels_collections_generics_and_multi_threading">6. Access Levels, Collections, Generics, and Multi-Threading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I&#8217;ll start this chapter with the explanation of how to hide and protect data using so called access level qualifiers. After that we&#8217;ll experiment with Java collections - the language elements that can store multiple objects of the same type. Remember arrays and their limitations? Java collections offer alternative ways of storing similar objects. Then you&#8217;ll get familiar with the mechanism of <em>generics</em> that allows Java compiler to ensure that you won&#8217;t be using the wrong data types with data collections or other objects.</p>
</div>
<div class="paragraph">
<p>Finally, I&#8217;ll give you a very light introduction to parallel computing using multi-threading.</p>
</div>
<div class="sect2">
<h3 id="_access_levels">6.1. Access Levels</h3>
<div class="paragraph">
<p>In code samples from previous chapters I&#8217;ve been using the keyword <code>public</code> in declaration of member variables and methods. This means that such a variable or method can be accessed by any other code from the project. You can declare a class, a method, or a member variable to be <code>public</code>, <code>private</code>, or <code>protected</code>. If one of these keywords is missing, Java compiler assumes that it&#8217;s a <em>package access level</em> - this element can be accessed only from the code located in the same package (directory).</p>
</div>
<div class="paragraph">
<p>One of the main features of object-oriented languages is <em>encapsulation</em> - the ability to hide and protect data or code. But who do you need to hide or protect the code from? This is not a protection from bad guys who are not allowed to see your code. You hide and protect the code from misuse. For example, another programmer extended your class and is trying to change the value of a variable in your class, which may result in bug.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s consider an example from the real world. Think of a car – most people have no clue how many parts are under the hood, and what actually happens when a driver pushes the brake pedal. If car designers would not hide control of some of the under-the-hood operations, the driver would have to deal with hundreds of buttons, switches and gauges on the car&#8217;s dashboard.</p>
</div>
<div id="FIG6-1" class="imageblock">
<div class="content">
<img src="./images/fig_6-01.png" alt="fig 6 01">
</div>
<div class="title">Figure 42. Overwhelmed by the "public user interface"</div>
</div>
<div class="paragraph">
<p>When you design a  class, hide methods and class member variables that should not be visible from outside. Some of the methods of member variables are meant to be used internally and not to be exposed to other classes.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll start learning about hiding and protecting data with the <code>private</code> access level. If a variable or a method are declared private, they can be used only within the class where they were declared. The next code sample represents the class <code>Car</code> and declares some of its members as <code>private</code>. Note that I&#8217;ve created this class in the package <code>vehicles</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">vehicles</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Car</span> <span class="tok-o">{</span>

 <span class="tok-c1">// This private variable is visible only inside this class</span>
  <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">brakesCondition</span><span class="tok-o">;</span>

 <span class="tok-c1">// The public method brake calls private methods</span>
 <span class="tok-c1">// to decide which brakes to use</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">brake</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">pedalPressure</span><span class="tok-o">){</span>
    <span class="tok-kt">boolean</span> <span class="tok-n">useRegularBrakes</span><span class="tok-o">;</span>
    <span class="tok-n">useRegularBrakes</span><span class="tok-o">=</span>
              <span class="tok-n">checkForAntiLockBrakes</span> <span class="tok-o">(</span><span class="tok-n">pedalPressure</span><span class="tok-o">);</span>

    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">useRegularBrakes</span><span class="tok-o">==</span><span class="tok-kc">true</span><span class="tok-o">){</span>
    <span class="tok-n">useRegularBrakes</span><span class="tok-o">();</span>
    <span class="tok-o">}</span><span class="tok-k">else</span><span class="tok-o">{</span>
    <span class="tok-n">useAntiLockBrakes</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>

  <span class="tok-c1">// This private method can be called inside</span>
  <span class="tok-c1">// this class only</span>
  <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-nf">checkForAntiLockBrakes</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">pressure</span><span class="tok-o">){</span>
    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">pressure</span> <span class="tok-o">&gt;</span> <span class="tok-mi">100</span><span class="tok-o">){</span>
      <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
    <span class="tok-o">}</span><span class="tok-k">else</span> <span class="tok-o">{</span>
      <span class="tok-k">return</span> <span class="tok-kc">false</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>

   <span class="tok-c1">// This private method can be called inside this</span>
   <span class="tok-c1">// class only</span>
  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">useRegularBrakes</span><span class="tok-o">(){</span>
   <span class="tok-c1">// code that sends a signal to regular brakes</span>
  <span class="tok-o">}</span>

   <span class="tok-c1">// This private method can be called inside this</span>
   <span class="tok-c1">// class only</span>
  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">useAntiLockBrakes</span><span class="tok-o">(){</span>
   <span class="tok-c1">// code that sends a signal to anti-lock brakes</span>
   <span class="tok-c1">//</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By looking at this code I can say that the class <code>Car</code> exposes only one public method <code>brake</code>, which internally may invoke several other functions that a driver does not need to know about. For example, if the driver pushes the brakes pedal too hard, the car’s computer may apply special anti-lock brakes implemented in private methods.</p>
</div>
<div class="paragraph">
<p>I took the next screen shot in IntelliJ IDEA while writing a class <code>CarMaster</code> that uses <code>Car</code>. IDEA helps me with suggesting the <code>Car</code> class members that I can use in this context. Only the method <code>brake</code> is visible from the class <code>Car</code> (other methods are from the class <code>Object</code>).</p>
</div>
<div id="FIG6-2" class="imageblock">
<div class="content">
<img src="./images/fig_6_02.png" alt="fig 6 02">
</div>
<div class="title">Figure 43. Can use the brake method only</div>
</div>
<div class="paragraph">
<p>The <code>private</code> access level is the most restrictive one. If you&#8217;re not sure when to use it, just declare all of your call member variables and methods as private, and loosen this restriction if other classes need to use these members.</p>
</div>
<div id="FIG6-3" class="imageblock">
<div class="content">
<img src="./images/fig_6-03.png" alt="fig 6 03">
</div>
<div class="title">Figure 44. Private is the most restrictive access</div>
</div>
<div class="paragraph">
<p>What do you think will happen if you simply remove the <code>private</code> keyword from one of the methods of the class <code>Car</code>? Will the <code>CarMaster</code> see it? No, it won&#8217;t because the absence of the access qualifier gives a package access level to this member. Only classes that are located in the package <code>vehicles</code> can access it, and <code>CarMaster</code> is not one of them.</p>
</div>
<div class="paragraph">
<p>The class members declared with the <code>protected</code> keyword can be accessed from other members of the same class, from its descendants or classes located in the same package. Even if a descendant class is located in a different package, it&#8217;ll be able to access <code>protected</code> methods of its ancestors.</p>
</div>
<div class="paragraph">
<p>Some software developers are creating libraries or frameworks of classes to be used by other developers. These classes can be extended, and their creators may use the keyword <code>protected</code> trying to allow access to certain member only descendant classes. But in the real world no one can predict what the developer may want to do with their libraries, and the keyword <code>protected</code> may become an obstacle in achieving of their goals. I do not use the keyword <code>protected</code> in my projects. As you gain more experience with Java, see for yourself if the keyword <code>protected</code> brings some value to your programs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_casting">6.2. Casting</h3>
<div class="paragraph">
<p>In Java all classes are directly or indirectly inherited from the class <code>Object</code>, which is the root of the class hierarchy. In Figure 2 you&#8217;ve seen a class <code>Car</code> that has number of methods that we&#8217;ve never declared - they belong to the class <code>Object</code>, and the class <code>Car</code> extends <code>Object</code> even though we&#8217;ve never asked for it.  So any of your application classes have an ancestor - <code>Object</code>.</p>
</div>
<div class="paragraph">
<p>When you declare a variable to represent an instance of your class, you can give it a type either of your class or any of its ancestors. For example, both of the following declarations are correct:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Car</span> <span class="tok-n">myCar</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Car</span><span class="tok-o">();</span>

<span class="tok-n">Object</span> <span class="tok-n">myOtherCar</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Car</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Java compiler can <em>cast</em> (convert) one data type to another as long they have inheritance relation. In particular, Java compiler can automatically cast the type to the class ancestors. This is called <em>upcasting</em>. But if a variable has the type of a super class, it won&#8217;t see any members of the subclass. The next screen shot shows that the variable <code>myOtherCar</code> doesn&#8217;t see the method <code>brake</code> declared in the class <code>Car</code>.</p>
</div>
<div id="FIG6-4" class="imageblock">
<div class="content">
<img src="./images/fig_6_04.png" alt="fig 6 04">
</div>
<div class="title">Figure 45. The Object type variable doesn&#8217;t see Car&#8217;s members</div>
</div>
<div class="paragraph">
<p>But you can say, "Doesn&#8217;t the variable <code>myOtherCar</code> point at the instance of the class <code>Car</code>, which has a public method <code>brake</code>?" That&#8217;s right, but since I declared this variable of the type <code>Object</code> the variable <code>myOtherCar</code> assumes that its just a general object.  The programmer can <em>downcast</em> the general type to a more specific one, but this has to be done explicitly by placing the specific type of the object in parentheses before the variable of more general type, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Object</span> <span class="tok-n">myOtherCar</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Car</span><span class="tok-o">();</span>

<span class="tok-n">Car</span> <span class="tok-n">myOtherCarAfterCasting</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">Car</span><span class="tok-o">)</span> <span class="tok-n">myOtherCar</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s like you&#8217;re saying, "I know that the variable <code>myOtherCar</code> is of type <code>`Object</code>, but it actually points at the <code>Car</code> instance". Now the variable <code>myOtherCarAfterCasting</code> will see the method <code>brake</code> declared in the class <code>Car</code>:</p>
</div>
<div id="FIG6-5" class="imageblock">
<div class="content">
<img src="./images/fig_6_05.png" alt="fig 6 05">
</div>
<div class="title">Figure 46. The Car type variable sees Car&#8217;s members</div>
</div>
<div class="paragraph">
<p>Why do we need all these complications? Can&#8217;t we just always declare variables of the specific types? Sometimes we can&#8217;t. For example, JDK comes with lots of other classes that were written to work with the <code>Object</code> data types. Data collection classes were written to be able to store instances of any objects.</p>
</div>
<div class="paragraph">
<p>Creators of data collections had no idea that you might need to store instances of <code>Car</code> or <code>Fish</code> there. But when you use the data collection object in your program, the data type is known. In the next section you&#8217;ll see an example of a <code>FishTank</code> program that stores instances of the class <code>Fish</code> in the <code>ArrayList</code> and then casts them back to the type <code>Fish</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">theFish</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">Fish</span><span class="tok-o">)</span> <span class="tok-n">fishTank</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">i</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_selected_data_collections">6.3. Selected Data Collections</h3>
<div class="paragraph">
<p>Now let&#8217;s see how to work with collections of data. Say you have a hundred songs in your MP3 player. It&#8217;s a collection. If you&#8217;ll create a class <code>Song</code> you can create a hundred of instances of this class (one for each song) and put it in a one of the special data structures called Java collections.</p>
</div>
<div class="paragraph">
<p>Java packages <code>java.util</code> and <code>java.util.concurrent</code> include  classes that are quite handy when a program needs to store several instances of some objects in memory. There are dozens of collection classes in Java, but I&#8217;ll just show you a couple of them. Some of the popular collection classes from the  package <code>java.util</code> are <code>ArrayList</code>,  <code>HashTable</code>, <code>HashMap</code>, and <code>List</code>.</p>
</div>
<div class="paragraph">
<p>The package <code>java.util.concurrent</code> has collections useful in programs that require concurrent (simultaneous) access to some data by different parts of a program (by multiple <em>threads</em>). I&#8217;ll introduce you briefly to the concept of multi-threading later in this chapter, but the coverage of  concurrent collections doesn&#8217;t belong to the introductory book like this one.</p>
</div>
<div class="sect3">
<h4 id="_the_class_arraylist">6.3.1. The Class ArrayList</h4>
<div class="paragraph">
<p>In Chapter 4 you&#8217;ve gotten familiar with Java arrays, which have a limitation - you have to specify the number of array elements during the declaration of an array. But often you don&#8217;t know in advance how many elements there are. For example, if you want to write a program that would print all your followers in Twitter, their number may change many times a day. The class <code>ArrayList</code> can give you more flexibility - it can grow or shrink in size as needed. Think of a list of something - a list of songs, a To-Do list, a list of friends names. Pretty much any objects that can be used with the word <em>list</em> can be stored in an <code>ArrayList</code>.</p>
</div>
<div class="paragraph">
<p>Why use arrays, then? Let’s just always use <code>ArrayList</code>! Unfortunately, nothing  comes for free, and you have to pay the price for having a convenience of dynamically sized arrays. The <code>ArrayList</code> works a little slower than a regular array. Besides, you can only store objects there, while arrays allows you to store primitives too.
To create and populate an <code>ArrayList</code> you should instantiate it first and then create instances of the objects you are planning to store there. Add each object to the <code>ArrayList</code> by calling its method <code>add</code>. The next little program will populate an <code>ArrayList</code>  with <code>String</code> objects and then print each element of this collection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.util.ArrayList</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ArrayListDemo</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-c1">// Create and populate an ArrayList</span>
    <span class="tok-n">ArrayList</span> <span class="tok-n">friends</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ArrayList</span><span class="tok-o">();</span>
    <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;Mary&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;Ann&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;David&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;Roy&quot;</span><span class="tok-o">);</span>

    <span class="tok-c1">// How many friends are there?</span>
    <span class="tok-kt">int</span> <span class="tok-n">friendsCount</span> <span class="tok-o">=</span> <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">size</span><span class="tok-o">();</span>

    <span class="tok-c1">// Print the content of the ArrayList</span>
    <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">&lt;</span><span class="tok-n">friendsCount</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">++){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Friend #&quot;</span> <span class="tok-o">+</span> <span class="tok-n">i</span> <span class="tok-o">+</span> <span class="tok-s">&quot; is &quot;</span>
            <span class="tok-o">+</span> <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">i</span><span class="tok-o">));</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This program will print the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Friend</span> <span class="tok-err">#</span><span class="tok-mi">0</span> <span class="tok-n">is</span> <span class="tok-n">Mary</span>
<span class="tok-n">Friend</span> <span class="tok-err">#</span><span class="tok-mi">1</span> <span class="tok-n">is</span> <span class="tok-n">Ann</span>
<span class="tok-n">Friend</span> <span class="tok-err">#</span><span class="tok-mi">2</span> <span class="tok-n">is</span> <span class="tok-n">David</span>
<span class="tok-n">Friend</span> <span class="tok-err">#</span><span class="tok-mi">3</span> <span class="tok-n">is</span> <span class="tok-n">Roy</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>get</code> extracts the element located at the specified position in the <code>ArrayList</code>. Since you can store any objects in this collection, the method <code>get</code> returns each element of the <code>Object</code> type. The program has to <em>cast</em> this object to a proper data type. We did not do it in the previous example only because we stored <code>String</code> objects in the collection <code>friends</code>, and Java knows how to convert an <code>Object</code> to a <code>String</code> automatically.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see how you can work with some other objects in <code>ArrayList</code>, for example instances of the class <code>Fish</code> shown next.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">pets</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-o">{</span>
      <span class="tok-kd">private</span> <span class="tok-kt">float</span> <span class="tok-n">weight</span><span class="tok-o">;</span>
      <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">color</span><span class="tok-o">;</span>

    <span class="tok-c1">// constructor</span>

    <span class="tok-n">Fish</span><span class="tok-o">(</span><span class="tok-kt">float</span> <span class="tok-n">weight</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">color</span><span class="tok-o">){</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">setWeight</span><span class="tok-o">(</span><span class="tok-n">weight</span><span class="tok-o">);</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">setColor</span><span class="tok-o">(</span><span class="tok-n">color</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-c1">// getters and setters</span>

    <span class="tok-kd">public</span> <span class="tok-kt">float</span> <span class="tok-nf">getWeight</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">weight</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setWeight</span><span class="tok-o">(</span><span class="tok-kt">float</span> <span class="tok-n">weight</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">weight</span> <span class="tok-o">=</span> <span class="tok-n">weight</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">getColor</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-k">return</span> <span class="tok-n">color</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setColor</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">color</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">color</span> <span class="tok-o">=</span> <span class="tok-n">color</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the class fields <code>color</code> and <code>weight</code> are <code>private</code> variables. But this class also defines <code>public</code> <em>getters and setters</em> - the methods that read or modify the fields. In this example the setters and getters don&#8217;t contain any application logic, but they could. For example, you could encapsulate the logic that checks the credentials of the users of this class so not everyone can modify the weight property. By Java naming conventions the setter name starts with the prefix <code>set</code> followed by the capitalized letter of the corresponding <code>private</code> variable. Accordingly, the getter starts with <code>get</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
IntelliJ IDEA can automatically generate setters and getters for the class. Just right-click on the class name and select the options Refactor | Encapsulate Fields.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The code to add (and extract) a particular <code>Fish</code> to the <code>ArrayList</code> collection may look similar to the program <code>FishTank</code> that comes next.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">pets</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.ArrayList</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FishTank</span> <span class="tok-o">{</span>
 <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-n">ArrayList</span> <span class="tok-n">fishTank</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ArrayList</span><span class="tok-o">();</span>

     <span class="tok-n">Fish</span> <span class="tok-n">fish1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Fish</span><span class="tok-o">(</span><span class="tok-mf">2.5f</span><span class="tok-o">,</span> <span class="tok-s">&quot;Red&quot;</span><span class="tok-o">);</span>
     <span class="tok-n">Fish</span> <span class="tok-n">fish2</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Fish</span><span class="tok-o">(</span><span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-s">&quot;Green&quot;</span><span class="tok-o">);</span>

     <span class="tok-n">Fish</span> <span class="tok-n">theFish</span><span class="tok-o">;</span>

     <span class="tok-n">fishTank</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">fish1</span><span class="tok-o">);</span>
     <span class="tok-n">fishTank</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">fish2</span><span class="tok-o">);</span>

     <span class="tok-kt">int</span> <span class="tok-n">fishCount</span> <span class="tok-o">=</span> <span class="tok-n">fishTank</span><span class="tok-o">.</span><span class="tok-na">size</span><span class="tok-o">();</span>

     <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span><span class="tok-n">i</span><span class="tok-o">&lt;</span><span class="tok-n">fishCount</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">++){</span>

         <span class="tok-n">theFish</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">Fish</span><span class="tok-o">)</span> <span class="tok-n">fishTank</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">i</span><span class="tok-o">);</span>  <span class="tok-c1">// casting</span>
         <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Got the &quot;</span> <span class="tok-o">+</span>
            <span class="tok-n">theFish</span><span class="tok-o">.</span><span class="tok-na">getColor</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot; fish that weighs &quot;</span> <span class="tok-o">+</span>
            <span class="tok-n">theFish</span><span class="tok-o">.</span><span class="tok-na">getWeight</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot; pounds.&quot;</span><span class="tok-o">);</span>
     <span class="tok-o">}</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>First, this program creates a couple of instances of the class <code>Fish</code> passing the values for the fields via constructor. Note the letter <em>f</em> in the weight value of the first fish: <code>2.5f</code>. In Java all decimal literals have the type <code>double</code> unless you mark it with the suffix <em>f</em> for <code>float</code>.</p>
</div>
<div class="paragraph">
<p>Each instance is added to the collection <code>fishTank</code>. Then, the program gets the objects from this collection, casts them to the class <code>Fish</code> and prints their values using getters. Here’s the output of the program <code>FishTank</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Got</span> <span class="tok-n">the</span> <span class="tok-n">Red</span> <span class="tok-n">fish</span> <span class="tok-n">that</span> <span class="tok-n">weighs</span> <span class="tok-mf">2.5</span> <span class="tok-n">pounds</span><span class="tok-o">.</span>
<span class="tok-n">Got</span> <span class="tok-n">the</span> <span class="tok-n">Green</span> <span class="tok-n">fish</span> <span class="tok-n">that</span> <span class="tok-n">weighs</span> <span class="tok-mf">5.0</span> <span class="tok-n">pounds</span><span class="tok-o">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ArrayList</code> collection uses Java arrays internally and initially creates an array for 10 elements. But if you keep adding more elements to <code>ArrayList</code> it internally will create another array of the larger size and copy all existing elements there. Because of this additional memory allocations and data copying <code>ArrayList</code> collections works a little slower than arrays, which allocate enough memory in advance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_class_hashtable">6.3.2. The Class Hashtable</h4>
<div class="paragraph">
<p>While the <code>ArrayList</code> collection only allows referencing its elements by index (e.g. <code>fishTank.get(i)</code>), sometimes it would be easier to reference collection elements by names as <em>key/value</em> pairs. I&#8217;ll illustrate by storing my friends' contact information in a <code>HashTable</code> collection that allows accessing objects by key names. Let&#8217;s declare a simple class <code>ContactDetail</code>, which can store contact details of one person.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ContactDetail</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-n">fullName</span><span class="tok-o">;</span>
    <span class="tok-n">String</span> <span class="tok-n">facebookID</span><span class="tok-o">;</span>
    <span class="tok-n">String</span> <span class="tok-n">phone</span><span class="tok-o">;</span>
    <span class="tok-n">String</span> <span class="tok-n">email</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The program <code>HashTableDemo</code> will create and populate two instances of <code>ContactDetail</code>, will add them to the <code>Hashtable</code> collection by names (the keys), and then will print the phone number of the second contact.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.util.Hashtable</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">HashTableDemo</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">ContactDetail</span> <span class="tok-n">friend1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ContactDetail</span><span class="tok-o">();</span>
        <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">fullName</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Jackie Allen&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">email</span> <span class="tok-o">=</span> <span class="tok-s">&quot;jallen@gmail.com&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">facebookID</span> <span class="tok-o">=</span> <span class="tok-s">&quot;jallen&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">phone</span><span class="tok-o">=</span><span class="tok-s">&quot;212-545-5545&quot;</span><span class="tok-o">;</span>

        <span class="tok-n">ContactDetail</span> <span class="tok-n">friend2</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ContactDetail</span><span class="tok-o">();</span>
        <span class="tok-n">friend2</span><span class="tok-o">.</span><span class="tok-na">fullName</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Art Jones&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend2</span><span class="tok-o">.</span><span class="tok-na">email</span> <span class="tok-o">=</span> <span class="tok-s">&quot;ajones@gmail.com&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend2</span><span class="tok-o">.</span><span class="tok-na">facebookID</span> <span class="tok-o">=</span> <span class="tok-s">&quot;ajones&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend2</span><span class="tok-o">.</span><span class="tok-na">phone</span><span class="tok-o">=</span><span class="tok-s">&quot;212-333-2121&quot;</span><span class="tok-o">;</span>

        <span class="tok-n">Hashtable</span> <span class="tok-n">friends</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Hashtable</span><span class="tok-o">();</span>
        <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-s">&quot;Jackie&quot;</span><span class="tok-o">,</span> <span class="tok-n">friend1</span><span class="tok-o">);</span>
        <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-s">&quot;Art&quot;</span><span class="tok-o">,</span> <span class="tok-n">friend2</span><span class="tok-o">);</span>

        <span class="tok-c1">// Cast from Object to ContactDetail</span>
        <span class="tok-n">String</span> <span class="tok-n">artsPhone</span> <span class="tok-o">=</span> <span class="tok-o">((</span><span class="tok-n">ContactDetail</span><span class="tok-o">)</span> <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;Art&quot;</span><span class="tok-o">)).</span><span class="tok-na">phone</span><span class="tok-o">;</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Art&#39;s phone number is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">artsPhone</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example I used the first name as the key in the method <code>put</code> that adds elements to a <code>Hashtable</code>.  Hence one contact can be referred by the key <code>get("Jackie")</code>, and the other one as <code>get("Art")</code>. The method <code>get</code> returns the collection element as the <code>Object</code> type, so I had to cast it to <code>ContactDetail</code> to be able to see the field <code>phone</code>.</p>
</div>
<div id="FIG6-4-1" class="imageblock">
<div class="content">
<img src="./images/fig_6-04-1.png" alt="fig 6 04 1">
</div>
<div class="title">Figure 47. Contacts can be programmed with Hashtable</div>
</div>
<div class="paragraph">
<p><code>HashTable</code> requires each key to be unique. Say you have another contact named <code>Art</code> and will create a new instance of the <code>ContactDetail</code> object. If you&#8217;ll add it to the same collection under the same key - <code>friends.put("Art", friend3);</code>  it&#8217;ll replace the contact details of the first Art with the data of the second one. This happens because Java <code>Hashtable</code> internally generates a hash key (the number) from your key and uses it as an index to find the element when need be.The same names will generate the same hash keys.  So either give the second Art a nickname like <code>ArtFromNYC</code> or use another Java collection like <code>ArrayList</code> to store your contacts. By the way, <code>ArrayList</code> even allows you to store duplicates (objects with the same values) while <code>Hashtable</code> doesn&#8217;t.</p>
</div>
<div class="paragraph">
<p>I&#8217;m not going to cover other Java collections here, but if you&#8217;d like to do your own research, read about such collections from the <code>java.util</code> package as <code>HashMap</code>, <code>HashSet</code>, and <code>LinkedList</code>. There is also a class <code>Collections</code> that has a bunch of useful static methods to operate on your data collections (e.g. <code>sort</code>, <code>copy</code>, <code>binarySearch</code> et al.).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_introduction_to_generics">6.4. Introduction to Generics</h3>
<div class="paragraph">
<p>Java generics is a feature that allows you to create so called <code>parameterized data types</code>. For example, instead of just declaring a collection that can store any data you can pass it a parameter to allow only the objects of certain data types. Instead of declaring and instantiating a general collection to store friends like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">  <span class="tok-n">ArrayList</span> <span class="tok-n">friends</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ArrayList</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>you can do it with a parameter so it can store only <code>String</code> objects like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">  <span class="tok-n">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">friends</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The parameter(s) goes in the angle brackets right after the data type. Note the so called <em>diamond operator &lt;&gt;</em> on the right. Since you already declared the required data type on the left, there is no need to repeat it on the right - compiler will guess the type. It&#8217;s also an example of type inference introduced in the previous lesson about lambda expressions. Now, if by mistake you&#8217;ll try to add an object of another type to <code>friends</code> the Java compiler will complain.</p>
</div>
<div class="paragraph">
<p>I was able to specify a parameter for <code>ArrayList</code> only because it was created with this ability. If you&#8217;ll read the <a href="http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html">online documentation</a> for <code>ArrayList</code> you&#8217;ll see that it&#8217;s declared as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ArrayList</span><span class="tok-o">&lt;</span><span class="tok-n">E</span><span class="tok-o">&gt;</span>
<span class="tok-kd">extends</span> <span class="tok-n">AbstractList</span><span class="tok-o">&lt;</span><span class="tok-n">E</span><span class="tok-o">&gt;</span>
<span class="tok-kd">implements</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">E</span><span class="tok-o">&gt;,</span> <span class="tok-n">RandomAccess</span><span class="tok-o">,</span> <span class="tok-n">Cloneable</span><span class="tok-o">,</span> <span class="tok-n">Serializable</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That <code>&lt;E&gt;</code> means that you&#8217;re allowed to specify a parameter type of elements that will be stored in the the <code>ArrayList</code>. In case of the <code>friends</code> collection the Java compiler would see that in this collection <code>&lt;String&gt;</code> should be the <code>&lt;E&gt;</code>.
The <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Hashtable.html">online documentation</a> for the class <code>Hashtable</code> looks even scarier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Hashtable</span><span class="tok-o">&lt;</span><span class="tok-n">K</span><span class="tok-o">,</span><span class="tok-n">V</span><span class="tok-o">&gt;</span>
<span class="tok-kd">extends</span> <span class="tok-n">Dictionary</span><span class="tok-o">&lt;</span><span class="tok-n">K</span><span class="tok-o">,</span><span class="tok-n">V</span><span class="tok-o">&gt;</span>
<span class="tok-kd">implements</span> <span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">K</span><span class="tok-o">,</span><span class="tok-n">V</span><span class="tok-o">&gt;,</span> <span class="tok-n">Cloneable</span><span class="tok-o">,</span> <span class="tok-n">Serializable</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But <code>&lt;K,V&gt;</code> simply means that you can specify two parameters: <code>K</code> is the the key data type, and <code>V</code> for value.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s write a program that illustrates the advantages of using generics. I&#8217;ll reuse the example from the previous section called <code>HashTableDemo</code> that stored <code>ContactDetail</code> instances. Actually, I&#8217;ll create two new versions of this program. The first one will be called <code>HashTableBrokenDemo</code>, and I&#8217;ll show how to break this program so it crashes during the runtime if we don&#8217;t use generics. After that, I&#8217;ll rewrite it as <code>HashTableGenericsDemo</code>, where I&#8217;ll use generics to show how to prevent the runtime errors from happening. Here&#8217;s the broken program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.util.Hashtable</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">HashTableBrokenDemo</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">ContactDetail</span> <span class="tok-n">friend1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ContactDetail</span><span class="tok-o">();</span>
        <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">fullName</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Jackie Allen&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">email</span> <span class="tok-o">=</span> <span class="tok-s">&quot;jallen@gmail.com&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">facebookID</span> <span class="tok-o">=</span> <span class="tok-s">&quot;jallen&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">phone</span><span class="tok-o">=</span><span class="tok-s">&quot;212-545-5545&quot;</span><span class="tok-o">;</span>

        <span class="tok-n">Hashtable</span> <span class="tok-n">friends</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Hashtable</span><span class="tok-o">();</span>
        <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-s">&quot;Jackie&quot;</span><span class="tok-o">,</span> <span class="tok-n">friend1</span><span class="tok-o">);</span>

        <span class="tok-c1">// this is a time bomb</span>
        <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-s">&quot;Art&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Art Jones, ajones@gmail.com, ajones, 212-333-2121&quot;</span><span class="tok-o">);</span>

        <span class="tok-c1">// Cast from Object to ContactDetail</span>
        <span class="tok-n">String</span> <span class="tok-n">artsPhone</span> <span class="tok-o">=</span> <span class="tok-o">((</span><span class="tok-n">ContactDetail</span><span class="tok-o">)</span> <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;Art&quot;</span><span class="tok-o">)).</span><span class="tok-na">phone</span><span class="tok-o">;</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Art&#39;s phone number is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">artsPhone</span><span class="tok-o">);</span>

    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>HashTableBrokenDemo</code> adds the first object (for Jackie) of type <code>ContactDetail</code> to the <code>friends</code> collection, but the contact details for Art are added in the form of a <code>String</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-s">&quot;Art Jones, ajones@gmail.com, ajones, 212-333-2121&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Java compiler sees no crime here - the <code>Hashtable</code> can store any descendants of the class <code>Object</code>.  But if you&#8217;ll run this program, you&#8217;ll get an error in the line that tries to cast the collection element to <code>ContactDetail</code> type. This is how my IntelliJ IDEA screen with the error looks like:</p>
</div>
<div id="FIG6-6" class="imageblock">
<div class="content">
<img src="./images/fig_6_06.png" alt="fig 6 06">
</div>
<div class="title">Figure 48. The runtime exception: ClassCastException</div>
</div>
<div class="paragraph">
<p>The program failed on line 24 with the error <code>ClassCastException</code>. The runtime errors are called exceptions in Java, and I&#8217;ll explain error handling in Chapter 10. But my main point is that this program has crashed during the runtime just because I "forgot" that only the objects of type <code>ContactDetail</code> should be stored in the collection <code>friends</code>.</p>
</div>
<div class="paragraph">
<p>Now I&#8217;ll copy the code of <code>HashTableBrokenDemo</code> into the new class called <code>HashTableGenericsDemo</code>. I&#8217;ll make a small change there - I will declare the collection <code>friends</code> with parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Hashtable</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">ContactDetail</span><span class="tok-o">&gt;</span> <span class="tok-n">friends</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Hashtable</span><span class="tok-o">&lt;&gt;();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now I&#8217;m explicitly stating that my intention is to use the <code>String</code> objects for keys, and <code>ContactDetail</code> objects as values. The program <code>HashTableGenericsDemo</code> is shown next - it won&#8217;t even compile!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">HashTableGenericsDemo</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

      <span class="tok-n">ContactDetail</span> <span class="tok-n">friend1</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ContactDetail</span><span class="tok-o">();</span>
      <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">fullName</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Jackie Allen&quot;</span><span class="tok-o">;</span>
      <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">email</span> <span class="tok-o">=</span> <span class="tok-s">&quot;jallen@gmail.com&quot;</span><span class="tok-o">;</span>
      <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">facebookID</span> <span class="tok-o">=</span> <span class="tok-s">&quot;jallen&quot;</span><span class="tok-o">;</span>
      <span class="tok-n">friend1</span><span class="tok-o">.</span><span class="tok-na">phone</span><span class="tok-o">=</span><span class="tok-s">&quot;212-545-5545&quot;</span><span class="tok-o">;</span>

      <span class="tok-n">Hashtable</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">ContactDetail</span><span class="tok-o">&gt;</span> <span class="tok-n">friends</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Hashtable</span><span class="tok-o">&lt;&gt;();</span>
      <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-s">&quot;Jackie&quot;</span><span class="tok-o">,</span> <span class="tok-n">friend1</span><span class="tok-o">);</span>

      <span class="tok-c1">// compiler will complain about this line</span>
     <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">put</span><span class="tok-o">(</span><span class="tok-s">&quot;Art&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Art Jones, ajones@gmail.com, ajones, 212-333-2121&quot;</span><span class="tok-o">);</span>

      <span class="tok-c1">// No casting from Object to ContactDetail needed</span>
      <span class="tok-n">String</span> <span class="tok-n">jackiesPhone</span> <span class="tok-o">=</span> <span class="tok-n">friends</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;Jackie&quot;</span><span class="tok-o">).</span><span class="tok-na">phone</span><span class="tok-o">;</span>

      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Jackie&#39;s phone number is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">jackiesPhone</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The compiler will complain about the line, where I&#8217;m trying to call the method <code>put</code> with two <code>String</code> objects as arguments. The Java compiler will generate an error message that it can&#8217;t apply two <code>String</code> parameters to a <code>Hashtable</code> that was declared with parameters <code>&lt;String, ContactDetail&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Another important thing to note is that there is no casting needed when the program gets the information about Jackie&#8217;s phone. Now the <code>friends</code> collection knows from the very beginning that it stores not just some <code>Object</code> types, but the <code>ContactDetail</code> instances.</p>
</div>
<div class="paragraph">
<p>What have we achieved? The program <code>HashTableBrokenDemo</code> allowed us to store anything in the collection but crashed during the runtime, but <code>HashTableGenericsDemo</code> prevented this error from happening. Having a compiler&#8217;s error it&#8217;s a lot better than getting surprises during the runtime, isn&#8217;t it? Besides, with generics we&#8217;ve eliminated the need to cast objects.</p>
</div>
<div class="paragraph">
<p>I&#8217;ve been using the parameterized data type <code>Hashtable</code> that was conveniently offered by the creators of Java, but you can define your own classes with parameters too. Creating your own parameterized classes is one of the more advanced topics, and I won&#8217;t be covering it in this book. Check out <a href="https://docs.oracle.com/javase/tutorial/java/generics/types.html">Oracle&#8217;s tutorial</a> if interested.</p>
</div>
</div>
<div class="sect2">
<h3 id="_light_introduction_to_multi_threading">6.5. Light Introduction to Multi-Threading</h3>
<div class="paragraph">
<p>So far, all our programs perform actions in a sequence – one after another. So if a program calls two methods, the second method is invoked only after the first one completes. In other words, such a program has only one <em>thread of execution</em>, where the code works sequentially.</p>
</div>
<div class="paragraph">
<p>In a real life though, we can do several things in parallel like eat, talk on the phone, watch TV, and do the homework. To do all these actions in parallel we use several "processors": hands, eyes, and mouth.</p>
</div>
<div id="FIG6-6-1" class="imageblock">
<div class="content">
<img src="./images/fig_6_MultiTask.png" alt="fig 6 MultiTask">
</div>
</div>
<div class="paragraph">
<p>Today, only your grandma&#8217;s computer has a single processor (a.k.a. Central Processing Unit or CPU). A CPU performs calculations, sends commands to the monitor, hard disk or a solid state drive, remote computers on the Internet, and so on. Most likely your computer has at least two CPU&#8217;s and a GPU (Graphics Processing Unit) for processing graphics if any.</p>
</div>
<div class="paragraph">
<p>But even a single processor can perform several actions at once if a program uses <em>multiple threads</em>. One Java class can start several threads of execution that will take turns in getting time slices of the processor’s time. For example, the program asks the user a question and waits for the response. Meantime the CPU can be used for performing some other application logic instead of idling as shown in Figure 7.</p>
</div>
<div id="FIG6-7" class="imageblock">
<div class="content">
<img src="./images/fig_6_07.png" alt="fig 6 07">
</div>
<div class="title">Figure 49. Parallel processing</div>
</div>
<div class="paragraph">
<p>A good example of a program that creates multiple threads is a Web browser. For instance, you can browse the Internet while downloading some files so one program (the browser) runs two threads of execution (browsing and downloading) in parallel.</p>
</div>
<div class="sect3">
<h4 id="_how_to_create_a_thread">6.5.1. How to Create a Thread</h4>
<div class="paragraph">
<p>All Java applications that we&#8217;ve created so far (even Hello World) were running in so called <em>main thread</em>. We didn&#8217;t need to do any special programming to create a main thread - Java runtime always creates one thread to each program. But if you want your application code to run in parallel thread, you need to write code to request Java runtime to create a separate thread(s) and execute some code there in parallel with the main thread.</p>
</div>
<div class="paragraph">
<p>There are different ways of creating threads. I won&#8217;t be explaining details of each method because it&#8217;s a pretty advanced topic and is not a good fit for this book. But I&#8217;ll just list some of the ways of creating threads and will illustrate it with one simple example. These are the main methods of writing code to be executed in a separate thread:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can inherit your class from the Java class <code>Thread</code> and override its method <code>run</code>, which should contain the code to be executed in parallel.</p>
</li>
<li>
<p>You can add <code>implements Runnable</code> to the declaration of a class and implement the method <code>run</code>, which, again, should contain the code to be executed in parallel.</p>
</li>
<li>
<p>Instead of inheriting your class from the class <code>Thread</code> you can create the new instance of the <code>Thread</code> object</p>
</li>
<li>
<p>You can add <code>implements Callable</code> to the declaration of your class and implement the method <code>call</code>, which plays a similar role to the method <code>run</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The easiest way of implementing multi-threading is by using lambda expressions that were introduced in Chapter 5.
As a refresher, you can use lambdas to implement functional interfaces - those that have only one abstract method. The interface <code>Runnable</code> declares a single  abstract method <code>run</code>, which makes it a perfect candidate to be implemented with lambdas.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s learn by example. First, I&#8217;ll show you a pretty simple program that executes all code sequentially in one main thread, and then I&#8217;ll re-write it to be executed in parallel.</p>
</div>
<div class="paragraph">
<p>The class <code>SingleThreadedDemo</code> executes two loops sequentially. First, it prints five value of i in power of 4, and then five values of k.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SingleThreadedDemo</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

   <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">&lt;</span><span class="tok-mi">5</span><span class="tok-o">;</span><span class="tok-n">i</span><span class="tok-o">++){</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The value of i in power of 4 is &quot;</span>
                                             <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-n">i</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>

   <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">k</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">k</span><span class="tok-o">&lt;</span><span class="tok-mi">5</span><span class="tok-o">;</span><span class="tok-n">k</span><span class="tok-o">++){</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;*** The value of k is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">k</span> <span class="tok-o">+</span> <span class="tok-s">&quot;!&quot;</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>

  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The first loop simply multiplies the variable <code>i</code> to itself four times. In the second loop I simply concatenate a String, the value of <code>k</code> and an exclamation point. The second loop will start only after the first loop is complete, and no matter how many times you&#8217;ll run this program, the output on the console will always look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">0</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">1</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">32</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">243</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">1024</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">0</span><span class="tok-o">!</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">1</span><span class="tok-o">!</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">2</span><span class="tok-o">!</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">3</span><span class="tok-o">!</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">4</span><span class="tok-o">!</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This was an example of a sequential code execution in a single thread. But the actions that we do in each loop don&#8217;t depend on each other and can be executed in parallel, right?</p>
</div>
<div class="paragraph">
<p>Let&#8217;s change this example a little bit. The following class <code>MultiThreadedDemo</code> executes two loops in parallel. It creates a separate thread for the fist loop, and starts it in a separate thread so the main thread, which has the second loop doesn&#8217;t wait for the first one to complete.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MultiThreadedDemo</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

   <span class="tok-n">Thread</span> <span class="tok-n">myThread</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Thread</span><span class="tok-o">(</span>          <b class="conum">(1)</b>
        <span class="tok-o">()</span> <span class="tok-o">-&gt;{</span>                            <b class="conum">(2)</b>
          <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">&lt;</span><span class="tok-mi">5</span><span class="tok-o">;</span><span class="tok-n">i</span><span class="tok-o">++){</span>
             <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The value of i in power of 4 is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-n">i</span><span class="tok-o">*</span><span class="tok-n">i</span><span class="tok-o">);</span>
          <span class="tok-o">}</span>
        <span class="tok-o">}</span>                                 <b class="conum">(3)</b>
      <span class="tok-o">);</span>

   <span class="tok-n">myThread</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>                      <b class="conum">(4)</b>

   <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">k</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">k</span><span class="tok-o">&lt;</span><span class="tok-mi">5</span><span class="tok-o">;</span><span class="tok-n">k</span><span class="tok-o">++){</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;*** The value of k is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">k</span> <span class="tok-o">+</span> <span class="tok-s">&quot;!&quot;</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We start the program with creating a new instance of the <code>Thread</code> class using its constructor that takes an object that implements <code>Runnable</code> interface.</p>
</li>
<li>
<p>Writing a lambda expression is the easiest way to implement <code>Runnable</code>. Note that the lambda expression doesn&#8217;t specify any parameter. Java compiler is smart enough to guess that since the constructor of <code>Thread</code> expects an instance of <code>Runnable</code> then our lambda expression implements this interface. The <code>for</code> loop automatically becomes an implementation of the method <code>run</code>. This is what we want to run in a separate thread</p>
</li>
<li>
<p>The lambda expression ends here.</p>
</li>
<li>
<p>To start the execution of the thread, we need to call the method <code>start</code>, which is defined in the class <code>Thread</code> and will internally invoke the method <code>run</code>, which is implemented as lambda. The method <code>start</code> doesn&#8217;t wait for the completion of the method <code>run</code> so the next line in our <code>main</code> method is executed.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you run the program <code>MultiThreadedDemo</code> several times, it may print the output differently each time depending on how busy is the CPU is on your computer. I ran this program several times and selected the console output that illustrates that the code was not executed sequentially, take a look:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">0</span><span class="tok-o">!</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">1</span><span class="tok-o">!</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">0</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">1</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">2</span><span class="tok-o">!</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">3</span><span class="tok-o">!</span>
<span class="tok-o">***</span> <span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">k</span> <span class="tok-n">is</span> <span class="tok-mi">4</span><span class="tok-o">!</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">32</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">243</span>
<span class="tok-n">The</span> <span class="tok-n">value</span> <span class="tok-n">of</span> <span class="tok-n">i</span> <span class="tok-n">in</span> <span class="tok-n">power</span> <span class="tok-n">of</span> <span class="tok-mi">4</span> <span class="tok-n">is</span> <span class="tok-mi">1024</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the first two lines print the output from the second loop! This means that after calling the method <code>start</code> on the thread <code>myThread</code> the program didn&#8217;t wait for the completion of the first loop, which ran in parallel thread. Then the first loop had something to print. Then the second, etc. The entire console output is a mix of two parallel number-crunching threads.</p>
</div>
<div class="paragraph">
<p>You may say, is it even a real-world example? Who needs to run such simple loops in parallel? I made this example simple to get across the message that one program can do stuff in parallel.</p>
</div>
<div class="paragraph">
<p>For a more realistic scenario think of a game with fancy graphics that needs to update the images on the screen and perform some complex algorithms. If such a program would sequentially do the screen updates and algorithms, the game would run slow with noticeable delays in the graphics during times when the program does number crunching. In Chapter 8 I&#8217;ll illustrate the effect of the "frozen" screen and how to deal with it using a separate thread for screen updates.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_using_arraylist_and_generics">6.6. Project: Using ArrayList and Generics</h3>
<div class="paragraph">
<p>In this exercise I&#8217;d like you to try create your own collection that uses <code>ArrayList</code>, generics, private variables and public getters and setters.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new IDEA project named Chapter6.</p>
</li>
<li>
<p>Create a package named <em>contacts</em>.</p>
</li>
<li>
<p>In the package <em>contacts</em> create the class <code>ContactDetail</code> that looks like this:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ContactDetail</span> <span class="tok-o">{</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">fullName</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">facebookID</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">phone</span><span class="tok-o">;</span>
    <span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">email</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">(){</span>
      <span class="tok-k">return</span> <span class="tok-s">&quot;Name: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">fullName</span> <span class="tok-o">+</span>
             <span class="tok-s">&quot;, Facebook ID:  &quot;</span> <span class="tok-o">+</span> <span class="tok-n">facebookID</span> <span class="tok-o">+</span>
             <span class="tok-s">&quot;, phone: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">phone</span> <span class="tok-o">+</span>
             <span class="tok-s">&quot;, email: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">email</span><span class="tok-o">;</span>
    <span class="tok-o">};</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that I&#8217;m overriding the method <code>toString</code> that exists in the class <code>Object</code>.</p>
</div>
</li>
<li>
<p>In IntelliJ IDEA right-click on the class name and select the options Refactor | Encapsulate Fields to generate public getters and setters for all fields.</p>
</li>
<li>
<p>In the package contacts write a program <code>MyContacts</code> that will declare and instantiate an <code>ArrayList</code> called <code>friends</code> it should  allow only the objects of type <code>ContactDetail</code>.</p>
</li>
<li>
<p>Create two or more instances of <code>ContactDetail</code> object and populate them with your friends' data using setters.</p>
</li>
<li>
<p>Add all instances of <code>ContactDetail</code> to the <code>friends</code> collection by using the method <code>add</code>.</p>
</li>
<li>
<p>Write a for-each loop that will iterate through the collection friends and print all their contact information
by simply printing each object from the collection <code>friends</code>. Since the class <code>ContactDetails</code> has an <em>overriden</em> method <code>toString</code>, you can simply print the objects as shown below - the method <code>toString</code> will be invoked automatically:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">ContactDetail</span> <span class="tok-nl">friend:</span> <span class="tok-n">friends</span><span class="tok-o">){</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">friend</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>The output of the program <code>MyContacts</code> should look similar to this one:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-nl">Name:</span> <span class="tok-n">Jackie</span> <span class="tok-n">Allen</span><span class="tok-o">,</span> <span class="tok-n">Facebook</span> <span class="tok-nl">ID:</span> <span class="tok-n">jallen</span><span class="tok-o">,</span> <span class="tok-nl">phone:</span> <span class="tok-mi">212</span><span class="tok-o">-</span><span class="tok-mi">545</span><span class="tok-o">-</span><span class="tok-mi">5545</span><span class="tok-o">,</span> <span class="tok-nl">email:</span> <span class="tok-n">jallen</span><span class="tok-nd">@gmail.com</span>
<span class="tok-nl">Name:</span> <span class="tok-n">Art</span> <span class="tok-n">Jones</span><span class="tok-o">,</span> <span class="tok-n">Facebook</span> <span class="tok-nl">ID:</span> <span class="tok-n">ajones</span><span class="tok-o">,</span> <span class="tok-nl">phone:</span> <span class="tok-mi">212</span><span class="tok-o">-</span><span class="tok-mi">333</span><span class="tok-o">-</span><span class="tok-mi">2121</span><span class="tok-o">,</span> <span class="tok-nl">email:</span> <span class="tok-n">ajones</span><span class="tok-nd">@gmail.com</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_gui_with_javafx">7. Introduction to GUI with JavaFX</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After creating lots of code samples producing outputs to the system console, it&#8217;s time for creating a nice looking Graphic User Interface (GUI). We&#8217;re accustomed to programs that open windows with buttons, text fields, menus and other GUI components.</p>
</div>
<div class="paragraph">
<p>Java has an older library of GUI components called <a href="http://docs.oracle.com/javase/tutorial/uiswing/">Swing</a>, and the new one called <a href="http://docs.oracle.com/javafx/2/get_started/jfxpub-get_started.htm">JavaFX</a>. We&#8217;ll use only JavaFX in this book. JavaFX is also a library that&#8217;s included with JDK, and you can write your GUI programs using familiar Java language. On the other hand, JavaFX allows to create and arrange GUI components in a special FXML format, while writing application logic in Java.</p>
</div>
<div class="paragraph">
<p>In this chapter I&#8217;ll explain you the basics of GUI programming with JavaFX. You&#8217;ll learn how to create GUI containers and arrange GUI components inside them. In the next chapter you&#8217;ll learn how to write code that reacts on user&#8217;s actions (a.k.a. events) like a click on the button or a mouse move.</p>
</div>
<div class="paragraph">
<p>By the end of this chapter you should be ready to work on the following assignment: "Create the GUI for a calculator that will look similar to this one":</p>
</div>
<div id="FIG7-1" class="imageblock">
<div class="content">
<img src="./images/fig_7_01.png" alt="fig 7 01">
</div>
<div class="title">Figure 50. The Calculator</div>
</div>
<div class="sect2">
<h3 id="_introduction_to_javafx">7.1. Introduction to JavaFX</h3>
<div class="paragraph">
<p>With JavaFX you can create Graphic User Interface in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>By writing the code in Java as you did in previous chapters.</p>
</li>
<li>
<p>With the help of the visual layout tool called Scene Builder, where you&#8217;ll be dragging and dropping components on the window and saving the design in the FXML format in a file with extension <em>.fxml</em>. Then the Java program will load this <em>.fxml</em> file and display your creation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>I&#8217;ll show you both ways, but let&#8217;s start with some basics of development with JavaFX. Let&#8217;s set the stage - JavaFX uses theater terminology.</p>
</div>
<div class="paragraph">
<p>IntelliJ IDEA will helps you to get stated quickly. Just  create a new project (the menu File | New Project), select JavaFX application as the project type and give it a name. In a second a new project will be created with two Java classes <code>Main</code> and <code>Controller</code> and a file named <em>sample.fxml</em> as shown below.</p>
</div>
<div id="FIG7-2" class="imageblock">
<div class="content">
<img src="./images/fig_7_02.png" alt="fig 7 02">
</div>
<div class="title">Figure 51. The newly generated IDEA project</div>
</div>
<div class="paragraph">
<p>The <code>Main</code> class of a JavaFX application extends <code>Application</code> and is an entry point of your application. JavaFX classes are located in the packages whose names start with <code>javafx</code> (e.g. <code>javafx.stage</code> and <code>javafx.scene</code>).The <code>main</code> method invokes the method <code>launch</code> from <code>Application</code>, which creates stage by calling its method <code>start</code>, which was was declared as <code>abstract</code>. Hence, we must override <code>start</code> in our <code>Main</code> class. When the method <code>start</code> is invoked, it&#8217;ll receive a reference to the <code>Stage</code> object - this is where your GUI  components will live and perform.</p>
</div>
<div class="paragraph">
<p>Pretend that you&#8217;re a play director and need to set up one or more <em>scenes</em> (views) on stage. But if in a real scene you&#8217;d expect to see some chairs, tables and other pieces of furniture, each JavaFX scene consists of GUI containers and components. In JavaFX you&#8217;ll create components, add them the a scene and then add a scene to the stage. When the stage is ready, open the curtain by calling the method <code>show</code>.</p>
</div>
<div class="paragraph">
<p>All GUI components are subclasses of the class <code>javafx.scene.Node</code>, and when I&#8217;ll be using the word <em>node</em> just think of a GUI component.  Now you have a choice: create these nodes using Java classes or load the pre-created design from the <code>.fxml</code> file as it was done in the code generated by IDEA.</p>
</div>
<div class="paragraph">
<p>The method <code>start</code> loads the file <em>sample.fxml</em>, sets the title of the stage and creates a <code>Scene</code> 300 by 275 pixels.The content of the generated <em>sample.fxml</em> looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-cp">&lt;?import javafx.geometry.Insets?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.GridPane?&gt;</span>

<span class="tok-cp">&lt;?import javafx.scene.control.Button?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.Label?&gt;</span>
<span class="tok-nt">&lt;GridPane</span> <span class="tok-na">fx:controller=</span><span class="tok-s">&quot;sample.Controller&quot;</span>
          <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml&quot;</span> <span class="tok-na">alignment=</span><span class="tok-s">&quot;center&quot;</span> <span class="tok-na">hgap=</span><span class="tok-s">&quot;10&quot;</span> <span class="tok-na">vgap=</span><span class="tok-s">&quot;10&quot;</span><span class="tok-nt">&gt;</span>
<span class="tok-nt">&lt;/GridPane&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>FXML is a markup language based on XML (a popular data presentation format). The idea is to separate the creation of the GUI in a declarative language (FXML) from the application logic (Java). If we didn&#8217;t use IDEA, the FXML would be generated by the Scene Builder itself. In FXML the GUI is represented by tags in angle brackets, e.g. <code>&lt;GridPane&gt;</code>. Each tag has a matching closing tag that starts with a forward slash, e.g. <code>&lt;/GridPane&gt;</code> and may have attributes (e.g. <code>alignment="center"</code>). The <code>&lt;GridPane&gt;</code> tag corresponds to the Java class <code>GrindPane</code>, which is one of the JavaFX layouts - I&#8217;ll explain them shortly. Every FXML tag has a corresponding Java class behind it.</p>
</div>
<div class="paragraph">
<p>The generated Java class <code>Controller</code> has just the pair of curly braces at this point, but in the next chapter we&#8217;ll be writing the application logic there. Later on you&#8217;ll connect the generated FXML views with the Java code of the <code>Controller</code>. Run the <code>Main</code> program and it&#8217;ll show an empty window shown next:</p>
</div>
<div id="FIG7-3" class="imageblock">
<div class="content">
<img src="./images/fig_7_03.png" alt="fig 7 03">
</div>
<div class="title">Figure 52. Running the generated application</div>
</div>
</div>
<div class="sect2">
<h3 id="_brief_overview_of_javafx_layouts">7.2. Brief Overview of JavaFX Layouts</h3>
<div class="paragraph">
<p>Users of your application can have computer monitors of different screen sizes and resolutions. JavaFX comes with <em>layouts</em> that help with arranging GUI controls on the scene and keeping the arrangement for different stage sizes (think window sizes). There are following layout container Java classes (and similarly named FXML tags):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HBox</p>
</li>
<li>
<p>VBox</p>
</li>
<li>
<p>FlowPane</p>
</li>
<li>
<p>GridPane</p>
</li>
<li>
<p>BorderPane</p>
</li>
<li>
<p>StackPane</p>
</li>
<li>
<p>TilePane</p>
</li>
<li>
<p>AnchorPane</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>HBox</code> class (the horizontal box) places controls in a row next to each other. The vertical box <code>VBox</code> places controls vertically. The <code>FlowPane</code> places the nodes in a row and then wraps to the next row if there is no room left  in the current one.</p>
</div>
<div class="paragraph">
<p>The <code>GridPane</code> allows to arrange UI controls in rows and columns and assign constraints (properties) to each cell.</p>
</div>
<div class="paragraph">
<p>The <code>BorderPane</code> splits the scene into five regions, which are called <code>left</code>, <code>top</code>, <code>right</code>, <code>bottom</code>, and <code>center</code>.</p>
</div>
<div class="paragraph">
<p>The <code>TilePane</code> layout is similar to the <code>FlowPane</code>, but it places each GUI components in a cell of the same size similarly to tiles on the wall. Say, you need to display several images in a tile layout. Adding the <code>ImageView</code> components to the <code>TilePane</code> will shows them as tiles next to each other.</p>
</div>
<div class="paragraph">
<p>The <code>StackPane</code> layout works as a deck of playing cards - only one child node will be shown at a time covering the other nodes.</p>
</div>
<div class="paragraph">
<p>The <code>AnchorPane</code> lets you to anchor nodes at left, top, right, and bottom of the scene. Imagine a music player application with the buttons Rewind on the left and the Fast Forward on the right. For example, the <code>AncorPane</code> allows to force the Rewind button to always remain at 20 pixels from the left border of the window and 10 pixels from the bottom even when the window resizes. For that you can use the <code>leftAnchor</code> and <code>bottomAnchor</code> properties. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">AnchorPane</span><span class="tok-o">.</span><span class="tok-na">setLeftAnchor</span><span class="tok-o">(</span><span class="tok-n">rewindBtn</span><span class="tok-o">,</span> <span class="tok-mi">20</span><span class="tok-o">);</span>
<span class="tok-n">AnchorPane</span><span class="tok-o">.</span><span class="tok-na">setBottomAnchor</span><span class="tok-o">(</span><span class="tok-n">rewindBtn</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Components that are located in a container are considered children of this container. Accordingly, a container is called a parent of these components. If you&#8217;d be writing the code manually in Java, you&#8217;d be going through the following steps with any layout:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create instances of child nodes to be used within the layout container.</p>
</li>
<li>
<p>Create an instance of the selected layout class (e.g. <code>HBox</code>). This instance will serve as a container and a layout manager for all child nodes that you&#8217;ll add to it.</p>
</li>
<li>
<p>Add the child nodes to the container using either the method <code>add()</code> or <code>addAll()</code>.</p>
</li>
<li>
<p>If this layout instance needs to be used inside another layout (e.g. an <code>HBox</code> can be placed inside the <code>BorderPane</code>) add the instance created in Step 1 to the parent container by using the method <code>add()</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this chapter we&#8217;ll use only some of the JavaFX layouts, but for detailed coverage of layouts visit Oracle tutorial at <a href="http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm" class="bare">http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm</a>.</p>
</div>
<div class="paragraph">
<p>It&#8217;s easier to create layouts and components using a visual tool, and this is what we&#8217;ll do next.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started_with_scene_builder">7.3. Getting Started With Scene Builder</h3>
<div class="paragraph">
<p>Scene Builder 2.0 is a visual layout tool for JavaFX applications by Oracle. Download it from <a href="http://goo.gl/9jOse6" class="bare">http://goo.gl/9jOse6</a>. Follow the <a href="http://goo.gl/rCt8x1">installation instructions</a> for your operational system and install Scene Builder on your computer. In this section I&#8217;ll show you how to quickly get started with Scene Builder, but you should also watch this helpful <a href="https://www.youtube.com/watch?v=rHcnsEoSK_c">Youtube video</a>.</p>
</div>
<div class="paragraph">
<p>You can start the Scene Builder either independently or from IDEA. For example, if you right-click on the <em>sample.fxml</em> file in your newly generated IDEA project it&#8217;ll show you a popup menu, which includes the item Open in SceneBuilder. Select this item. The very first time IDEA will ask you to confirm  the location of Scene Builder application on your computer. Then it&#8217;ll open <em>sample.fxml</em> in Scene Builder. This is how it looks on my computer:</p>
</div>
<div id="FIG7-4" class="imageblock">
<div class="content">
<img src="./images/fig_7_04.png" alt="fig 7 04">
</div>
<div class="title">Figure 53. Scene Builder with opened sample.fxml</div>
</div>
<div class="paragraph">
<p>On the left panel you can select containers, controls, menus, shapes and drag and drop them onto the central canvas area. Note the GridPanel layout shown at the bottom left - the arrangement of GUI components inside of this scene will be controlled by <code>GridLayout</code>. Let me select the Button from the Controls section on the left and drop it on the canvas in the middle. The Screen Builder&#8217;s window will look like this:</p>
</div>
<div id="FIG7-5" class="imageblock">
<div class="content">
<img src="./images/fig_7_05.png" alt="fig 7 05">
</div>
<div class="title">Figure 54. Adding a button to the scene</div>
</div>
<div class="paragraph">
<p>The right panel allows you to change the properties of this button. These little boxes with the digit one represent so called row and column constraints - we&#8217;ll discuss them shortly.</p>
</div>
<div class="paragraph">
<p>The Scene Builder&#8217;s menu Preview | Show Preview in Window will show how your GUI will look during the runtime. So far our one-button screen is not too fancy, and this is how it&#8217;s preview looks like:</p>
</div>
<div id="FIG7-6" class="imageblock">
<div class="content">
<img src="./images/fig_7_06.png" alt="fig 7 06">
</div>
<div class="title">Figure 55. Scene Builder: previewing in window</div>
</div>
<div class="paragraph">
<p>Let&#8217;s save the changes in <em>sample.fxml</em> (menu File | Save) and open this file in the IDEA text editor. When IDEA generated <em>sample.fxml</em> there were no content between <code>&lt;GridPanel&gt;</code> and `&lt;/GridPanel&gt;`in the generated <em>sample.fxml</em>, but now there is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tok-cp">&lt;?import javafx.scene.control.*?&gt;</span>
<span class="tok-cp">&lt;?import java.lang.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.geometry.Insets?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.GridPane?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.Button?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.Label?&gt;</span>

<span class="tok-nt">&lt;GridPane</span> <span class="tok-na">alignment=</span><span class="tok-s">&quot;center&quot;</span> <span class="tok-na">hgap=</span><span class="tok-s">&quot;10&quot;</span> <span class="tok-na">vgap=</span><span class="tok-s">&quot;10&quot;</span> <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml/1&quot;</span> <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://javafx.com/javafx/8&quot;</span> <span class="tok-na">fx:controller=</span><span class="tok-s">&quot;sample.Controller&quot;</span><span class="tok-nt">&gt;</span>
   <span class="tok-nt">&lt;columnConstraints&gt;</span>
      <span class="tok-nt">&lt;ColumnConstraints</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;ColumnConstraints</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/columnConstraints&gt;</span>
   <span class="tok-nt">&lt;rowConstraints&gt;</span>
      <span class="tok-nt">&lt;RowConstraints</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;RowConstraints</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/rowConstraints&gt;</span>
   <span class="tok-nt">&lt;children&gt;</span>
      <span class="tok-nt">&lt;Button</span> <span class="tok-na">mnemonicParsing=</span><span class="tok-s">&quot;false&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Button&quot;</span>
         <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/children&gt;</span>
<span class="tok-nt">&lt;/GridPane&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;ll go through the details of the <code>GridPane</code> layout in the next section, but please note that Scene Builder created some tags to specify the constraints for the rows and columns of the grid. The <code>Button</code> component is placed inside the grid in the cell located in the intersection of the column 1 and row 1.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gridpane_layout">7.4. GridPane Layout</h3>
<div class="paragraph">
<p>I&#8217;m not going to cover each JavaFX layout in details, but will show you how to use a pretty powerful layout - <code>GridPane</code>. When we&#8217;ll work on the GUI for the calculator, I&#8217;ll also show you how to design a scene using a combination of layouts.</p>
</div>
<div class="paragraph">
<p>GridPane divides the area into rows and columns and places GUI components (the nodes) into the grid cells. With <code>GridPane</code> layout cells don&#8217;t have to have the same size - nodes can span. If the screen size changes, the content won&#8217;t be rearranged and will maintain the grid look.</p>
</div>
<div class="paragraph">
<p>Before placing the node into a particula cell you have to specify the grid constraints such as <code>rowIndex</code> and <code>columnIndex</code> (the coordinate of the cell, which starts with 0,0). The <code>rowSpans</code> and <code>columnSpan</code> allow to make the cell as wide (or as tall) as several other cells. The <code>GridPane</code> <a href="http://docs.oracle.com/javase/8/javafx/api/javafx/scene/layout/GridPane.html">documentation</a> describes lots of various constraints that can define the behavior of each cell&#8217;s content if the windows gets resized. I&#8217;ll show you a basic example that uses some of these constraints.</p>
</div>
<div class="sect3">
<h4 id="_designing_a_sign_in_window_in_scene_builder">7.4.1. Designing a Sign In Window in Scene Builder</h4>
<div class="paragraph">
<p>I want to create a Sign In window where the user can enter the id, password and press the button Sign In. The scene will use <code>GridPane</code> layout. The first row will contain a <code>Label</code> and <code>TextField</code> for user id, the second row will have a similar pair for the password, and the third row of the grid will have one <code>Button</code> Sign In that should span two columns. This is how this window should look like:</p>
</div>
<div id="FIG7-7" class="imageblock">
<div class="content">
<img src="./images/fig_7_07.png" alt="fig 7 07">
</div>
<div class="title">Figure 56. The Sign In Window</div>
</div>
<div class="paragraph">
<p>I&#8217;ll start with creating a new IDEA JavaFX project (menus File | New Project | JavaFX Application) giving it a name Signin. The project with classes <code>Main</code>, <code>Controller</code> and the file <em>sample.fxml</em> will be generated. Let&#8217;s rename this FXML file into <em>signin.fxml</em>. IDEA will automatically change the corresponding line in the <code>Main</code> class to load this file instead of <em>sample.fxml</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Parent</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-n">FXMLLoader</span><span class="tok-o">.</span><span class="tok-na">load</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">().</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;signin.fxml&quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Rename the package from <em>sample</em> to <em>signin</em> (right-click menu, Refactor | Rename). Now open the file signin.fxml in Scene Builder and start thinking about laying out the components of our Sign In scene. Let&#8217;s take another look at the image of the Sign In window. I can clearly see that GUI components are placed in three rows. The first two have a <code>Label</code> and <code>TextField</code> and the third one has a wide <code>Button</code>.
I can also recognize two columns in the layout of the Sign In window. The first column has two <code>Label</code> components and the left side of the <code>Button</code>. The second column has two <code>TextFiled</code> components and the right side of the <code>Button</code>. We can also say that the <code>Button</code> <em>spans</em> two columns. We&#8217;ve got a 2x3 grid!</p>
</div>
<div class="paragraph">
<p>Open the generated <code>signin.fxml</code> in Scene Builder. Since this file has already empty <code>&lt;GrigPane&gt;</code> tag, you&#8217;ll see GridPane(0,0) as the root of the hierarchy in the bottom left corner as in Figure 4 above. So far this grid has zero rows and zero columns. Right-click on the grid in the middle of the screen and add three rows and two columns to the grid by using the right-click menus GridPane | Add Row Below and Add Column After. When the GridPane is selected The Scene Builder&#8217;s window may look similar to this:</p>
</div>
<div id="FIG7-8" class="imageblock">
<div class="content">
<img src="./images/fig_7_08.png" alt="fig 7 08">
</div>
<div class="title">Figure 57. A GridPane (2,3)</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s drag two <code>Label</code> controls and a <code>Button</code> from the Controls section on the left and drop them into the appropriate cells in the first grid column. Change the text on these components to be UserID:, Password, and Sign In.
Then we could drag and drop two <code>TextField</code> objects in the top two cells in the second column. Actually, it&#8217;s not a good idea to enter password in the clear text. I&#8217;ll use the <code>TextField</code> for the user ID, and the <code>PasswordField</code> (it marks user&#8217;s input) for password.</p>
</div>
<div id="FIG7-9" class="imageblock">
<div class="content">
<img src="./images/fig_7_09.png" alt="fig 7 09">
</div>
<div class="title">Figure 58. A GridPane with nodes in Scene Builder</div>
</div>
<div class="paragraph">
<p>Note that the hierarchy of nodes is shown in the bottom left panel of Scene Builder. If you want to change the properties of a component on a scene with a complex GUI layout it might be easier to select the GUI control in the Hierarchy panel than in the design area in the middle. Now select the menu Preview | Show Preview in Window and you&#8217;ll see the following window:</p>
</div>
<div id="FIG7-10" class="imageblock">
<div class="content">
<img src="./images/fig_7_10.png" alt="fig 7 10">
</div>
<div class="title">Figure 59. Previwing in Scene Builder</div>
</div>
<div class="paragraph">
<p>This window doesn&#8217;t look exactly as we wanted: there are some issues with alignments, there is no spacing between the container and components, and the button Sign In doesn&#8217;t span. But on the bright side, the <code>GridPane</code> controls the layout and if you&#8217;ll try to stretch this window, GUI components won&#8217;t change their relative positioning:</p>
</div>
<div id="FIG7-11" class="imageblock">
<div class="content">
<img src="./images/fig_7_11.png" alt="fig 7 11">
</div>
<div class="title">Figure 60. Streching the preview window in Scene Builder</div>
</div>
<div class="paragraph">
<p>Let&#8217;s do a couple of more property changes before we&#8217;ll run this application from IDEA. In Scene Builder the Properties panel is located on the right and has three sections: Properties, Layout, and Code, and you&#8217;ll find the properties to be changed in one of these sections.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the left panel of Scene Builder select the <code>GridPane</code> and on the right panel change alignment to be <code>TOP_LEFT</code>.</p>
</li>
<li>
<p>Enter 10 for the padding on top, right, bottom and left for the <code>GridPane</code>. We need some spacing between the borders of the scene and the grid.</p>
</li>
<li>
<p>Select the <code>Button</code> on the left and then change the column span to be 2 and the preferred width to be a large number, say 300. This will make the button wide.</p>
</li>
<li>
<p>Select the first column of the grid row by clicking on the little 0 on top of the grid. Set the both preferred and maximum width for this column to be 70.</p>
</li>
<li>
<p>Select the second column of the grid row by clicking on the little 1 on top of the grid. Set the both preferred and maximum width for this column to be 100.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After you do all these changes and save them, the file <code>signin.fxml</code> will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tok-cp">&lt;?import javafx.geometry.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.*?&gt;</span>
<span class="tok-cp">&lt;?import java.lang.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.geometry.Insets?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.GridPane?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.Button?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.Label?&gt;</span>

<span class="tok-nt">&lt;GridPane</span> <span class="tok-na">hgap=</span><span class="tok-s">&quot;10&quot;</span> <span class="tok-na">vgap=</span><span class="tok-s">&quot;10&quot;</span> <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://javafx.com/javafx/8&quot;</span> <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml/1&quot;</span> <span class="tok-na">fx:controller=</span><span class="tok-s">&quot;signin.Controller&quot;</span><span class="tok-nt">&gt;</span>
   <span class="tok-nt">&lt;rowConstraints&gt;</span>
      <span class="tok-nt">&lt;RowConstraints</span> <span class="tok-na">minHeight=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;30.0&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;RowConstraints</span> <span class="tok-na">minHeight=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;30.0&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;RowConstraints</span> <span class="tok-na">minHeight=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;30.0&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/rowConstraints&gt;</span>
   <span class="tok-nt">&lt;columnConstraints&gt;</span>
      <span class="tok-nt">&lt;ColumnConstraints</span> <span class="tok-na">maxWidth=</span><span class="tok-s">&quot;70.0&quot;</span> <span class="tok-na">minWidth=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;70.0&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;ColumnConstraints</span> <span class="tok-na">maxWidth=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">minWidth=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/columnConstraints&gt;</span>
   <span class="tok-nt">&lt;children&gt;</span>
      <span class="tok-nt">&lt;Label</span> <span class="tok-na">alignment=</span><span class="tok-s">&quot;CENTER&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;User ID:&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;Label</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Password:&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;Button</span> <span class="tok-na">mnemonicParsing=</span><span class="tok-s">&quot;false&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;300.0&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Sign In&quot;</span> <span class="tok-na">GridPane.columnSpan=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;TextField</span> <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;PasswordField</span> <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/children&gt;</span>
   <span class="tok-nt">&lt;padding&gt;</span>
      <span class="tok-nt">&lt;Insets</span> <span class="tok-na">bottom=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-na">left=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-na">right=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-na">top=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/padding&gt;</span>
<span class="tok-nt">&lt;/GridPane&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>&lt;GridPane&gt;</code> section you see <code>&lt;rowConstraints&gt;</code> and <code>&lt;columnConstraints&gt;</code> tags defining the the properties of the rows and columns. The <code>&lt;children&gt;</code> section contains the declaration of GUI components that the user will see on the screen: <code>&lt;Label&gt;</code>, <code>&lt;Button&gt;</code>, <code>&lt;TextField&gt;</code>, and  <code>&lt;PasswordField&gt;</code>. The <code>&lt;Insets&gt;</code> section endures that there is some space between the grid borders and its children.</p>
</div>
<div class="paragraph">
<p>This is a declarative way of creating GUI in FXML. No Java coding was required to create the GUI for this application.</p>
</div>
<div class="paragraph">
<p>Finally, let&#8217;s set the size of the stage so it can accommodate all components from our scene. In IDEA, open the class <code>Main</code>,  and in the code set the size of the scene to be 200x150 pixels.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span> <span class="tok-mi">200</span><span class="tok-o">,</span> <span class="tok-mi">150</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the <code>Main</code> program and you&#8217;ll see the window that looks like in Figure 7 above. The work that we&#8217;ve done in Scene Builder was a little tedious, but it didn&#8217;t require any knowledge of Java. This means that this work can be given to a UI designer, while you&#8217;ll concentrate on programming the application logic in Java.</p>
</div>
</div>
<div class="sect3">
<h4 id="_programming_the_sign_in_window_in_java">7.4.2. Programming the Sign In Window in Java</h4>
<div class="paragraph">
<p>Some people like visual design tools, but others don&#8217;t. If you prefer to program everything in Java without using Scene Builder and FXML, you can certainly do it. Below is the Java code of the Sign In window that I&#8217;ve written purely in Java without using Scene Builder. It&#8217;ll produce the same output as in Figure 7.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">GridPaneSample</span> <span class="tok-kd">extends</span> <span class="tok-n">Application</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">start</span><span class="tok-o">(</span><span class="tok-n">Stage</span> <span class="tok-n">primaryStage</span><span class="tok-o">)</span> <span class="tok-o">{</span>

      <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">TWO_COLUMN_SPAN</span> <span class="tok-o">=</span> <span class="tok-mi">2</span><span class="tok-o">;</span>

      <span class="tok-n">Label</span> <span class="tok-n">userIdLbl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Label</span><span class="tok-o">(</span><span class="tok-s">&quot;User ID:&quot;</span><span class="tok-o">);</span>
      <span class="tok-n">TextField</span> <span class="tok-n">userIdTxt</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">TextField</span><span class="tok-o">();</span>
      <span class="tok-n">Label</span> <span class="tok-n">userPwdLbl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Label</span><span class="tok-o">(</span><span class="tok-s">&quot;Password:&quot;</span><span class="tok-o">);</span>
      <span class="tok-n">PasswordField</span> <span class="tok-n">userPwdTxt</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PasswordField</span><span class="tok-o">();</span>

      <span class="tok-n">GridPane</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">GridPane</span><span class="tok-o">();</span>
      <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">setVgap</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">);</span>
      <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">setPadding</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Insets</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">));</span>
      <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">setAlignment</span><span class="tok-o">(</span><span class="tok-n">Pos</span><span class="tok-o">.</span><span class="tok-na">CENTER</span><span class="tok-o">);</span>

      <span class="tok-c1">// Using static methods for setting node constraints</span>
      <span class="tok-n">GridPane</span><span class="tok-o">.</span><span class="tok-na">setConstraints</span><span class="tok-o">(</span><span class="tok-n">userIdLbl</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
      <span class="tok-n">GridPane</span><span class="tok-o">.</span><span class="tok-na">setConstraints</span><span class="tok-o">(</span><span class="tok-n">userIdTxt</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
      <span class="tok-n">GridPane</span><span class="tok-o">.</span><span class="tok-na">setConstraints</span><span class="tok-o">(</span><span class="tok-n">userPwdLbl</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">);</span>
      <span class="tok-n">GridPane</span><span class="tok-o">.</span><span class="tok-na">setConstraints</span><span class="tok-o">(</span><span class="tok-n">userPwdTxt</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">);</span>

      <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">getChildren</span><span class="tok-o">().</span><span class="tok-na">addAll</span><span class="tok-o">(</span><span class="tok-n">userIdLbl</span><span class="tok-o">,</span> <span class="tok-n">userIdTxt</span><span class="tok-o">,</span>
                                <span class="tok-n">userPwdLbl</span><span class="tok-o">,</span> <span class="tok-n">userPwdTxt</span><span class="tok-o">);</span>

      <span class="tok-n">Button</span> <span class="tok-n">signInBtn</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Button</span> <span class="tok-o">(</span><span class="tok-s">&quot;Sign In&quot;</span><span class="tok-o">);</span>

      <span class="tok-c1">// Allow the button to be wider overriding preferred width</span>
      <span class="tok-n">signInBtn</span><span class="tok-o">.</span><span class="tok-na">setPrefWidth</span><span class="tok-o">(</span><span class="tok-n">Double</span><span class="tok-o">.</span><span class="tok-na">MAX_VALUE</span><span class="tok-o">);</span>

      <span class="tok-c1">// using instance method for directly adding the node</span>
      <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">signInBtn</span><span class="tok-o">,</span><span class="tok-mi">0</span><span class="tok-o">,</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-n">TWO_COLUMN_SPAN</span><span class="tok-o">,</span><span class="tok-mi">1</span><span class="tok-o">);</span>

      <span class="tok-n">Scene</span> <span class="tok-n">scene</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span><span class="tok-mi">250</span><span class="tok-o">,</span><span class="tok-mi">150</span><span class="tok-o">);</span>
      <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-n">scene</span><span class="tok-o">);</span>
      <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">show</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">launch</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After all your efforts in Scene Builder, this Java program shouldn&#8217;t be difficult for you to understand. As you see, I use classes named similarly to FXML tags. FXML tags can have attributes (e.g. <code>vgap="10" `), and in Java you&#8217;d need to call the corresponding setter (e.g. `root.setVgap(10)</code>). So the choice is yours - FXML or Java. If you have <em>visual personality</em> use FXML, otherwise use Java.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_styling_with_css">7.5. Styling With CSS</h3>
<div class="paragraph">
<p>It would be boring if all applications would look the same. Application windows may have different colors, fonts, buttons with rounded corners or use special visual effects. In other words, applications have different styles. Even though you can style JavaFX GUI components programmatically (e.g. by calling methods <code>setFont()</code> or <code>setFill()</code>) separating styling from programming allows professional UI designers to take care of the look and feel while software developers implement application logic.</p>
</div>
<div class="paragraph">
<p>Separating the work of programmers and designers became  popular in Web applications. Cascading Style Sheets (CSS) is a special language for styling UI. Styles of GUI components are stored in separate <em>.css</em> files and are loaded and applied to components by the application&#8217;s code. Sometimes this process is called <em>skinning</em> - you can create an application that can "wear different skins" changing its look to the user&#8217;s liking. JavaFX has a default skin, and if you&#8217;re interested in how to create custom skins, visit Oracle online tutorial <a href="http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm">Skinning JavaFX applications with CSS</a>.</p>
</div>
<div class="paragraph">
<p>Even if you won&#8217;t create your own CSS file, your JavaFX application applies default CSS style to the components of your view. In Scene Builder you can see these styles. Just select any component and the go to the menu View | Show CSS Analyzer. You&#8217;ll see a number of styles the start with the prefix <code>fx-</code>, which makes JavaFX CSS a little different from a standard CSS syntax.</p>
</div>
<div class="paragraph">
<p>Covering CSS in detail would require a separate book, but I&#8217;ll show you a simple example of how the look of the GUI can be changed without the need to modify the Java code.</p>
</div>
<div class="paragraph">
<p>You can either create so-called <em>CSS selectors</em> to style a specific GUI component, a type of components (e.g. all buttons), or create a reusable style that can be applied programmatically to a selected component.</p>
</div>
<div class="paragraph">
<p>To style a specific component it has to have a unique id. If you program GUI in Java, set in your Java code using the method <code>setId()</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Button</span> <span class="tok-n">signInBtn</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Button</span> <span class="tok-o">(</span><span class="tok-s">&quot;Sign In&quot;</span><span class="tok-o">);</span>
<span class="tok-n">signInBtn</span><span class="tok-o">.</span><span class="tok-na">setId</span><span class="tok-o">(</span><span class="tok-s">&quot;submitBtn&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In FXML just add an <code>id</code> attribute to the tag of the component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;Button</span> <span class="tok-na">id=</span><span class="tok-s">&quot;submitBtn&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Sign In&quot;</span><span class="tok-nt">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For a button with an id <code>submitBtn</code> you can add the following section to the CSS file to make its background color red:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="css"><span class="tok-nf">#submitBtn</span><span class="tok-p">{</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">background-color</span><span class="tok-o">:</span> <span class="tok-nb">red</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find the names of the main CSS colors <a href="http://www.w3schools.com/cssref/css_colornames.asp">online</a>. In CSS the id type selectors start with the #-sign as in <code>#submitBtn</code>.</p>
</div>
<div class="paragraph">
<p>If you want to apply a style to several components of the same type, you need to define a type selector. For example, to make the text of all <code>Label</code> components red, you can define the following CSS type selector:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">.label{
  -fx-text-fill: red;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that CSS type selectors start with the dot. To create a <em>CSS class selector</em> that can be applied to any component, define the selector with an arbitrary name and apply it programmatically to the components of your choice.  For example, you can specify the class selector <code>.blueLable</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">.bluelabel{
   -fx-text-fill: blue;
   -fx-font-family:verdana;
   -fx-font-style:italic;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class selector defines the rules that will display text of the component in blue <strong>bold</strong> verdana font in <em>italic</em> style. Typically, you&#8217;ll be loading the entire CSS file when the application starts so all styles are available for use. If you use Java for GUI programming, you can apply a class selector to a specific button just like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Label</span> <span class="tok-n">userPwdLbl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Label</span><span class="tok-o">(</span><span class="tok-s">&quot;Password:&quot;</span><span class="tok-o">);</span>
<span class="tok-n">userPwdLbl</span><span class="tok-o">.</span><span class="tok-na">getStyleClass</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;bluelabel&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In FXML assigning a CSS class selector is done by adding the attribute <code>styleClass</code> to the tag element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;Label</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Password:&quot;</span> <span class="tok-na">styleClass=</span><span class="tok-s">&quot;bluelabel&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You may ask, "How am I supposed to know which style properties are available for a given JavaFX component?" All JavaFX styles are described in the online document titled <a href="http://docs.oracle.com/javase/8/javafx/api/javafx/scene/doc-files/cssref.html">"JavaFX CSS Reference Guide"</a>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s learn how to apply all these styling techniques to the Sign In window from the previous section. Using IDEA menu File | New create a new file <em>signin.css</em> in Signin project. Then add the following content to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="css"><span class="tok-nf">#submitBtn</span><span class="tok-p">{</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">background-color</span><span class="tok-o">:</span> <span class="tok-nb">lightskyblue</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">font-family</span><span class="tok-o">:</span><span class="tok-n">verdana</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">font-size</span><span class="tok-o">:</span><span class="tok-m">20</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">font-weight</span><span class="tok-o">:</span> <span class="tok-k">bold</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-n">stroke</span><span class="tok-o">:</span><span class="tok-nb">navy</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">font-style</span><span class="tok-o">:</span><span class="tok-k">italic</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">border</span><span class="tok-o">-</span><span class="tok-n">radius</span><span class="tok-o">:</span> <span class="tok-m">20</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">background</span><span class="tok-o">-</span><span class="tok-n">radius</span><span class="tok-o">:</span> <span class="tok-m">20</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">padding</span><span class="tok-o">:</span> <span class="tok-m">5</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-nc">.label</span><span class="tok-p">{</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">text</span><span class="tok-o">-</span><span class="tok-n">fill</span><span class="tok-o">:</span> <span class="tok-nb">red</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-nc">.bluelabel</span><span class="tok-p">{</span>
   <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">text</span><span class="tok-o">-</span><span class="tok-n">fill</span><span class="tok-o">:</span> <span class="tok-nb">blue</span><span class="tok-p">;</span>
   <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">font-family</span><span class="tok-o">:</span><span class="tok-n">verdana</span><span class="tok-p">;</span>
   <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">font-style</span><span class="tok-o">:</span><span class="tok-k">italic</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The file signin.css_ defines three styles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an id selector for the component with the id <code>submitBtn</code></p>
</li>
<li>
<p>a type selector for all <code>Label</code> components</p>
</li>
<li>
<p>a class selector <code>bluelabel</code> that we can be applied to certain labels.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To apply this CSS file to our Sign In application add the attribute <code>id="submitBtn"</code> to the <code>&lt;Button&gt;</code> element in <em>signin.fxml</em>.</p>
</div>
<div class="paragraph">
<p>Then add the attribute <code>styleClass="bluelabel"</code> to the <code>&lt;Password&gt;</code> tag in <code>signin.fxml</code>.</p>
</div>
<div class="paragraph">
<p>Finally, in <code>Main.java</code> load the <code>signin.css</code> and apply it to the scene. The new version of <code>Main.java</code> will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Main</span> <span class="tok-kd">extends</span> <span class="tok-n">Application</span> <span class="tok-o">{</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">start</span><span class="tok-o">(</span><span class="tok-n">Stage</span> <span class="tok-n">primaryStage</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span><span class="tok-o">{</span>
        <span class="tok-n">Parent</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-n">FXMLLoader</span><span class="tok-o">.</span><span class="tok-na">load</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">().</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;signin.fxml&quot;</span><span class="tok-o">));</span>
      <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setTitle</span><span class="tok-o">(</span><span class="tok-s">&quot;Sign In&quot;</span><span class="tok-o">);</span>

      <span class="tok-n">Scene</span> <span class="tok-n">scene</span>  <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span> <span class="tok-mi">200</span><span class="tok-o">,</span> <span class="tok-mi">150</span><span class="tok-o">);</span>
        <span class="tok-n">scene</span><span class="tok-o">.</span><span class="tok-na">getStylesheets</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">()</span>
              <span class="tok-o">.</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;signin.css&quot;</span><span class="tok-o">).</span><span class="tok-na">toExternalForm</span><span class="tok-o">());</span>

      <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-n">scene</span><span class="tok-o">);</span>
      <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">show</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>


  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">launch</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the <code>Main</code> application and you&#8217;ll see a differently styled Sign In window:</p>
</div>
<div id="FIG7-12" class="imageblock">
<div class="content">
<img src="./images/fig_7_12.png" alt="fig 7 12">
</div>
<div class="title">Figure 61. Styled Sign In Window</div>
</div>
<div class="paragraph">
<p>When the application starts loading our CSS file it sees that all labels must be red because of the type selector for labels. But then the application notices a more specific style for the <code>Label</code> Password: <code>styleClass="bluelabel"</code>, so it paints the text <em>Password</em> in blue.</p>
</div>
</div>
<div class="sect2">
<h3 id="_borderpane_and_combining_layouts">7.6. BorderPane and Combining Layouts</h3>
<div class="paragraph">
<p>Pretty often you see applications that split the window into several distinct areas - the header goes on top, the navigation bar is on the left (or right), the footer&#8217;s at the bottom of the page and a large content area occupies the middle portion of the window. The <code>BorderPane</code> layout allows you to do exactly this - split the scene into up to five regions called <code>left</code>, <code>top</code>, <code>right</code>, <code>bottom</code>, and <code>center</code>.</p>
</div>
<div class="paragraph">
<p>Each of these regions can contain either a single GUI component or a container that will have "children" - components allocated in their own container, e.g. inside a <code>GridPane</code>. You&#8217;ll use <code>BorderPane</code> layout with a nested <code>GridPane</code> while working on the calculator following instructions from the Project section at the end of this chapter. Meanwhile, let&#8217;s create a very basic window illustrating how the <code>BorderPane</code> layout works.</p>
</div>
<div class="paragraph">
<p>Open Scene Builder and create a new FXML file by selecting the menu File | New. Then drag the <code>BorderPane</code> from the left and drop in the middle. Click on the <code>BorderPane</code> and you&#8217;ll see a screen that can look as follows:</p>
</div>
<div id="FIG7-13" class="imageblock">
<div class="content">
<img src="./images/fig_7_13.png" alt="fig 7 13">
</div>
<div class="title">Figure 62. An Empty BorderPane</div>
</div>
<div class="paragraph">
<p>Now select Insert TOP at the bottom left, and then drag and drop a <code>Label</code> from the Controls section onto the middle section of Screen Builder. Set the label&#8217;s title to "This is the Header". This text will be displayed at the top.</p>
</div>
<div class="paragraph">
<p>Select Insert LEFT and then drag and drop <code>VBox</code> from the Containers area to the left side of the middle section of the Screen Builder. The <code>VBox</code> is a container for arranging GUI components vertically, which is what we need for creating a navigation menu. You&#8217;ll see an empty gray area on the left.</p>
</div>
<div id="FIG7-14" class="imageblock">
<div class="content">
<img src="./images/fig_7_14.png" alt="fig 7 14">
</div>
<div class="title">Figure 63. Adding a VBox for navigation</div>
</div>
<div class="paragraph">
<p>Now select <code>VBOX</code> at the bottom left and add a couple of menu items to the empty <code>VBox</code>. Drag a <code>Button</code> from the Controls section and drop it onto the <code>VBox</code>. Change its text to read "Menu 1", and make it a little wider so it fits the <code>VBox</code> nicely. Add two more buttons labeled "Menu 2" and "Menu 3".</p>
</div>
<div id="FIG7-15" class="imageblock">
<div class="content">
<img src="./images/fig_7_15.png" alt="fig 7 15">
</div>
<div class="title">Figure 64. Adding buttons to VBox</div>
</div>
<div class="paragraph">
<p>Our left navigation bar has a menu that&#8217;s implemented as buttons. In Chapter 10 while developing a Tic-Tac-Toe game I&#8217;ll show you how to create real menus.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s add a footer to the window now. Select Insert BOTTOM at the bottom left and then drag the <code>HBox</code> from the Containers area to the middle section. It&#8217;ll look like a gray area at the bottom. Adjust its height so the footer doesn&#8217;t take too much real estate in our scene. Now add three <code>Hyperlink</code> components from the Contols section to the footer and set their text to "Link 1", "Link 2", and "Link 3" correspondingly. The Scene Builder&#8217;s window should look like this:</p>
</div>
<div id="FIG7-16" class="imageblock">
<div class="content">
<img src="./images/fig_7_16.png" alt="fig 7 16">
</div>
<div class="title">Figure 65. Adding a footer with links</div>
</div>
<div class="paragraph">
<p>Select the menu Preview | Show Preview in Window will help you to see how the window will look during the runtime:</p>
</div>
<div id="FIG7-17" class="imageblock">
<div class="content">
<img src="./images/fig_7_17.png" alt="fig 7 17">
</div>
<div class="title">Figure 66. Previewing the window</div>
</div>
<div class="paragraph">
<p>Of course, this window may need more work on styling controls and adjusting sizes and alignments, but as long as you understand how to lay out a scene, the shouldn&#8217;t be too difficult. Creating and applying CSS styles can make this windows a lot prettier.</p>
</div>
<div class="paragraph">
<p>Using Scene Builder&#8217;s menu File | Save save the layout in a file <em>border.fxml</em>. While you&#8217;ve been dragging and dropping components, Scene builder was working hard generating the corresponding FXML code in <em>border.fxml</em>. If you open this file in any text editor, its content may look similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tok-cp">&lt;?import javafx.scene.image.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.*?&gt;</span>
<span class="tok-cp">&lt;?import java.lang.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.*?&gt;</span>

<span class="tok-nt">&lt;BorderPane</span> <span class="tok-na">maxHeight=</span><span class="tok-s">&quot;-Infinity&quot;</span> <span class="tok-na">maxWidth=</span><span class="tok-s">&quot;-Infinity&quot;</span> <span class="tok-na">minHeight=</span><span class="tok-s">&quot;-Infinity&quot;</span> <span class="tok-na">minWidth=</span><span class="tok-s">&quot;-Infinity&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;400.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;600.0&quot;</span> <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://javafx.com/javafx/8&quot;</span> <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml/1&quot;</span><span class="tok-nt">&gt;</span>
   <span class="tok-nt">&lt;top&gt;</span>
      <span class="tok-nt">&lt;Label</span> <span class="tok-na">text=</span><span class="tok-s">&quot;This is the Header&quot;</span> <span class="tok-na">BorderPane.alignment=</span><span class="tok-s">&quot;CENTER&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/top&gt;</span>
   <span class="tok-nt">&lt;left&gt;</span>
      <span class="tok-nt">&lt;VBox</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;200.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">BorderPane.alignment=</span><span class="tok-s">&quot;CENTER&quot;</span><span class="tok-nt">&gt;</span>
         <span class="tok-nt">&lt;children&gt;</span>
            <span class="tok-nt">&lt;Button</span> <span class="tok-na">mnemonicParsing=</span><span class="tok-s">&quot;false&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;26.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;99.0&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Menu 1&quot;</span> <span class="tok-nt">/&gt;</span>
            <span class="tok-nt">&lt;Button</span> <span class="tok-na">mnemonicParsing=</span><span class="tok-s">&quot;false&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;26.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;99.0&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Menu 2&quot;</span> <span class="tok-nt">/&gt;</span>
            <span class="tok-nt">&lt;Button</span> <span class="tok-na">mnemonicParsing=</span><span class="tok-s">&quot;false&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;26.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;99.0&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Menu 3&quot;</span> <span class="tok-nt">/&gt;</span>
         <span class="tok-nt">&lt;/children&gt;</span>
      <span class="tok-nt">&lt;/VBox&gt;</span>
   <span class="tok-nt">&lt;/left&gt;</span>
   <span class="tok-nt">&lt;bottom&gt;</span>
      <span class="tok-nt">&lt;HBox</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;42.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;600.0&quot;</span> <span class="tok-na">BorderPane.alignment=</span><span class="tok-s">&quot;CENTER&quot;</span><span class="tok-nt">&gt;</span>
         <span class="tok-nt">&lt;children&gt;</span>
            <span class="tok-nt">&lt;Hyperlink</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Link 1&quot;</span> <span class="tok-nt">/&gt;</span>
            <span class="tok-nt">&lt;Hyperlink</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Link 2&quot;</span> <span class="tok-nt">/&gt;</span>
            <span class="tok-nt">&lt;Hyperlink</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Link 3&quot;</span> <span class="tok-nt">/&gt;</span>
         <span class="tok-nt">&lt;/children&gt;</span>
      <span class="tok-nt">&lt;/HBox&gt;</span>
   <span class="tok-nt">&lt;/bottom&gt;</span>
<span class="tok-nt">&lt;/BorderPane&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Don&#8217;t be overwhelmed with the amount of tags and attributes in the above code. You can identify the regions of the <code>BorderPane</code> layout. The <code>&lt;top&gt;</code> region contains a label, while the <code>left</code> and <code>&lt;bottom&gt;</code> regions have containers with their own layouts. In this example I have not used the <code>&lt;center&gt;</code> and <code>&lt;right&gt;</code> regions. Typically your program will be changing the content of the central area based on the user actions. For example, if the user clicks on the "Menu 1" button in the left region, JavaFX will generate a <em>clicked event</em> and you&#8217;ll show the content required for this selection in the central area.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll learn how to process events in the next chapter. Now it&#8217;s time to practice in working with combined layouts</p>
</div>
</div>
<div class="sect2">
<h3 id="_project_creating_a_gui_for_calculator">7.7. Project: Creating a GUI for Calculator</h3>
<div class="paragraph">
<p>Using Scene Builder and a combination of the <code>BorderPane</code> and <code>GridPane</code> layout create GUI for the calculator that looks as on Figure 1.  Add the <code>TextField</code> to the <code>north</code> region of the <code>BorderPane</code>. Then add a <code>GridPane</code> container to the <code>center</code> area - you&#8217;ll add buttons to this container.</p>
</div>
<div class="paragraph">
<p>Most of the calculators have a display field on top and the buttons just below it. As you can see on Figure 1, the grid with buttons has four columns and six rows. The default <code>GridPane</code> contains two columns and three rows. You&#8217;ll need to right-click on the grid and use the menus GridPane | Add Row Above and Add Column After to until you see a 4x6 grid as shown below.</p>
</div>
<div id="FIG7-18" class="imageblock">
<div class="content">
<img src="./images/fig_7_18.png" alt="fig 7 18">
</div>
<div class="title">Figure 67. The 4x6 GridPane in the center</div>
</div>
<div class="paragraph">
<p>Note that I set the <code>Padding</code> property to be 10 for all sides of the grid and the <code>Hgap</code> and <code>Vgap</code> to 5 (the gap between the cells).</p>
</div>
<div class="paragraph">
<p>Save the layout in the file <em>calculator.fxml</em>. Then drop a Button into the top left cell of the grid. Set the <code>Margin</code> property to 5 for each side of the button - this is the distance between the button and cell borders. Drag the button&#8217;s border to make it larger. This is what you should see:</p>
</div>
<div id="FIG7-19" class="imageblock">
<div class="content">
<img src="./images/fig_7_19.png" alt="fig 7 19">
</div>
<div class="title">Figure 68. The grid with one button</div>
</div>
<div class="paragraph">
<p>If you&#8217;re curious how this button looks in the <em>calculator.fxml</em>, open this file in any text editor and note the section <code>&lt;children&gt;</code> that in my case looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;children&gt;</span>
   <span class="tok-nt">&lt;Button</span> <span class="tok-na">mnemonicParsing=</span><span class="tok-s">&quot;false&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;37.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;132.0&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Button&quot;</span><span class="tok-nt">&gt;</span>
      <span class="tok-nt">&lt;GridPane.margin&gt;</span>
         <span class="tok-nt">&lt;Insets</span> <span class="tok-na">bottom=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">left=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">right=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">top=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;/GridPane.margin&gt;</span>
   <span class="tok-nt">&lt;/Button&gt;</span>
<span class="tok-nt">&lt;/children&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There is no indication of the cell (0,0) because zeros are the default values for <code>GridPane.columnIndex</code> and <code>GridPane.rowIndex</code> properties. Now you need to replicate this button in other cells. You can use multiple Ctrl-C/Ctrl-V commands and then drag/drop the buttons into other cells. See how the content of the <em>calculator.fxml</em> changes as you add more buttons. I find it faster copy/pasting the generated code in the FXML file than using Scene Builder for mass duplication.</p>
</div>
<div class="paragraph">
<p>Note that on Figure 1, the button with coordinates (0,5) spans two columns, and the button with coordinates (3,4) spans two rows. For these buttons you&#8217;ll need to enter 2 as the row (or column) span, and select <code>MAX_VALUE</code> as maximum width (or height).  This is what you should see by now:</p>
</div>
<div id="FIG7-20" class="imageblock">
<div class="content">
<img src="./images/fig_7_20.png" alt="fig 7 20">
</div>
<div class="title">Figure 69. Replicated buttons</div>
</div>
<div class="paragraph">
<p>Change the text of each button to look as in Figure 1, and the layout is done.</p>
</div>
<div class="paragraph">
<p>Then create a new JavaFX project Calculator in IDEA and replace the generated <em>sample.fxml</em> with <em>calculator.fxml</em> created by Scene Builder. Modify the generated class <code>Main</code> to use <em>calculator.fxml</em>. Rename the package from <em>sample</em> to <em>mycalculator</em>. Set the size of the scene to be large enough to accommodate your design. This is how my class <code>Main</code> looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Main</span> <span class="tok-kd">extends</span> <span class="tok-n">Application</span> <span class="tok-o">{</span>

  <span class="tok-nd">@Override</span>
  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">start</span><span class="tok-o">(</span><span class="tok-n">Stage</span> <span class="tok-n">primaryStage</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span><span class="tok-o">{</span>
      <span class="tok-n">Parent</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-n">FXMLLoader</span><span class="tok-o">.</span><span class="tok-na">load</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">().</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;calculator.fxml&quot;</span><span class="tok-o">));</span>
      <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setTitle</span><span class="tok-o">(</span><span class="tok-s">&quot;My JavaFX Calculator&quot;</span><span class="tok-o">);</span>
      <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span><span class="tok-mi">650</span><span class="tok-o">,</span><span class="tok-mi">600</span><span class="tok-o">));</span>
      <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">show</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">launch</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the <code>Main</code> program from IDEA to ensure that your calculator looks as expected. Don&#8217;t allow the users to resize your calculator by invoking the method <code>setResizable</code> on the stage object.</p>
</div>
<div class="paragraph">
<p>Then create a CSS file to add some cool styling to the calculator&#8217;s buttons. Save the CSS file in your IDEA project and modify the code of the <code>Main</code> class to use your CSS file similarly to how it was done in the section "Styling With CSS" above. Make your calculator look better than mine - it&#8217;s not too difficult.</p>
</div>
<div class="paragraph">
<p>After completing this assignment your buttons won&#8217;t work just yet. In the next chapter you&#8217;ll learn how to make the buttons (or other components) to react on user actions, so you&#8217;ll be able to complete the calculator. In this chapter my goal was to introduce you to basic rules of designing JavaFX GUI with the help of Scene Builder. Watch <a href="http://www.youtube.com/watch?v=ij0HwRAlCmo">this YouTube video</a> to see how easy it is to design more complex views with Scene Builder.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_programming_user_interaction_in_javafx">8. Programming User Interaction in JavaFX</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After the GUI design is done, we need hook it up with the  application code written in Java. The Sign In and Calculator windows from Chapter 7 look good, but none of them would react on user&#8217;s actions. No matter how hard you click on the Sign In or calculator&#8217;s buttons, nothing will happen because we didn&#8217;t teach these application how to react on user-generated events. Events are notifications that something important for the application has happened (e.g. the user clicked on the button). In this chapter I&#8217;ll explain you how to write code to handle some of such events.</p>
</div>
<div class="paragraph">
<p>When IDEA creates a new JavaFX project it generates an empty class <code>Controller</code>, which is a right place for the code that communicates with GUI components. In this chapter we&#8217;ll establish a link between GUI and the controller. We&#8217;ll also add event handlers and will right code to modify the GUI. I&#8217;ll continue working with FXML samples created in the previous chapter, but this time the GUI events will be handled by the code from the controller class.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll learn how data binding can make automatically update the properties of a GUI component if a property of a Java controller class changes. I&#8217;ll also show the wrong and the right way of updating the GUI to make the used interaction more responsive.</p>
</div>
<div class="sect2">
<h3 id="_events">8.1. Events</h3>
<div class="paragraph">
<p>JavaFX applications have to deal with various events. For example, a button click, a mouse move etc. When the event happens, the event object is represented by the one of the subclasses of the class <code>Event</code> located in the packages <code>javafx.event</code> and <code>javafx.scene.input</code>. You need to decide what events are important to your program and, as the programmers say, "listen to these events". You&#8217;ll always write event handlers (a.k.a. event listeners) in Java, but there are different ways of assigning event handlers to GUI elements. If your GUI is designed using FXML, you&#8217;ll need to specify the name of your controller class right in the FXML file. If your GUI is designed with Java, using a separate controller class is not a must, but is a good idea if your code has to process multiple events.</p>
</div>
<div id="FIG8-1-0" class="imageblock">
<div class="content">
<img src="./images/fig_8-01-2.png" alt="fig 8 01 2">
</div>
</div>
<div class="paragraph">
<p>You can create an instance of your controller class either with the <code>new</code> operator or <em>inject</em> it into Java code. I&#8217;ll explain you what injection means in a bit.</p>
</div>
<div class="sect3">
<h4 id="_assigning_event_handlers_in_fxml">8.1.1. Assigning Event Handlers in FXML</h4>
<div class="paragraph">
<p>Scene Builder allows you not only to design and arrange the GUI components on the scene, but also assign the Java code that will be handing events. We&#8217;ll stick to our principles of separating GUI and application logic, and will keep the GUI in <code>.fxml</code> file, but application logic will be programmed in Java.</p>
</div>
<div class="paragraph">
<p>In Scene Builder you may have noticed the <em>Controller</em> bar in the bottom left corner. This is the place were you can specify a Java class that will contain event handling code and may use other classes implementing application logic. You can also open your <code>.fxml</code> file in the text editor and type in the name of the controller class there. If you&#8217;ll look at any of the FXML files from Chapter 7, you&#8217;ll see that the name of the controller was specified there when IDEA generated the project for us.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_controller_to_sign_in_application">8.1.2. Adding Controller to Sign In application</h4>
<div class="paragraph">
<p>To illustrate the use of controllers, I&#8217;ll continue working on the sample Sign In project from Chapter 7. It has a file <code>signin.fxml</code> that includes the <code>GridPane</code> tag as a root element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;GridPane</span> <span class="tok-na">hgap=</span><span class="tok-s">&quot;10&quot;</span> <span class="tok-na">vgap=</span><span class="tok-s">&quot;10&quot;</span>
    <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://javafx.com/javafx/8&quot;</span> <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml/1&quot;</span> <span class="tok-na">fx:controller=</span><span class="tok-s">&quot;signin.Controller&quot;</span><span class="tok-nt">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>hgap</code> and <code>vgap</code> attributes specify the padding between the grid grid columns and rows. The <code>xmlns</code> attributes specify so called namespaces required for proper parsing of FXML files. And the attribute <code>fx:controller</code> specifies the full name of the class <code>Controller</code>, which in our project is located in the package <code>signin</code>.</p>
</div>
<div class="paragraph">
<p>When the file <code>signin.fxml</code> is loaded, <code>FXMLLoader</code> creates an instance of the Java class based on the FXML content and then instantiates and injects the`signin.Controller` object into the GUI object. The word <em>inject</em> describes the process when a runtime automatically instantiate a class B and make it available in class A. For us it means that there is no  need to manually create an instance of the <code>signin.Controller</code> by using the <code>new</code> operator.</p>
</div>
<div class="paragraph">
<p>The first version of the <code>Controller</code> class is shown next:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">signin</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">javafx.event.ActionEvent</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Controller</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">signInClicked</span><span class="tok-o">(</span><span class="tok-n">ActionEvent</span> <span class="tok-n">evt</span><span class="tok-o">){</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello from signInClicked method in controller&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The class <code>Controller</code> uses the class <code>ActionEvent</code> from package <code>javafx.event</code>, and I want to warn you - be careful when IDE will offer to insert an import statement for you. There is also an <code>ActionEvent</code> in the package <code>java.awt.event</code>, which we don&#8217;t want in JavaFX applications.</p>
</div>
<div class="paragraph">
<p>We want the method <code>signInClicked</code> to be called on the controller if the user clicks on the button. For this to happen, we can specify the name of this method as a handler of the <code>onAction</code> property in the <code>&lt;Button&gt;</code> element in <code>signin.fxml</code> as shown on Figure 8-2.</p>
</div>
<div id="FIG8-1" class="imageblock">
<div class="content">
<img src="./images/fig_8_01.png" alt="fig 8 01">
</div>
<div class="title">Figure 70. Mapping onAction property to the signInClicked method</div>
</div>
<div class="paragraph">
<p>If you run the <code>Main</code> program and click three times on the button Sign In, the console will print the hello message three times as shown on Figure 8-3.</p>
</div>
<div id="FIG8-2" class="imageblock">
<div class="content">
<img src="./images/fig_8_02.png" alt="fig 8 02">
</div>
<div class="title">Figure 71. After clicking 3 times on Sign In button</div>
</div>
<div class="paragraph">
<p>So there is a link between the GUI and the controller. If we had several buttons on the GUI, we could either map each of them to a separate method in controller, or have one method for all buttons with the code recognizing which button was clicked. The controller will invoke your event handler providing the <code>ActionEvent</code> object as an argument. Its property <code>target</code> identifies, well the target of the event, which is a Sign In button in our case.</p>
</div>
<div class="paragraph">
<p>I ran our application in the debug mode just to show you that the <code>target</code> property on the <code>ActionEvent</code> correctly recognizes the event target shown in Figure 8-4.</p>
</div>
<div id="FIG8-3" class="imageblock">
<div class="content">
<img src="./images/fig_8_03.png" alt="fig 8 03">
</div>
<div class="title">Figure 72. Viewing properties of ActionEvent in debugger</div>
</div>
<div class="paragraph">
<p>The <code>ActionEvent</code> has another property called <code>source</code>, which has the same value as <code>target</code> in our application. There are cases when <code>source</code> and <code>target</code> are different because an event travels through all containers until it reaches the target.  Then it <em>bubles up</em> through all the containers. This is an advanced topic, but I still want to give you an illustration.</p>
</div>
<div class="paragraph">
<p>While handling button clicks, you don&#8217;t really care where exactly inside the button was the mouse pointer when the user clicked on the button. So handing <code>ActionEvent</code> was sufficient. But there is another event called <code>MouseEvent</code>, which gives you more details on the click event like the mouse pointer coordinate, if some of the keys were down during the click and some other information.</p>
</div>
<div class="paragraph">
<p>In <code>signin.fxml</code> you&#8217;re allowed to use <code>onMouseClicked</code> instead of <code>onAction</code> for the button. But if you do so, the <code>Button</code> will be considered a container for a special skin class <code>LabeledText</code> with the text <em>Sign In</em>, and if you click on the words <em>Sign In</em> the source of the event will be <code>Button</code>, and the target would be the class <code>LabeledSkin</code>. Just for the illustration purposes I&#8217;ve created an event handler <code>signInMouseClicked</code> and ran it through a debugger. Now the source and target of the event are different.</p>
</div>
<div id="FIG8-4" class="imageblock">
<div class="content">
<img src="./images/fig_8_04.png" alt="fig 8 04">
</div>
<div class="title">Figure 73. Viewing properties of MouseEvent in debugger</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_exchange_between_gui_components_and_controller">8.1.3. Data Exchange Between GUI Components And Controller</h4>
<div class="paragraph">
<p>Now that we know how to link controller&#8217;s event handlers to FXML components, the next question is how to read/write data from/to these components. In case of Sign In application we need to know what ID/password the user entered and update the GUI from the controller accordingly.</p>
</div>
<div class="paragraph">
<p>To read the values from GUI components we&#8217;ll need to give them unique id&#8217;s in the FXML file. We don&#8217;t need to give id&#8217;s to all components - only to those that we want to process in the controller&#8217;s code. Take a look at the <code>&lt;childrens&gt;</code> section of <code>signin.fxml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;children&gt;</span>
   <span class="tok-nt">&lt;Label</span> <span class="tok-na">alignment=</span><span class="tok-s">&quot;CENTER&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;User ID:&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;Label</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Password:&quot;</span>  <span class="tok-na">styleClass=</span><span class="tok-s">&quot;bluelabel&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;Button</span> <span class="tok-na">id=</span><span class="tok-s">&quot;submitBtn&quot;</span> <span class="tok-na">mnemonicParsing=</span><span class="tok-s">&quot;false&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;300.0&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Sign In&quot;</span>
           <span class="tok-na">GridPane.columnSpan=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;2&quot;</span>
           <span class="tok-na">onAction=</span><span class="tok-s">&quot;#signInClicked&quot;</span><span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;TextField</span> <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;id&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;PasswordField</span> <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;pwd&quot;</span><span class="tok-nt">/&gt;</span>
<span class="tok-nt">&lt;/children&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Only the <code>TextField</code> and <code>PasswordField</code> have an attribute <code>fx:id</code> - this is how you can assign id&#8217;s in fxml. The next step is to inject references to these GUI components  into the variables in the <code>Controller</code> class. The following code fragment shows how to inject component references into the <code>id</code> and <code>pwd</code> fields. I&#8217;ve declared two Java variables in the <code>Controller</code> class with the names that match those from <code>signin.fxml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">TextField</span> <span class="tok-n">id</span><span class="tok-o">;</span>

<span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">PasswordField</span> <span class="tok-n">pwd</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Java has so called <a href="http://docs.oracle.com/javase/tutorial/java/annotations/">annotations</a> (not covered in this book). They start with the <code>@</code> sign and can be placed in front of the variable, class, or a method declaration depending on how the annotation was defined. Some annotations are used by Java compiler, and some by the JVM. The JavaFX annotation <code>@FXML</code> instructs runtime to inject the references to the specifies GUI objects into the variables.</p>
</div>
<div class="paragraph">
<p>In other words, JavaFX runtime will read the first line as follows: <em>"I need to get the object that I created after loading <code>signin.fxml</code> file, and find the component with an the <code>fx:id="id"</code> inside this object. Finally, I need to insert the reference to this component into the Java variable <code>id</code>"</em>. The same applies to the variable <code>pwd</code>.</p>
</div>
<div class="paragraph">
<p>The rest is easy. Just use the injected values in you event handler. The code of our <code>Controller</code> is shown next. Its method <code>signInClicked</code> checks the value entered in the User ID field in the GUI, and if it&#8217;s not equal to "Yakov", then the code sets the background of the GUI component to the light pink color.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Controller</span> <span class="tok-o">{</span>

  <span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">TextField</span> <span class="tok-n">id</span><span class="tok-o">;</span>            <b class="conum">(1)</b>

  <span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">PasswordField</span> <span class="tok-n">pwd</span><span class="tok-o">;</span>       <b class="conum">(1)</b>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">signInClicked</span><span class="tok-o">(</span><span class="tok-n">ActionEvent</span> <span class="tok-n">evt</span><span class="tok-o">){</span>

    <span class="tok-n">String</span> <span class="tok-n">userID</span> <span class="tok-o">=</span> <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>      <b class="conum">(2)</b>
    <span class="tok-n">String</span> <span class="tok-n">password</span> <span class="tok-o">=</span> <span class="tok-n">pwd</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>   <b class="conum">(2)</b>

    <span class="tok-k">if</span> <span class="tok-o">(!</span><span class="tok-s">&quot;Yakov&quot;</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">userID</span><span class="tok-o">)){</span>      <b class="conum">(3)</b>
      <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color:lightpink;&quot;</span><span class="tok-o">);</span> <b class="conum">(4)</b>
    <span class="tok-o">}</span> <span class="tok-k">else</span><span class="tok-o">{</span>
      <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color:white;&quot;</span><span class="tok-o">);</span>    <b class="conum">(5)</b>
    <span class="tok-o">}</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;got id:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">userID</span> <span class="tok-o">+</span> <span class="tok-s">&quot;, got password: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">password</span><span class="tok-o">);</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello from signInClicked method in controller&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Inject the references to GUI components into member variables.</p>
</li>
<li>
<p>Extract the text from the GUI objects</p>
</li>
<li>
<p>Has the user not entered Yakov in the User ID field? We use the negation operator <code>!</code> here.</p>
</li>
<li>
<p>Set the background color to <code>lightpink</code> if the entered user id is not Yakov. You can find major CSS color names at <a href="http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html" class="bare">http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html</a></p>
</li>
<li>
<p>Set the background color to back to <code>white</code> if the entered user id is not Yakov.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you run the <code>Main</code> program and enter the wrong user id, the window will look as follows:</p>
</div>
<div id="FIG8-5" class="imageblock">
<div class="content">
<img src="./images/fig_8_05.png" alt="fig 8 05">
</div>
<div class="title">Figure 74. After entering the wrong user id</div>
</div>
</div>
<div class="sect3">
<h4 id="_assigning_event_handlers_in_java">8.1.4. Assigning Event Handlers in Java</h4>
<div class="paragraph">
<p>If your program is written completely in Java without any use of FXML, you&#8217;ll be assigning event handlers using so called <a href="http://docs.oracle.com/javafx/2/events/convenience_methods.htm">convenience methods</a> that have names that start with <code>setOn</code> like <code>setOnAction</code>, <code>setOnKeyTyped</code>, <code>setOnEditStart</code> etc. Each of the GUI components has has several of such methods.</p>
</div>
<div class="paragraph">
<p>You can provide event handling code to the convenience methods using anonymous classes, lambda expressions, or <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html">method references</a> (not covered in this book). Implementing event handlers as lambda expressions as they are easier to write. Typically, you&#8217;ll be writing code to react if some event has happened. For example, if you have a button represented by a variable <code>myButton</code> you can write an event handler for the click event:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Button</span> <span class="tok-n">signInButton</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Button</span><span class="tok-o">(</span><span class="tok-s">&quot;Sign In&quot;</span><span class="tok-o">);</span>
<span class="tok-n">signInButton</span><span class="tok-o">.</span><span class="tok-na">setOnAction</span><span class="tok-o">(</span><span class="tok-n">evt</span> <span class="tok-o">-&gt;</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The Sign In button was clicked.&quot;</span><span class="tok-o">)</span>
<span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ve got introduced to lambda expressions in Chapter 5. The above code snippet means that lambda expression gets the event object as an argument, but doesn&#8217;t really use its values but just prints the message that the button was clicked.</p>
</div>
<div class="paragraph">
<p>What&#8217;s the type of the <code>evt</code> argument? Java compiler will figure it out automatically. Since the method <code>setOnAction</code> expects to get the <code>ActionEvent</code> object from the JVM, compiler guesses that the type of the <code>evt</code> is <code>ActionEvent</code> so you don&#8217;t even need to write it in the program code. You&#8217;ve seen a similar example of of type inference in Chapter 5.</p>
</div>
<div class="paragraph">
<p>To bring all pieces of the puzzle together, I&#8217;ll show you another version of the Sign In application that will look the same, but won&#8217;t use FXML - everything will be programmed in Java. The following class <code>MainPureJava</code> and <code>signin.css</code> is all we need for programming the functionality of our Sign In window. There is not need to use <code>signin.fxml</code> or <code>Controller.java</code> in this case.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">signin</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">javafx.application.Application</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.geometry.Insets</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.geometry.Pos</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.*</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MainPureJava</span> <span class="tok-kd">extends</span> <span class="tok-n">Application</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">start</span><span class="tok-o">(</span><span class="tok-n">Stage</span> <span class="tok-n">primaryStage</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">TWO_COLUMN_SPAN</span> <span class="tok-o">=</span> <span class="tok-mi">2</span><span class="tok-o">;</span>               <b class="conum">(1)</b>

    <span class="tok-n">Label</span> <span class="tok-n">userIdLbl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Label</span><span class="tok-o">(</span><span class="tok-s">&quot;User ID:&quot;</span><span class="tok-o">);</span>     <b class="conum">(2)</b>
    <span class="tok-n">TextField</span> <span class="tok-n">userIdTxt</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">TextField</span><span class="tok-o">();</span>
    <span class="tok-n">Label</span> <span class="tok-n">userPwdLbl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Label</span><span class="tok-o">(</span><span class="tok-s">&quot;Password:&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">userPwdLbl</span><span class="tok-o">.</span><span class="tok-na">getStyleClass</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;bluelabel&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">PasswordField</span> <span class="tok-n">userPwdTxt</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">PasswordField</span><span class="tok-o">();</span>

    <span class="tok-n">GridPane</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">GridPane</span><span class="tok-o">();</span>              <b class="conum">(3)</b>
    <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">setVgap</span><span class="tok-o">(</span><span class="tok-mi">20</span><span class="tok-o">);</span>
    <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">setPadding</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Insets</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">));</span>
    <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">setAlignment</span><span class="tok-o">(</span><span class="tok-n">Pos</span><span class="tok-o">.</span><span class="tok-na">CENTER</span><span class="tok-o">);</span>
    <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">setId</span><span class="tok-o">(</span><span class="tok-s">&quot;root&quot;</span><span class="tok-o">);</span>

    <span class="tok-c1">// Setting constraints for firs 2 rows</span>
    <span class="tok-n">GridPane</span><span class="tok-o">.</span><span class="tok-na">setConstraints</span><span class="tok-o">(</span><span class="tok-n">userIdLbl</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>    <b class="conum">(4)</b>
    <span class="tok-n">GridPane</span><span class="tok-o">.</span><span class="tok-na">setConstraints</span><span class="tok-o">(</span><span class="tok-n">userIdTxt</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
    <span class="tok-n">GridPane</span><span class="tok-o">.</span><span class="tok-na">setConstraints</span><span class="tok-o">(</span><span class="tok-n">userPwdLbl</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">);</span>
    <span class="tok-n">GridPane</span><span class="tok-o">.</span><span class="tok-na">setConstraints</span><span class="tok-o">(</span><span class="tok-n">userPwdTxt</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">1</span><span class="tok-o">);</span>

    <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">getChildren</span><span class="tok-o">().</span><span class="tok-na">addAll</span><span class="tok-o">(</span><span class="tok-n">userIdLbl</span><span class="tok-o">,</span> <span class="tok-n">userIdTxt</span><span class="tok-o">,</span>
    <span class="tok-n">userPwdLbl</span><span class="tok-o">,</span> <span class="tok-n">userPwdTxt</span><span class="tok-o">);</span>                      <b class="conum">(5)</b>


    <span class="tok-n">Button</span> <span class="tok-n">signInBtn</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Button</span> <span class="tok-o">(</span><span class="tok-s">&quot;Sign In&quot;</span><span class="tok-o">);</span>    <b class="conum">(6)</b>
    <span class="tok-n">signInBtn</span><span class="tok-o">.</span><span class="tok-na">setId</span><span class="tok-o">(</span><span class="tok-s">&quot;submitBtn&quot;</span><span class="tok-o">);</span>  <span class="tok-c1">// used in CSS</span>

    <span class="tok-c1">// Event handler with lambda expression</span>
    <span class="tok-n">signInBtn</span><span class="tok-o">.</span><span class="tok-na">setOnAction</span><span class="tok-o">(</span><span class="tok-n">evt</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>                 <b class="conum">(7)</b>

        <span class="tok-n">String</span> <span class="tok-n">userID</span> <span class="tok-o">=</span> <span class="tok-n">userIdTxt</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>
        <span class="tok-n">String</span> <span class="tok-n">password</span> <span class="tok-o">=</span> <span class="tok-n">userPwdTxt</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>
        <span class="tok-k">if</span> <span class="tok-o">(!</span><span class="tok-s">&quot;Yakov&quot;</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">userID</span><span class="tok-o">)){</span>
            <span class="tok-n">userIdTxt</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color: lightpink;&quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span> <span class="tok-k">else</span><span class="tok-o">{</span>
            <span class="tok-n">userIdTxt</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color: white;&quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Got id &quot;</span> <span class="tok-o">+</span> <span class="tok-n">userID</span> <span class="tok-o">+</span>
                           <span class="tok-s">&quot; and password &quot;</span> <span class="tok-o">+</span> <span class="tok-n">password</span><span class="tok-o">);</span>
    <span class="tok-o">});</span>

    <span class="tok-c1">// Allow the button to be wider</span>
    <span class="tok-n">signInBtn</span><span class="tok-o">.</span><span class="tok-na">setPrefWidth</span><span class="tok-o">(</span><span class="tok-n">Double</span><span class="tok-o">.</span><span class="tok-na">MAX_VALUE</span><span class="tok-o">);</span>

    <span class="tok-c1">// Adding a wide button to the third row</span>
    <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">signInBtn</span><span class="tok-o">,</span><span class="tok-mi">0</span><span class="tok-o">,</span><span class="tok-mi">2</span><span class="tok-o">,</span><span class="tok-n">TWO_COLUMN_SPAN</span><span class="tok-o">,</span><span class="tok-mi">1</span><span class="tok-o">);</span>

    <span class="tok-n">Scene</span> <span class="tok-n">scene</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span><span class="tok-mi">250</span><span class="tok-o">,</span><span class="tok-mi">180</span><span class="tok-o">);</span>
    <span class="tok-n">scene</span><span class="tok-o">.</span><span class="tok-na">getStylesheets</span><span class="tok-o">()</span>                         <b class="conum">(8)</b>
         <span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">()</span>
         <span class="tok-o">.</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;signin.css&quot;</span><span class="tok-o">)</span>
         <span class="tok-o">.</span><span class="tok-na">toExternalForm</span><span class="tok-o">());</span>

    <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-n">scene</span><span class="tok-o">);</span>                  <b class="conum">(9)</b>
    <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">show</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-n">launch</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This programs uses the <code>GridPane</code> layout with three rows and two column. Since the Sign In button will span tho columns, I declared a final variable <code>TWO_COLUMN_SPAN</code> that will be used when the button will be added to the grid.</p>
</li>
<li>
<p>Then I instantiate labels and text fields.</p>
</li>
<li>
<p>After that I create an instance of the <code>GridPane</code> container.</p>
</li>
<li>
<p>To add the labels and text fields to the proper cells of the first two rows of the grid, I set the constraints on the <code>GridPane</code> object.</p>
</li>
<li>
<p>The GUI components for the first two rows are instantiated, constraints are set so I add them as children to the root of the <em>scene graph</em> - the <code>GridPane</code>.</p>
</li>
<li>
<p>Now I create the instance if the Sign In button and give it an id. This was explained in the "Styling with CSS" section in Chapter 7.</p>
</li>
<li>
<p>This lambda expression implements the application logic to be invoked as a reaction to the <code>ActionEvent</code>.</p>
</li>
<li>
<p>We create a scene object an apply the CSS to it. This is probably the first time you see so called <em>method chaining</em>. All these lines that starts with dots are methods chained together - all of them are sequentially invoked on the scene object.</p>
</li>
<li>
<p>Finally, the scene is added to the stage and the curtain goes up.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Some programmers prefer working GUI designer tools where they can drag and drop components. Some prefer writing Java code for UI. I like the declarative way of designing GUI components with FXML, because it&#8217;s just more productive. The fact that FXML separates the screen design from the application logic, even a person who doesn&#8217;t know programming (e.g. a UI designer) can master Scene Builder and create nice GUI layouts allowing programmers to take care of application logic.</p>
</div>
</div>
<div class="sect3">
<h4 id="_further_reading_on_event_handling">8.1.5. Further Reading on Event Handling</h4>
<div class="paragraph">
<p>I&#8217;ve covered the basics of event handling using the <code>ActionEvent</code> and <code>onAction</code> event handler as an example. Some other examples of the events are:`KeyEvent` (the user pressed a key on the keyboard), <code>MouseEvent</code>(the user pressed the mouse key and we need to know coordinates of the mouse pointer), <code>TouchEvent</code> (the user touched the screen), <code>WindowEvent</code> (e.g. the user is about to close the window) et al. For more detailed explanation of JavaFX events visit Oracle&#8217;s tutorial about handling events at <a href="http://docs.oracle.com/javafx/2/events/jfxpub-events.htm" class="bare">http://docs.oracle.com/javafx/2/events/jfxpub-events.htm</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_binding_and_properties">8.2. Data Binding and Properties</h3>
<div class="paragraph">
<p>JavaFX has the interface <code>Property</code> located in the package <code>javafx.beans.property</code>, which defines a very useful functionality allowing to <em>bind</em> the GUI components with properties of other Java objects. If a property on a Java object changes, the new value will be automatically reflected on the appropriate GUI component and visa versa. Bi-directional binding is available too, so no matter what changes - the GUI or the Java object - the other party will be immediately notified.</p>
</div>
<div class="paragraph">
<p>Imagine that you&#8217;re developing a multi-player game that has a Java object receiving the moves of other gamers from a central server. When a Java object receives a new move, you need to modify the content of the corresponding GUI component of the game. With JavaFX you can simply bind a property of a Java class that stores player&#8217;s moves (e.g. <code>playersMove</code>) to the property of, say a <code>Label</code> component on the GUI. No more coding required. As soon as the <code>playersMove</code> value changes, the <code>Label</code> will be automatically updated.  JavaFX properties greatly simplify the process of synchronization of the data and the GUI.</p>
</div>
<div class="paragraph">
<p>Existing implementations of the <code>Property</code> interface add  the change notification functionality to regular class attributes. The interface <code>Property</code> declares the following methods: <code>bind</code>, <code>unbind</code>, <code>bindBidirectional</code> , <code>unbindBidirctional</code>, and <code>isBound</code>. You can bind to a JavaFX property only the value of an <code>ObservableValue</code> type, which is explained in the sidebar.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Design Patterns Briefly</div>
<div class="paragraph">
<p>Over the years software developers came up with a number of <em>design patterns</em>, which are reusable solutions for various programming tasks. Programmers casually use design pattern names in their conversations and technical literature. For example, one programmer can say to another , "You&#8217;d better implement MVC in this program" and both understand what this means. Let me explain you briefly a couple of design patterns - MVC and Observer - so you&#8217;ll be a little better prepared for chatting with programmers.</p>
</div>
<div class="paragraph">
<p><strong>MVC</strong> stands for Mode View Controller. This design pattern recommends separating the code that stores application data (Model) from the code implementing the user interface (View) and from the code that controls the data exchange and implements application logic (Controller). As a matter of fact we&#8217;ve almost implemented MVC in one of the versions of the Sign In application. The file <code>signin.fxml</code> was a view, and the class <code>Controller</code> played a role of a controller. Since this example had just two variables (<code>id</code> and <code>pwd</code>) we didn&#8217;t create a special model class for them.</p>
</div>
<div class="paragraph">
<p><strong>Observer</strong> design pattern is used to implement scenarios when one object, a.k.a. the observer needs to watch changes in other object(s), the observables. For example, if a Twitter user (the observable) posts a twit all of his followers (observers) will get notified. If a programming language or a library supports data binding, implementing the observer design pattern becomes pretty easy, which you&#8217;ll see later in this chapter.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re interested in detailed coverage of design patterns, get the book "Head First Design Patterns" published by O&#8217;Reilly Media.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Classes that implement <code>Property</code> interface are located in the package <code>javafx.beans.property</code>. For each property type there are two classes: one that allows only reading property values and the other one for read and writing (changing the values). For example, if you need a <code>String</code> property, use either <code>ReadOnlyStringWrapper</code> or <code>SimpleStringProperty</code>. Similarly named classes exist for other data types and some collections too.</p>
</div>
<div class="paragraph">
<p>As we always do in this book, let&#8217;s learn by coding. I&#8217;ll continue adding features to our Sign In application. This time I&#8217;ll add a <code>Label</code> component with <code>fx:id="errMsg"</code> to the view in FXML file to display sign in error messages, if any. In the controller class I&#8217;ll add the corresponding variable <code>errMsg</code> and will inject a reference to the <code>Label</code> into this variable.</p>
</div>
<div class="paragraph">
<p>The next step is to declare a <em>bindable</em> property <code>signinError</code> in the class <code>Controller</code> that will get the value of the error message if any. But since a regular <code>String</code> can&#8217;t be bindable, we&#8217;ll use the data type <code>SimpleStringProperty</code></p>
</div>
<div class="paragraph">
<p>Finally, I&#8217;ll bind the label to the variable to insure that an error message is immediately displayed on the screen as soon as its value changes.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s place an additional <code>Label</code> component at the bottom of the Sign In window. I&#8217;ll add another row to the <code>GridPane</code> and place there a <code>Label</code> that will span two columns. This label will have <code>fx:id="errMsg"</code> and initially won&#8217;t  have any text - it&#8217;ll be invisible. The <code>&lt;children&gt;</code> section of the FXML file will look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;children&gt;</span>
      <span class="tok-nt">&lt;Label</span> <span class="tok-na">alignment=</span><span class="tok-s">&quot;CENTER&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;User ID:&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;TextField</span> <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span>  <span class="tok-na">fx:id=</span><span class="tok-s">&quot;id&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;Label</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Password:&quot;</span>  <span class="tok-na">styleClass=</span><span class="tok-s">&quot;bluelabel&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;PasswordField</span> <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;pwd&quot;</span><span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;Button</span> <span class="tok-na">id=</span><span class="tok-s">&quot;submitBtn&quot;</span> <span class="tok-na">mnemonicParsing=</span><span class="tok-s">&quot;false&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;300.0&quot;</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Sign In&quot;</span>
              <span class="tok-na">GridPane.columnSpan=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;2&quot;</span>
              <span class="tok-na">onAction=</span><span class="tok-s">&quot;#signInClicked&quot;</span><span class="tok-nt">/&gt;</span>
       <span class="tok-nt">&lt;Label</span> <span class="tok-na">alignment=</span><span class="tok-s">&quot;CENTER&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;3&quot;</span>
              <span class="tok-na">GridPane.columnSpan=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;300.0&quot;</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;errMsg&quot;</span><span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/children&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Injecting a reference of the new label into controller and declaring a property to store the error message will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">Label</span> <span class="tok-n">errMsg</span><span class="tok-o">;</span>

<span class="tok-n">SimpleStringProperty</span> <span class="tok-n">signinError</span> <span class="tok-o">=</span>
                        <span class="tok-k">new</span> <span class="tok-nf">SimpleStringProperty</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The next question is when and where do the binding? If I&#8217;d be creating an instance of the <code>Controller</code> with the <code>new</code> operator I could have done it in the class constructor after the GUI component are created. But JavaFX runtime instantiates the <code>Controller</code> for us, so how can we catch the moment when the GUI components are ready?</p>
</div>
<div class="paragraph">
<p>In JavaFX if you&#8217;ll add to the controller the method <code>initialize</code> annotated with <code>@FXML</code>, <code>FXMLLoader</code> will invoke it after all GUI components are constructed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-nd">@FXML</span> <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">initialize</span><span class="tok-o">()</span> <span class="tok-o">{</span>

  <span class="tok-n">errMsg</span><span class="tok-o">.</span><span class="tok-na">textProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">signinError</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>JavaFX properties are <em>observables</em>. So you can read the above code as follows: <em>"I want the text property of the label <code>errMsg</code> to be the observer (a.k.a. listener) to the property <code>signinError</code> (observable). So whenever <code>signinError</code> changes, the text property of the label will get the latest value."</em></p>
</div>
<div class="paragraph">
<p>To complete the Sign In example with the binding, the event handler for the Sign In button should not only paint the wrong ID in light pink, but also modify the value of the <code>signinError</code> property. The complete code of the class <code>BindableController</code> is shown next.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">BindingController</span> <span class="tok-o">{</span>

  <span class="tok-nd">@FXML</span>
  <span class="tok-kd">private</span> <span class="tok-n">TextField</span> <span class="tok-n">id</span><span class="tok-o">;</span>

  <span class="tok-nd">@FXML</span>
  <span class="tok-kd">private</span> <span class="tok-n">PasswordField</span> <span class="tok-n">pwd</span><span class="tok-o">;</span>

  <span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">Label</span> <span class="tok-n">errMsg</span><span class="tok-o">;</span>

  <span class="tok-n">SimpleStringProperty</span> <span class="tok-n">signinError</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleStringProperty</span><span class="tok-o">();</span>

  <span class="tok-nd">@FXML</span> <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">initialize</span><span class="tok-o">()</span> <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Controller&#39;s ready. Let&#39;s bind some components&quot;</span><span class="tok-o">);</span>

      <span class="tok-n">errMsg</span><span class="tok-o">.</span><span class="tok-na">textProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">signinError</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">signInClicked</span><span class="tok-o">(</span><span class="tok-n">ActionEvent</span> <span class="tok-n">evt</span><span class="tok-o">){</span>

      <span class="tok-n">String</span> <span class="tok-n">userID</span> <span class="tok-o">=</span> <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>
      <span class="tok-n">String</span> <span class="tok-n">password</span> <span class="tok-o">=</span> <span class="tok-n">pwd</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>
      <span class="tok-k">if</span> <span class="tok-o">(!</span><span class="tok-s">&quot;Yakov&quot;</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">userID</span><span class="tok-o">)){</span>
          <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color: lightpink;&quot;</span><span class="tok-o">);</span>
          <span class="tok-n">signinError</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-s">&quot;Wrong id:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">userID</span><span class="tok-o">);</span>

      <span class="tok-o">}</span> <span class="tok-k">else</span><span class="tok-o">{</span>
          <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color: white;&quot;</span><span class="tok-o">);</span>
          <span class="tok-n">signinError</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">);</span>
      <span class="tok-o">}</span>

      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;got id:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">userID</span> <span class="tok-o">+</span> <span class="tok-s">&quot;, got password: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">password</span><span class="tok-o">);</span>

      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello from signInClicked method in controller&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that in the if statement I set the error message when the ID is wrong, and reset the <code>signinError</code> to an empty string when the ID is correct. To test the program I&#8217;ve entered Alex as the user ID and clicked the button Sign In.My window looked like this:</p>
</div>
<div id="FIG8-6" class="imageblock">
<div class="content">
<img src="./images/fig_8_06.png" alt="fig 8 06">
</div>
<div class="title">Figure 75. Binding in action after entering the wrong user id</div>
</div>
<div class="paragraph">
<p>Enter the right user ID, click on Sign In again, and the binding mechanism will remove the error message from the window.</p>
</div>
</div>
<div class="sect2">
<h3 id="_application_thread_in_javafx">8.3. Application Thread in JavaFX</h3>
<div class="paragraph">
<p>In Chapter 6 I gave you a light introduction to multi-threading. When you work with JavaFX you have to run the code that updates the GUI and the code that performs application logic in separate threads. I&#8217;ll explain you why.</p>
</div>
<div class="paragraph">
<p>Imagine a program with a GUI that&#8217;s constantly is being updated based on some intensive calculations. It could be a game with multiple moving shapes. It could be an application for a TV channel that may show a video stream, commercials, viewers polls and more. It could be a business application that displays several pieces of constantly changing information in different parts of the window like prices on eBay auction.</p>
</div>
<div class="paragraph">
<p>Updates of the GUI in JavaFX are done in so called  <em>application thread</em>. The idea is to separate calculations from the GUI updates. Say, the user clicked on the button Play on a JavaFX video streaming application like Netflix. If the requests for the remote video and actual playing of the video (GUI updates) would be done in the same application thread, the video would be choppy - it would be interrupted by running business logic that prepares GUI content. The screen would be "frozen" and the user wouldn&#8217;t be able to use any screen components.</p>
</div>
<div class="sect3">
<h4 id="_the_frozen_screen_demo">8.3.1. The Frozen Screen Demo</h4>
<div class="paragraph">
<p>I will demonstrate you a "frozen GUI" effect by making a small change in the class <code>Controller</code> in our Sign In application. The simplest way to emulate a long running process is to place the currently running thread to sleep, as if there is an application logic that takes some time to complete. For example, to put the current thread to sleep for 10 second, you can write the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">try</span> <span class="tok-o">{</span>
    <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">10000</span><span class="tok-o">);</span>  <span class="tok-c1">// Sleep for 10 sec</span>

<span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">interExp</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">interExp</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This code snippet has so-called try-catch block, which is required in some cases for error handling. The next chapter  explains the error processing subject in details. But at this point let&#8217;s just focus on the code located inside the curly braces after the keyword <code>try</code>.</p>
</div>
<div class="paragraph">
<p>The method <code>sleep</code> of class <code>Thread</code> takes one argument - the sleeping time in milliseconds. There are 1000  milliseconds in one second, so the above code snippet will place the current thread to sleep for 10 second.</p>
</div>
<div class="paragraph">
<p>Remember, the controller class has an event handler for the Sign In button? It executes in the JavaFX application thread. I&#8217;ll add the 10-second sleeping code to the application thread to emulate the process that would perform actual sign in. Actually, this is wrong - you should execute the application logic in a separate thread. But I do this on purpose to demonstrate the frozen effect.</p>
</div>
<div class="paragraph">
<p>The following code fragment from the new controller class shows hos the event handler <code>signInClicked</code> invokes the method named <code>wrongStartOfLongRunningProcess</code>, which sleeps for 10 seconds and then checks if the entered user ID is Yakov.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">signInClicked</span><span class="tok-o">(</span><span class="tok-n">ActionEvent</span> <span class="tok-n">evt</span><span class="tok-o">){</span>

    <span class="tok-n">String</span> <span class="tok-n">userID</span> <span class="tok-o">=</span> <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>
    <span class="tok-n">String</span> <span class="tok-n">password</span> <span class="tok-o">=</span> <span class="tok-n">pwd</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>

    <span class="tok-n">wrongStartOfLongRunningProcess</span><span class="tok-o">(</span><span class="tok-n">userID</span><span class="tok-o">);</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;got id:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">userID</span> <span class="tok-o">+</span> <span class="tok-s">&quot;, got password: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">password</span><span class="tok-o">);</span>
<span class="tok-o">}</span>

<span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">wrongStartOfLongRunningProcess</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">uID</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">try</span> <span class="tok-o">{</span>
        <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">10000</span><span class="tok-o">);</span>  <span class="tok-c1">// Sleep for 10 sec</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">interExp</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">interExp</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-k">if</span> <span class="tok-o">(!</span><span class="tok-s">&quot;Yakov&quot;</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">uID</span><span class="tok-o">)){</span>
        <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color: lightpink;&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span> <span class="tok-k">else</span><span class="tok-o">{</span>
        <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color: white;&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the user clicks on the Sign In button, the application thread will become busy for 10 seconds, and only then checks the user ID and set the background color of the <code>TextField</code> on the screen. If you&#8217;ll run the Sign In sample with such event handler, the application window becomes frozen and unresponsive for 10 seconds. If the user will try to reenter the ID, he&#8217;ll see a wait cursor. On MAC OS computers such a cursor looks as a spinning <em>wheel of death</em> as shown on Figure 8-7.</p>
</div>
<div id="FIG8-7" class="imageblock">
<div class="content">
<img src="./images/fig_8_07.png" alt="fig 8 07">
</div>
<div class="title">Figure 76. Frozen Screen with a wheel of death</div>
</div>
<div class="paragraph">
<p>Ten seconds later the application thread wakes up, and the GUI becomes responsive again. Let&#8217;s fix this code and create a separate thread emulating the long running process so that the application thread can continue working with GUI. The following code listing shows the complete code of the class <code>ControllerLongRunningThread</code>, which doesn&#8217;t freeze the window.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ControllerLongRunningThread</span> <span class="tok-o">{</span>

  <span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">TextField</span> <span class="tok-n">id</span><span class="tok-o">;</span>

  <span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">PasswordField</span> <span class="tok-n">pwd</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">signInClicked</span><span class="tok-o">(</span><span class="tok-n">ActionEvent</span> <span class="tok-n">evt</span><span class="tok-o">){</span>

    <span class="tok-n">String</span> <span class="tok-n">userID</span> <span class="tok-o">=</span> <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>
    <span class="tok-n">String</span> <span class="tok-n">password</span> <span class="tok-o">=</span> <span class="tok-n">pwd</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>

    <span class="tok-n">rightStartOfLongRunningProcess</span><span class="tok-o">(</span><span class="tok-n">userID</span><span class="tok-o">);</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;got id:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">userID</span> <span class="tok-o">+</span>
                       <span class="tok-s">&quot;, got password: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">password</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">rightStartOfLongRunningProcess</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">uID</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-n">Runnable</span> <span class="tok-n">loginTask</span> <span class="tok-o">=</span> <span class="tok-o">()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>                       <b class="conum">(1)</b>
      <span class="tok-k">try</span> <span class="tok-o">{</span>
        <span class="tok-n">Thread</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">(</span><span class="tok-mi">10000</span><span class="tok-o">);</span>                           <b class="conum">(2)</b>

        <span class="tok-n">Platform</span><span class="tok-o">.</span><span class="tok-na">runLater</span><span class="tok-o">(()</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>                      <b class="conum">(3)</b>
          <span class="tok-k">if</span> <span class="tok-o">(!</span><span class="tok-s">&quot;Yakov&quot;</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">uID</span><span class="tok-o">)){</span>
            <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color: lightpink;&quot;</span><span class="tok-o">);</span>
          <span class="tok-o">}</span> <span class="tok-k">else</span><span class="tok-o">{</span>
            <span class="tok-n">id</span><span class="tok-o">.</span><span class="tok-na">setStyle</span><span class="tok-o">(</span><span class="tok-s">&quot;-fx-background-color: white;&quot;</span><span class="tok-o">);</span>
          <span class="tok-o">}</span>
        <span class="tok-o">});</span>

      <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">InterruptedException</span> <span class="tok-n">interExp</span><span class="tok-o">)</span> <span class="tok-o">{</span>
          <span class="tok-n">interExp</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
      <span class="tok-o">}</span>
    <span class="tok-o">};</span>                                                <b class="conum">(4)</b>

    <span class="tok-n">Thread</span> <span class="tok-n">workerThread</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Thread</span><span class="tok-o">(</span><span class="tok-n">loginTask</span><span class="tok-o">);</span>      <b class="conum">(5)</b>
    <span class="tok-n">workerThread</span><span class="tok-o">.</span><span class="tok-na">start</span><span class="tok-o">();</span>                             <b class="conum">(6)</b>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The code in the method <code>rightStartOfLongRunningProcess</code> declares the lambda expression <code>loginTask</code> as implementation of the <code>Runnable</code> interface. At this point no thread is created yet - we&#8217;ll do it at the end of the method <code>rightStartOfLongRunningProcess</code>.</p>
</li>
<li>
<p>The lambda expression places the current thread to sleep for 10 second, but it won&#8217;t be the application thread, because we&#8217;ll create a separate worker thread for it (see the notes 5 and 6 below).</p>
</li>
<li>
<p>When the sleep is over, we need to pass control back from the worker to application thread to update the GUI. For that, JavaFX has a special method <code>runLater</code> in the class <code>Platform</code>. The method <code>runLater</code> will place the request to update the GUI into a special event queue of the application thread.</p>
</li>
<li>
<p>End of the lambda expression declaration</p>
</li>
<li>
<p>Now we create the instance of the worker thread passing the lambda expression to it.</p>
</li>
<li>
<p>The method <code>start</code> of the class <code>Thread</code> starts the executing of the lambda&#8217;s code in a separate worker thread.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the chapter on Ping-Pong game we&#8217;ll use multiple threads too. One thread will be responsible for displaying the ping-pong table, while the other will calculate coordinates of the ball and paddles.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploying_with_javafx_packager">8.4. Deploying With JavaFX Packager</h3>
<div class="paragraph">
<p>How do you start a JavaFX application? Well, you can start it either from the IDE or from a command line as any other Java application. But if you want to give your application to your grandma, what may not be as good at Java as you are? Of course, you can pay her a visit, install the Java runtime on her computer, and teach her how to open a command or Terminal window and enter <code>java signin.Main</code>.</p>
</div>
<div class="paragraph">
<p>You may learn how to use scripting languages and create a file <code>signin.bat</code> in Windows or <code>signin.sh</code> in MAC OS that will have the <code>java signin.Main</code> command inside. You can even create an icon that will run this script. But what if everyone in your school want to have your program installed on their computers? Now if becomes a time-consuming task.</p>
</div>
<div class="paragraph">
<p>But the best way to prepare your JavaFX application for distribution is to create a self-contain file <code>signin.exe</code> for Windows or <code>signin.dmg</code> for MAC OS. This file will contain both the Java runtime and your application code. This process is described in details in Oracle&#8217;s tutorial titled <a href="http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm#BCGIBBCI">"Self-Contained Application Packaging</a>. I&#8217;m not going to repeat this tutorial here, but will leave it for you as a self-study project.</p>
</div>
<div class="paragraph">
<p>I&#8217;m sure many of you want to know if it&#8217;s possible to use JavaFX for writing applications for smart phones. Oracle doesn&#8217;t offer the JavaFX libraries for mobile platforms, but it&#8217;s still possible.</p>
</div>
<div class="paragraph">
<p>To develop JavaFX applications for iOS, you&#8217;d need to install and learn on your own some additional software, namely RoboVM[<a href="http://www.robovm.com/" class="bare">http://www.robovm.com/</a>] is an SDK for converting Java bytecode into a native device code as if it was written in C programming language, which makes it deployable on iOS devices.</p>
</div>
<div class="paragraph">
<p>There is also a community site JavaFX Ports[ <a href="http://javafxports.org/page/home" class="bare">http://javafxports.org/page/home</a>] where people are working on deployment of JavaFX applications on iOS and Android devices.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_to_study_next_about_javafx">8.5. What to Study Next About JavaFX</h3>
<div class="paragraph">
<p>In Chapters 7 and 8 I gave you a very brief introduction to JavaFX. You&#8217;ll be writing more of JavaFX code in chapters 9, 10, and 13, but JavaFX has lots of interesting features that you may want to explore on your own. JavaFX has more than 60 GUI components, so try to play with them. Also, JavaFX allows you to integrate audio and video in your application, create special effects and transitions to make your programs as cool and entertaining as you want them to be. You may find some interesting capabilities by researching classes located in the package <code>javafx.animation</code>.</p>
</div>
<div class="paragraph">
<p>Pick up a book on JavaFX 8 or later and experiment on your own. One of the better books on the subject is "Pro JavaFX 8: A Definite Guide to Building Desktop, Mobile, and Embedded Java Clients" published by Apress.</p>
</div>
</div>
<div class="sect2">
<h3 id="_project_adding_events_handling_for_calculator">8.6. Project: Adding Events Handling for Calculator</h3>
<div class="paragraph">
<p>The goal of this project is to complete the calculator program. If you completed the project from Chapter 7, you can continue working on it. But if you couldn&#8217;t complete it on your own, download the version of the calculator GUI that comes with the sample code for this chapter.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class <code>CalculatorController</code> in the same IDEA project where the calculator&#8217;s GUI is located.</p>
</li>
<li>
<p>Modify the file <code>calculator.fxml</code>: add to it the attribute <code>fx:controller="CalculatorController"</code> so it knows the name of the class with the application logic.  Use the code of the <code>signing.fxml</code> from this chapter for reference.</p>
</li>
<li>
<p>Create two separate event handler methods in the class  <code>CalculatorController</code>. Name the first method <code>digitClickedHandler</code> - it will contain the code to process clicks on the digit buttons. Name the second method  <code>operationClickHandler</code> - it will contain the code to process clicks on such buttons as Plus, Minus, et al.</p>
</li>
<li>
<p>Modify the file <code>calculator.fxml</code> and assign the name of the click handler method for each button using the attribute <code>onAction</code> as we did in the Sign In example.</p>
</li>
<li>
<p>In each handler method add the code to recognize which button has been clicked. You can do the label of the clicked button by querying the <code>ActionEvent</code> object that will be provided for each event handler method. For example if the variable <code>evt</code> represents the <code>ActionEvent</code> object, the code can look like this:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Button</span> <span class="tok-n">clickedButton</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">Button</span><span class="tok-o">)</span> <span class="tok-n">evt</span><span class="tok-o">.</span><span class="tok-na">getTarget</span><span class="tok-o">();</span>
<span class="tok-n">String</span> <span class="tok-n">buttonLabel</span> <span class="tok-o">=</span> <span class="tok-n">clickedButton</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span></code></pre>
</div>
</div>
</li>
<li>
<p>If the use clicked the digit button, get the current value from the calculator&#8217;s display field, concatenate the button&#8217;s label and assign the new value back to the display field.</p>
</li>
<li>
<p>You need to declare a variable, say <code>valueOne</code> in the controller to store the current value of the display field when the user clicks on the operation button. For example, if the user clicked on the button with the label <code>+</code>, <code>-</code>, <code>/</code>, or <code>*</code>, it&#8217;s a signal that the user finished entering the first number. Store it in the variable <code>valueOne</code> and clear the display field so the user can start entering the second number.</p>
</li>
<li>
<p>Declare a variable, say <code>operation</code>, to remember the operation that the user wants to perform. For example, if the user clicked on <code>+</code>, store <code>+</code> in the variable <code>operation</code>.</p>
</li>
<li>
<p>If the user clicks on the button <code>=</code>, get the value from <code>valueOne</code> and from the display field and perform the operation according to the value in <code>operation</code>. Use the <code>switch</code> statement to perform different operations.</p>
</li>
<li>
<p>After the operation is complete, assign the result to the display field by using the method <code>setText</code> of the <code>TextField</code> component.</p>
</li>
<li>
<p>Store the calculated result in the variable <code>valueOne</code> so the user can continue performing other operation. For example if the first operation was 2+3, the display shows 5, and the user can click on the buttons <code>*</code> followed by 4 requesting multiplication of 5 by 4.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_challenge_yourself_3">8.6.1. Challenge Yourself</h4>
<div class="paragraph">
<p>The step 10 in the project assignment suggests that you should use the the method <code>setText</code> of the <code>TextField</code> component. See if you can apply the property binding technique to display the result in the display field.
:toc-placement!:
:imagesdir: .</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_error_handling">9. Error Handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter I&#8217;ll explain you how to handle run-time errors, which in Java are called <em>exceptions</em>.</p>
</div>
<div class="paragraph">
<p>Say you forgot to write one closing curly brace in your Java code. This will result in the compilation error that can be fixed easily. But there are so called <em>run-time errors</em>, when all of a sudden your program stops working properly.</p>
</div>
<div class="paragraph">
<p>For example, a Java class reads a file with the game scores. What’s going to happen if someone will delete this file? Will the program crash with a scary error message, or will it stay alive displaying a user friendly message like this one: <em>Dear friend, for some reason I could not read the file scores.txt. Please make sure that the file exists?</em> This is an example of a situation when Java compiler won&#8217;t be able to help - the Java syntax was written properly.</p>
</div>
<div class="paragraph">
<p>You should make your programs ready for unexpected situations. you should foresee what might go wrong when the program will be running, and what to do if something went wrong. In many programming languages the programmer decides if he wants to add error processing code to a program. But in many cases Java forces you to include error processing code, otherwise the programs will not even compile.</p>
</div>
<div class="paragraph">
<p>Runtime errors in Java are called exceptions, and error processing is called <em>exception handling</em>. You have to place code that may produce errors in so-called <code>try/catch</code> block. It’s as if you’re saying to JVM the following: <em>Try to read the file with scores, but if something happens, catch the error and execute the code that will deal with it:</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">try</span><span class="tok-o">{</span>
  <span class="tok-n">fileScores</span><span class="tok-o">.</span><span class="tok-na">read</span><span class="tok-o">();</span>
<span class="tok-o">}</span>
<span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">){</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
       <span class="tok-s">&quot;Dear friend,I could not read the file scores.txt&quot;</span> <span class="tok-o">+</span>
                  <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ioe</code> in the above code fragment is a variable that represents the <code>IOException</code>  object given to the catch block by the Java runtime. You can give this variable any name you like.  The <code>getMessage</code> will return the text describing what happened during the file read.</p>
</div>
<div class="paragraph">
<p>We’ll learn how to work with files in Chapter 11, but at this point I&#8217;d like to introduce a new term <em>I/O</em> or <em>input/output</em>. Read and write operations (from/to disk or other device) are also known as I/O operations, and the class <code>IOException</code> is a class that contains information about input/output errors.</p>
</div>
<div class="paragraph">
<p>In the Java world, a method <em>throws an exception</em> in case of a runtime error. Different exceptions will be thrown for different type of errors.  If the <code>catch</code> block exists in the program for this particular type of an error, it will be caught and the program will jump into the <code>catch</code> block  to execute the code located there. The program will stay alive, and this exception is considered to be taken care of.</p>
</div>
<div class="paragraph">
<p>The print statement from the code above will be executed only in case of the file read error.</p>
</div>
<div class="sect2">
<h3 id="_reading_the_stack_trace">9.1. Reading the Stack Trace</h3>
<div class="paragraph">
<p>If an unexpected exception occurs that is not handled by the program, it prints a multi-line error message on the screen. Such message is called stack trace. If your program  called several methods before it ran into a problem, the <em>stack trace</em> can help you to trace the program, and find the line that have caused the error.</p>
</div>
<div class="paragraph">
<p>We know that dividing by zero is illegal. But, for the illustration purposes, I wrote a program <code>TestStackTrace</code> that divides by zero on purpose  (line numbers are not the part of the code).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-mi">1</span> <span class="tok-kd">class</span> <span class="tok-nc">TestStackTrace</span><span class="tok-o">{</span>
<span class="tok-mi">2</span>  <span class="tok-n">TestStackTrace</span><span class="tok-o">()</span>
<span class="tok-mi">3</span>   <span class="tok-o">{</span>
<span class="tok-mi">4</span>    <span class="tok-n">divideByZero</span><span class="tok-o">();</span>
<span class="tok-mi">5</span>   <span class="tok-o">}</span>
<span class="tok-mi">6</span>
<span class="tok-mi">7</span>  <span class="tok-kt">int</span> <span class="tok-nf">divideByZero</span><span class="tok-o">()</span>
<span class="tok-mi">8</span>   <span class="tok-o">{</span>
<span class="tok-mi">9</span>      <span class="tok-k">return</span> <span class="tok-mi">25</span><span class="tok-o">/</span><span class="tok-mi">0</span><span class="tok-o">;</span>
<span class="tok-mi">10</span>  <span class="tok-o">}</span>
<span class="tok-mi">11</span>
<span class="tok-mi">12</span>  <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span>
<span class="tok-mi">13</span>  <span class="tok-o">{</span>
<span class="tok-mi">14</span>    <span class="tok-k">new</span> <span class="tok-nf">TestStackTrace</span><span class="tok-o">();</span>
<span class="tok-mi">15</span>  <span class="tok-o">}</span>
<span class="tok-mi">16</span> <span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The output of this program shows the sequence of method calls that were made up to the moment when the run-time error had happened. Start reading this output from the last line going up.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Exception</span> <span class="tok-n">in</span> <span class="tok-n">thread</span> <span class="tok-s">&quot;main&quot;</span>
<span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">lang</span><span class="tok-o">.</span><span class="tok-na">ArithmeticException</span><span class="tok-o">:</span> <span class="tok-o">/</span> <span class="tok-n">by</span> <span class="tok-n">zero</span>
   <span class="tok-n">at</span> <span class="tok-n">TestStackTrace</span><span class="tok-o">.</span><span class="tok-na">divideByZero</span><span class="tok-o">(</span><span class="tok-n">TestStackTrace</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">:</span><span class="tok-mi">9</span><span class="tok-o">)</span>
   <span class="tok-n">at</span> <span class="tok-n">TestStackTrace</span><span class="tok-o">.&lt;</span><span class="tok-n">init</span><span class="tok-o">&gt;(</span><span class="tok-n">TestStackTrace</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">:</span><span class="tok-mi">4</span><span class="tok-o">)</span>
   <span class="tok-n">at</span> <span class="tok-n">TestStackTrace</span><span class="tok-o">.</span><span class="tok-na">main</span><span class="tok-o">(</span><span class="tok-n">TestStackTrace</span><span class="tok-o">.</span><span class="tok-na">java</span><span class="tok-o">:</span><span class="tok-mi">14</span><span class="tok-o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This means that the program started in the method <code>main</code>, then went to <code>init</code>, which is a constructor, and then called the method <code>divideByZero</code>. The numbers 14, 4 and 9 show in which lines of the program these methods were called. After that, an <code>ArithmeticException</code> was thrown – the line number nine tried to divide by zero.</p>
</div>
</div>
<div class="sect2">
<h3 id="_genealogical_tree_of_exceptions">9.2. Genealogical Tree of Exceptions</h3>
<div class="paragraph">
<p>Exceptions in Java are also classes, and some of them are shown in the following inheritance tree:</p>
</div>
<div id="FIG9-1" class="imageblock">
<div class="content">
<img src="./images/fig_9_01.png" alt="fig 9 01">
</div>
<div class="title">Figure 77. Exceptions Hierarchy</div>
</div>
<div class="paragraph">
<p>Subclasses of the class <code>Exception</code> are called <em>checked exceptions</em> and you must process them  in your code.</p>
</div>
<div class="paragraph">
<p>Subclasses of the class <code>Error</code> are fatal JVM errors and the running program can’t handle them.</p>
</div>
<div class="paragraph">
<p>The <code>TooManyBikesException</code> is an example of exception that can be created by a programmer.</p>
</div>
<div class="paragraph">
<p>How a programmer is supposed to know in advance if some Java method may throw an exception and that a <code>try/catch</code> block should be used?  Not to worry, if you call a method that may throw an exception, Java compiler will print an error message similar to this one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-s">&quot;ScoreReader.java&quot;</span><span class="tok-o">:</span>  <span class="tok-n">unreported</span> <span class="tok-nl">exception:</span> <span class="tok-n">java</span><span class="tok-o">.</span><span class="tok-na">io</span><span class="tok-o">.</span><span class="tok-na">IOException</span><span class="tok-o">;</span> <span class="tok-n">must</span> <span class="tok-n">be</span> <span class="tok-n">caught</span> <span class="tok-n">or</span> <span class="tok-n">declared</span> <span class="tok-n">to</span> <span class="tok-n">be</span> <span class="tok-n">thrown</span> <span class="tok-n">at</span> <span class="tok-n">line</span> <span class="tok-mi">57</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course you are welcome to read Java documentation that describes exceptions that may be thrown by any particular  method. The rest of this chapter will explain how to deal with these exceptions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_try_catch_block">9.3. Try/Catch Block</h3>
<div class="paragraph">
<p>There are five Java keywords that can be used for error handling: <code>try</code>, <code>catch</code>, <code>finally</code>, <code>throw</code>, and <code>throws</code>.</p>
</div>
<div class="paragraph">
<p>After one <code>try</code> block you may put several <code>catch</code> blocks, if you believe that more than one error may happen. For example, when a program tries to read a file, the file may not be there, and you’ll get the <code>FileNotFoundException</code>, or the file is there, but the code keeps reading the file after reaching the end of  file – this generates <code>EOFException</code>. The next code fragment  will print messages in plain English if the program can’t find a file with game scores or reached the end of the file. For any other read errors it’ll print the message <em>Problem reading</em> file and a technical description of the error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">getScores</span><span class="tok-o">(){</span>
 <span class="tok-k">try</span><span class="tok-o">{</span>
    <span class="tok-n">fileScores</span><span class="tok-o">.</span><span class="tok-na">read</span><span class="tok-o">();</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-err">“</span><span class="tok-n">Scores</span> <span class="tok-n">loaded</span> <span class="tok-n">successfully</span><span class="tok-err">”</span><span class="tok-o">);</span>
 <span class="tok-o">}</span><span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">FileNotFoundException</span> <span class="tok-n">e</span><span class="tok-o">){</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-err">“</span><span class="tok-n">Can</span> <span class="tok-n">not</span> <span class="tok-n">find</span> <span class="tok-n">file</span> <span class="tok-n">Scores</span><span class="tok-err">”</span><span class="tok-o">);</span>
 <span class="tok-o">}</span><span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">EOFException</span> <span class="tok-n">e1</span><span class="tok-o">){</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-err">“</span><span class="tok-n">Reached</span> <span class="tok-n">end</span> <span class="tok-n">of</span> <span class="tok-n">file</span><span class="tok-err">”</span><span class="tok-o">);</span>
 <span class="tok-o">}</span><span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">e2</span><span class="tok-o">){</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-err">“</span><span class="tok-n">Problem</span> <span class="tok-n">reading</span>  <span class="tok-n">file</span> <span class="tok-err">“</span> <span class="tok-o">+</span>
                                    <span class="tok-n">e2</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the method <code>read</code> fails, the program jumps over the line <code>println</code>  and tries to land in the <code>catch</code> block that matches the error. If it finds such block, the appropriate methid <code>println</code> will be executed, but if the matching catch block is not found, the method <code>getScores</code> will re-throw this exception to its caller.</p>
</div>
<div class="paragraph">
<p>If you write several <code>catch</code> blocks, you may need to place them in a particular order if these exceptions are inherited from each other. For example, since the <code>EOFException</code> is a subclass of the <code>IOException</code>, you have to put the <code>catch</code> block for the subclass first.  If you would put the <code>catch</code> for <code>IOException</code> first, the program would never reach the <code>FileNotFound</code> or <code>EOFException</code>, because the first <code>catch</code> would intercept them.</p>
</div>
<div class="paragraph">
<p>Lazybones would program the method <code>getScores</code> just like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">getScores</span><span class="tok-o">(){</span>
 <span class="tok-k">try</span><span class="tok-o">{</span>
  <span class="tok-n">fileScores</span><span class="tok-o">.</span><span class="tok-na">read</span><span class="tok-o">();</span>
 <span class="tok-o">}</span><span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">Exception</span> <span class="tok-n">e</span><span class="tok-o">){</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-err">“</span><span class="tok-n">Problem</span> <span class="tok-n">reading</span>  <span class="tok-n">file</span> <span class="tok-err">”</span><span class="tok-o">+</span>
                                      <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is an example of a bad style of Java coding. When you write a program, always remember that someone else may read it, and you don’t want to be ashamed of your code.</p>
</div>
<div class="paragraph">
<p>Catch blocks receive an instance of the object <code>Exception</code> that contains a short explanation of a problem, and its method <code>getMessage</code> will return this info. Sometimes, if the description of an error is not clear, try the method <code>toString</code> instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">Exception</span> <span class="tok-n">e</span><span class="tok-o">){</span>
 <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-err">“</span><span class="tok-n">Problem</span> <span class="tok-n">reading</span> <span class="tok-n">file</span> <span class="tok-err">”</span><span class="tok-o">+</span> <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">());</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need more detailed information about the exception, use the method <code>printStackTrace</code>. It will print the sequence of  method calls that lead to this exception  similar to an example from  the section <em>Reading Stack Trace</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_keyword_code_throws_code">9.4. The keyword <code>throws</code></h3>
<div class="paragraph">
<p>In some cases, it makes more sense to handle the exception not in the method where it happened, but in the method’s caller.
In such cases the method signature has to declare (warn) that it may throw a particular exception. This is done using a special keyword <code>throws</code>. Let’s use the same example that reads a file. Since the method <code>read</code> may throw an <code>IOException</code>, you should either handle or declare it. In the next example we are  going to declare that the method <code>getAllScores</code> may throw an IOException:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">MySuperGame</span><span class="tok-o">{</span>

  <span class="tok-kt">void</span> <span class="tok-nf">getAllScores</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">IOException</span><span class="tok-o">{</span>
   <span class="tok-c1">// …</span>
   <span class="tok-c1">// Do not use try/catch  if you are</span>
   <span class="tok-c1">// not handling exceptions in this method</span>
   <span class="tok-n">file</span><span class="tok-o">.</span><span class="tok-na">read</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">){</span>
    <span class="tok-n">MySuperGame</span> <span class="tok-n">msg</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">MySuperGame</span><span class="tok-o">();</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-err">“</span><span class="tok-n">List</span> <span class="tok-n">of</span> <span class="tok-n">Scores</span><span class="tok-err">”</span><span class="tok-o">);</span>

    <span class="tok-k">try</span><span class="tok-o">{</span>
     <span class="tok-c1">// Since the  getAllScores()declares exception,</span>
     <span class="tok-c1">// we handle  it over here</span>
       <span class="tok-n">msg</span><span class="tok-o">.</span><span class="tok-na">getAllScores</span><span class="tok-o">();</span>

    <span class="tok-o">}</span><span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">e</span><span class="tok-o">){</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
       <span class="tok-s">&quot;Sorry, the list of scores is not available&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
 <span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Imagine that the <code>MySuperGame</code> program invokes multiple methods that read or write files and get some data from a remote server. We may want to process all possible exceptions in one place – the main method. In this case there is no need to handle exceptions inside these methods (e.g. <code>getAllScores</code>). We could rather declare that these methods may throw exceptions. Since we are not even trying to catch exceptions in <code>getAllScores</code>, the <code>IOException</code> will be  <em>propagated</em> from the <code>getAllScores</code> to its caller - the method <code>main</code>. Now the main method has to handle this exception.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_keyword_code_finally_code">9.5. The Keyword <code>finally</code></h3>
<div class="paragraph">
<p>Any code within a <code>try/catch</code> block can end in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The code inside the <code>try</code> block successfully ended and the program continues.</p>
</li>
<li>
<p>The code inside the <code>try</code> block runs into a <code>return</code> statement and the method is exited.For example, you may read a file line by line, and if the line contains a certain text, you may want to stop reading the file. Just write a return statement, and the method is exited, e.g.</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">playerName</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-s">&quot;Mary&quot;</span><span class="tok-o">)){</span>
    <span class="tok-k">return</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>The code in the <code>try</code> block throws an exception and control goes to the matching <code>catch</code> block, which either handles the error and the method execution continues, or it re-throws the exception to the caller of this method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there is a piece of code that must be executed no matter what, put it under the keyword <code>finally</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">try</span><span class="tok-o">{</span>
   <span class="tok-n">file</span><span class="tok-o">.</span><span class="tok-na">read</span><span class="tok-o">();</span>
<span class="tok-o">}</span><span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">Exception</span> <span class="tok-n">e</span><span class="tok-o">){</span>
   <span class="tok-n">printStackTrace</span><span class="tok-o">();</span>
<span class="tok-o">}</span><span class="tok-k">finally</span><span class="tok-o">{</span>
  <span class="tok-c1">// the code that must always be executed</span>
  <span class="tok-c1">// goes here, for example file.close();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The code above has to close the file regardless of success or failure of the read operation. Usually, you can find the code that releases some computer resources in the block <code>finally</code>, for example, disconnection from a network or file closing.</p>
</div>
<div class="paragraph">
<p>If you are not planning to handle exceptions in the current method, they will be propagated to the caller. In this case, you can use the <code>finally</code> even without a <code>catch</code> block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">void</span> <span class="tok-nf">myMethod</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">IOException</span><span class="tok-o">{</span>
 <span class="tok-k">try</span><span class="tok-o">{</span>
   <span class="tok-c1">// your code that reads a file goes here</span>
 <span class="tok-o">}</span>
 <span class="tok-k">finally</span><span class="tok-o">{</span>
   <span class="tok-c1">// your code that closes the file  goes here</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the myMethod will throw an exception it will be handled in the calling method. But we still want to close the file, and placing the code that closes a file into the <code>finally</code> section will guarantee that it will be done. So we have the` finally` without the <code>catch</code> here.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_keyword_code_throw_code">9.6. The Keyword <code>throw</code></h3>
<div class="paragraph">
<p>When you read in Java documentation that some method may throw an exception, it means that the programmer who wrote this method used a special throw keyword to do this. The  <code>throw</code> keyword is used to throw Java objects, which  are throwable. You can only throw objects that are direct or indirect subclasses of the class <code>Throwable</code>. We can guess, that the author of the method that reads a file used the <code>throw</code> keyword in the method <code>read</code>. This could have been done as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-nf">IOException</span><span class="tok-o">(</span><span class="tok-err">“</span><span class="tok-n">The</span> <span class="tok-n">file</span> <span class="tok-n">scores</span><span class="tok-o">.</span><span class="tok-na">txt</span> <span class="tok-n">contains</span> <span class="tok-n">invalid</span> <span class="tok-n">characters</span><span class="tok-err">”</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The constructor of any exception should get a message that describes the error as an argument. When you’ll be invoking the <code>getMessage</code> method on the exception object in the catch block, it’ll print the message that was given to the constructor in the code that has thrown the exception.</p>
</div>
<div id="FIG9-2" class="imageblock">
<div class="content">
<img src="./images/fig_9_02.png" alt="fig 9 02">
</div>
<div class="title">Figure 78. Throwing exceptions</div>
</div>
<div class="paragraph">
<p>In the next section I’ll show you how create your own exception classes and throw them with the throw keyword.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_custom_exceptions">9.7. Creating Custom Exceptions</h3>
<div class="paragraph">
<p>Programmers could also create new  exception classes  that did not exist in Java before.  Such classes have to derive from one of the Java exception classes.  Let’s say you are in business of selling bikes and need to <em>validate</em> customer orders. Different number of bikes can fit in your small truck depending on the model. For example, you can fit no more than three FireBird bikes in your truck. You can create a new subclass of <code>Exception</code> called <code>TooManyBikesException</code>, and if someone tries to order more than three of these bikes,  throw the this exception:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">TooManyBikesException</span> <span class="tok-kd">extends</span> <span class="tok-n">Exception</span><span class="tok-o">{</span>

  <span class="tok-c1">// Constructor</span>
  <span class="tok-n">TooManyBikesException</span> <span class="tok-o">(){</span>

    <span class="tok-kd">super</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t ship so many bikes.&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class has only a constructor that takes the message describing this error and passes it to the superclass of <code>TooManyBikesException</code> for reporting the same way as Java runtime reports any other exception. When some <code>catch</code> block receives this exception it can extract the message describing what happened by calling the method <code>getMessage</code> on the caught object <code>TooManyBikesException</code>.</p>
</div>
<div id="FIG9-4" class="imageblock">
<div class="content">
<img src="./images/fig_9_04.png" alt="fig 9 04">
</div>
</div>
<div class="paragraph">
<p>Visualize a JavaFX GUI where the user selects several bicycles of some model and hits the button <em>Place Order</em>. As you know from Chapter 8, this action will result in the call to the event handler method (e.g. <code>placeOrder</code>) assigned to the <code>onAction</code> property of the button.  The event handler can apply some business logic (e.g. call a method <code>validateOrder</code>) to check if the order can be delivered.</p>
</div>
<div class="paragraph">
<p>The next code fragment shows how the method <code>placeOrder</code> invokes <code>validateOrder</code>, which can throw <code>TooManyBikesException</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">ComboBox</span> <span class="tok-n">model</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">TextField</span> <span class="tok-n">quantity</span><span class="tok-o">;</span>

<span class="tok-nd">@FXML</span> <span class="tok-kd">private</span> <span class="tok-n">Label</span> <span class="tok-n">txtFieldOrderConfirmation</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">validateOrder</span><span class="tok-o">(</span><span class="tok-n">ActionEvent</span> <span class="tok-n">evt</span><span class="tok-o">){</span>

   <span class="tok-n">String</span> <span class="tok-n">selectedModel</span> <span class="tok-o">=</span> <span class="tok-n">model</span><span class="tok-o">.</span><span class="tok-na">getSelectionModel</span><span class="tok-o">()</span>
                               <span class="tok-o">.</span><span class="tok-na">getSelectedItem</span><span class="tok-o">();</span>
   <span class="tok-n">String</span> <span class="tok-n">selectedQuantity</span> <span class="tok-o">=</span>
                          <span class="tok-n">txtFieldQuantity</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>
   <span class="tok-kt">int</span> <span class="tok-n">quantity</span> <span class="tok-o">=</span> <span class="tok-n">Integer</span><span class="tok-o">.</span><span class="tok-na">parseInt</span><span class="tok-o">(</span><span class="tok-n">selectedQuantity</span><span class="tok-o">);</span>

   <span class="tok-k">try</span><span class="tok-o">{</span>
      <span class="tok-n">validateOrder</span><span class="tok-o">(</span><span class="tok-n">selectedModel</span><span class="tok-o">,</span> <span class="tok-n">quantity</span><span class="tok-o">);</span>

      <span class="tok-c1">//the next line will be skipped in case of exception</span>
      <span class="tok-n">txtFieldOrderConfirmation</span><span class="tok-o">.</span><span class="tok-na">setText</span><span class="tok-o">(</span>
                           <span class="tok-s">&quot;Your order is complete&quot;</span><span class="tok-o">);</span>

   <span class="tok-o">}</span> <span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">TooManyBikesException</span> <span class="tok-n">bikesException</span><span class="tok-o">){</span>
       <span class="tok-n">txtFieldOrderConfirmation</span><span class="tok-o">.</span><span class="tok-na">setText</span><span class="tok-o">(</span>
              <span class="tok-n">bikesException</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
   <span class="tok-o">}</span>
 <span class="tok-o">}</span>

 <span class="tok-kt">void</span> <span class="tok-nf">validateOrder</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">bikeModel</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">quantity</span><span class="tok-o">)</span>
                         <span class="tok-kd">throws</span> <span class="tok-n">TooManyBikesException</span><span class="tok-o">{</span>

   <span class="tok-cm">/* Here should go the code to checks if the requested</span>
<span class="tok-cm">      quantity of bikes of selected model fits in the</span>
<span class="tok-cm">      truck. If they won&#39;t fit, do the following:</span>
<span class="tok-cm">   */</span>

   <span class="tok-k">throw</span> <span class="tok-k">new</span> <span class="tok-nf">TooManyBikesException</span><span class="tok-o">(</span><span class="tok-s">&quot;Can not ship&quot;</span> <span class="tok-o">+</span>
                    <span class="tok-n">quantity</span> <span class="tok-o">+</span> <span class="tok-s">&quot; bikes of the model &quot;</span> <span class="tok-o">+</span> <span class="tok-n">bikeModel</span> <span class="tok-o">+</span> <span class="tok-s">&quot; in one shipment&quot;</span> <span class="tok-o">);</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the order won’t fit in the truck, the method <code>validateOrder</code> throws the exception, the <code>catch</code> block in <code>placeOrder</code> intercepts it and displays an error message in a text field on the window. When you throw custom exceptions provide user-friendly message that clearly describe the error.</p>
</div>
<div id="FIG9-3" class="imageblock">
<div class="content">
<img src="./images/fig_9_03.png" alt="fig 9 03">
</div>
<div class="title">Figure 79. Showing a user-friendly message</div>
</div>
<div class="paragraph">
<p>I&#8217;m not going to provide you an explanation of how JavaFX <code>ComboBox</code> control works, because I want you to do a little research as a part of the project assignment below.</p>
</div>
<div class="paragraph">
<p>In a perfect world, every program would work properly, but realistically you have to be ready for the unexpected situations. It helps that Java often forces you to write code that is prepared for these situations. You can also use the Java exception handling mechanism to process situation specific to your application as illustrated using the bike store example.</p>
</div>
<div class="paragraph">
<p>For more detailed coverage of exceptions read Oracle&#8217;s   <a href="http://docs.oracle.com/javase/tutorial/essential/exceptions/">lesson on exceptions</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_project_create_a_javafx_bike_store">9.8. Project: Create a JavaFX Bike Store</h3>
<div class="paragraph">
<p>In this assignment I&#8217;d like you to create a JavaFX application for a bicycle store. It should have GUI that allows the user to select a bicycle model (do a little research and learn on your own how to use the JavaFX <code>ComboBox</code> for this). You can find the <a href="http://docs.oracle.com/javase/8/javafx/user-interface-tutorial/combo-box.htm">description</a> of the ComboBox component in Oracle tutorial.</p>
</div>
<div class="paragraph">
<p>Use a <code>TextField</code> control for entering the quantity, a <code>Button</code> for placing an order, and a <code>Label</code> to display either order confirmation or an error message.</p>
</div>
<div class="paragraph">
<p>In the controller class use the code fragment from the section "Creating Custom Exceptions".</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_tic_tac_toe_game">10. Creating a Tic-Tac-Toe Game</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter we&#8217;ll return to GUI programming and will  develop a Tic-Tac-Toe game using JavaFX and Scene Builder.</p>
</div>
<div class="paragraph">
<p>This game may go by different names around the world, but it comes down to placing X&#8217;s and O&#8217;s on the game board. If you&#8217;re not familiar with this game, read its description in  <a href="http://en.wikipedia.org/wiki/Tic-tac-toe">this Wikipedia article</a>.</p>
</div>
<div class="paragraph">
<p>Every game implements a set of rules or a strategy that has to be applied depending on the player’s actions. Let’s come up with a simple algorithm for the Tic-Tac-Toe game. Our version of this game will implement the following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The game will be played by two players on a 3x3 board.</p>
</li>
<li>
<p>Two players can play this game. One will play with the symbol X, and the other will use O.</p>
</li>
<li>
<p>The winner must have a full row, column, or diagonal of X&#8217;s or O&#8217;s.</p>
</li>
<li>
<p>After each move, the program has to check if there is a winner.</p>
</li>
<li>
<p>The winning combination of squares has to be displayed in different colors.</p>
</li>
<li>
<p>After the winner is found or there is no empty squares left the players may select the menu  Actions | Play to play again.</p>
</li>
<li>
<p>In a new game the first player plays with X&#8217;s.</p>
</li>
</ul>
</div>
<div id="FIG10-1" class="imageblock">
<div class="content">
<img src="./images/fig_10_01.png" alt="fig 10 01">
</div>
</div>
<div class="paragraph">
<p>The content of this chapter is based on the materials covered in Chapter 7 and 8. While developing the game you&#8217;ll learn how to add menus, dynamically change styling of GUI components and apply an animation effect.</p>
</div>
<div class="sect2">
<h3 id="_developing_the_game_step_by_step">10.1. Developing the Game: Step by Step</h3>
<div class="paragraph">
<p>In Chapter 7 we went through the procedure of creating a new IDEA project, and now you&#8217;ll need do it again. Create a new project selecting JavaFX as a project type. Press Next, and on the next popup window enter <em>TicTacToe</em> as a project name. Press the button Finish and IDEA will generate a new project for you. Rename (right-click | Refactor | Rename) the file <em>sample.fxml</em> into <em>tictactoe.fxml</em> and <em>Main.java</em> into <em>TicTacToe.java</em>. Accordingly, the <code>TicTacToe</code> class should load the file <em>ticktacktoe.fxml</em>, and the window title should read <code>Tic-Tac-Toe</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TicTacToe</span> <span class="tok-kd">extends</span> <span class="tok-n">Application</span> <span class="tok-o">{</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">start</span><span class="tok-o">(</span><span class="tok-n">Stage</span> <span class="tok-n">primaryStage</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span><span class="tok-o">{</span>
        <span class="tok-n">Parent</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-n">FXMLLoader</span><span class="tok-o">.</span><span class="tok-na">load</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">().</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;tictactoe.fxml&quot;</span><span class="tok-o">));</span>
        <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setTitle</span><span class="tok-o">(</span><span class="tok-s">&quot;Tic-Tac-Toe&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span> <span class="tok-mi">300</span><span class="tok-o">,</span> <span class="tok-mi">275</span><span class="tok-o">));</span>
        <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">show</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">launch</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Rename the generated package from <em>sample</em> into <em>mygame</em>. Inside the <em>tictactoe.fxml</em> change the reference to controller to be <code>fx:controller="mygame.Controller"</code>. Now you&#8217;re ready to design the GUI for Tic-Tac-Toe in Scene Builder.</p>
</div>
<div class="sect3">
<h4 id="_developing_the_gui_part_in_scene_builder">10.1.1. Developing the GUI part in Scene Builder</h4>
<div class="paragraph">
<p>Similarly to the examples from Chapter 7, we&#8217;ll separate the GUI design from implementation. So right-click on the file <em>tictactoe.fxml</em> and select the menu option Open in SceneBuilder. This is how the IDEA-generated file <em>tictactoe.fxml</em> looks like in Scene Builder:</p>
</div>
<div id="FIG10-2" class="imageblock">
<div class="content">
<img src="./images/fig_10_02.png" alt="fig 10 02">
</div>
<div class="title">Figure 80. Opening the generated tictactoe.fxml in Scene Builder</div>
</div>
<div class="paragraph">
<p>Firs of all, the <code>&lt;GridPane&gt;</code> is not a good candidate to serve as a root container for our game, which has to have a menu on top. The <code>&lt;BorderPane&gt;</code> is a better choice when you need to have some GUI components to be located on the top of the window. Our game will have a menu on top and a 3x3 grid of squares in the center of the window.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s delete the <code>GridPane</code> from the Hierarchy panel at the bottom left and drag-drop the <code>BorderPane</code> there. The Scene Builder&#8217;s Window should look like this:</p>
</div>
<div id="FIG10-3" class="imageblock">
<div class="content">
<img src="./images/fig_10_03.png" alt="fig 10 03">
</div>
<div class="title">Figure 81. The BorderPane is a root container</div>
</div>
<div class="paragraph">
<p>JavaFX menus are created as a hierarchy of nested components. A <code>Menu</code> container can contain one or more <code>MenuItem</code> components and other <code>Menu</code> components. You can also create a <code>MenuBar</code> or a <code>ContextMenu</code> that include one or more <code>Menu</code> components. I&#8217;ll show how to create a menu bar with two menus <em>Actions</em> and <em>Help</em> for our Tic-Tac-Toe game.</p>
</div>
<div class="paragraph">
<p>A menu bar is usually located at the top of a window. In Scene Builder drop the <code>MenuBar</code> component from the Controls panel onto <code>Insert TOP</code> line in the <code>BorderPane</code> at the bottom left panel. Press a little plus sign to expand the <code>MenuBar</code> in the Hierarchy panel. You&#8217;ll see that it&#8217;ll have the default menus named File, Edit and Help.</p>
</div>
<div id="FIG10-4" class="imageblock">
<div class="content">
<img src="./images/fig_10_04.png" alt="fig 10 04">
</div>
<div class="title">Figure 82. Dropped the MenuBar on Top of the BorderPane</div>
</div>
<div class="paragraph">
<p>We&#8217;re not going to edit anything in the TicTacToe game, so right-click on Edit and select Delete option. Rename the menu File into Actions using the Properties panel of Scene Builder.The <code>Menu</code> File was created with the <code>MenuItem</code> Close - rename it into Quit.</p>
</div>
<div class="paragraph">
<p>Now we&#8217;ll add menu items to the menus Actions and Help. Drop a <code>MenuItem</code> component from the panel Menu onto the menu Actions in the Hierarchy panel. Scene Builder will automatically create Unspecified Action. Rename it into Play. you can use drag and drop to change the order of the menu items.</p>
</div>
<div class="paragraph">
<p>Drop another <code>MenuItem</code> component onto the menu Help. Scene Builder by default creates two menu items:  About and Unspecified Action. Rename the latter to be How to Play. The Hierarchy panel should look as follows:</p>
</div>
<div id="FIG10-5" class="imageblock">
<div class="content">
<img src="./images/fig_10_05.png" alt="fig 10 05">
</div>
<div class="title">Figure 83. The menu bar with 2 menus and 4 menu items</div>
</div>
<div class="paragraph">
<p>Now drop a <code>GridPane</code> from the Containers panel onto the center of the BorderPane. By default, Scene Builder creates a 2x3 grid. Right-click at the column tab "1" and add a column to change the grid dimensions to be 3x3.</p>
</div>
<div class="paragraph">
<p>Change the preferred height of each row to 100 by selecting each row and entering 100 in the Pref Height field on the right panel named Layout: RowConstraints. This is what we&#8217;ve got so far:</p>
</div>
<div id="FIG10-6" class="imageblock">
<div class="content">
<img src="./images/fig_10_06.png" alt="fig 10 06">
</div>
<div class="title">Figure 84. The menu bar on top and the grid in center</div>
</div>
<div class="paragraph">
<p>Save this layout in Scene Builder and run the TicTacToe class in IDEA. You&#8217;ll see a window with a menu on top. The grid won&#8217;t be visible yet, because it has no content. Click on the menu Actions, and the window will look like this:</p>
</div>
<div id="FIG10-7" class="imageblock">
<div class="content">
<img src="./images/fig_10_07.png" alt="fig 10 07">
</div>
<div class="title">Figure 85. Running TicTacToe with an empty grid</div>
</div>
<div class="paragraph">
<p>The grid has 9 cells and we want to add 9 buttons - each button will represent a square on the Tic-Tac-Toe board. You can add the buttons to the grid in Scene Builder as we did in the Calculator in Chapter 7. But it&#8217;ll be faster to do it manually in by editing the content of the file <em>tictactoe.fxml</em> in IDEA&#8217;s editor. Modify the content of this file to look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tok-cp">&lt;?import java.lang.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.BorderPane?&gt;</span>

<span class="tok-nt">&lt;BorderPane</span> <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://javafx.com/javafx/8&quot;</span>
            <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml/1&quot;</span>
            <span class="tok-na">fx:controller=</span><span class="tok-s">&quot;tictactoe.TicTacToeController&quot;</span><span class="tok-nt">&gt;</span>
   <span class="tok-nt">&lt;top&gt;</span>
      <span class="tok-nt">&lt;MenuBar</span> <span class="tok-na">BorderPane.alignment=</span><span class="tok-s">&quot;CENTER&quot;</span><span class="tok-nt">&gt;</span>
        <span class="tok-nt">&lt;menus&gt;</span>
          <span class="tok-nt">&lt;Menu</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Actions&quot;</span><span class="tok-nt">&gt;</span>
            <span class="tok-nt">&lt;items&gt;</span>
              <span class="tok-nt">&lt;MenuItem</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Play&quot;</span> <span class="tok-nt">/&gt;</span>
              <span class="tok-nt">&lt;MenuItem</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Quit&quot;</span> <span class="tok-nt">/&gt;</span>
            <span class="tok-nt">&lt;/items&gt;</span>
          <span class="tok-nt">&lt;/Menu&gt;</span>
          <span class="tok-nt">&lt;Menu</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Help&quot;</span><span class="tok-nt">&gt;</span>
            <span class="tok-nt">&lt;items&gt;</span>
              <span class="tok-nt">&lt;MenuItem</span> <span class="tok-na">text=</span><span class="tok-s">&quot;About&quot;</span> <span class="tok-nt">/&gt;</span>
              <span class="tok-nt">&lt;MenuItem</span> <span class="tok-na">text=</span><span class="tok-s">&quot;How to play&quot;</span> <span class="tok-nt">/&gt;</span>
            <span class="tok-nt">&lt;/items&gt;</span>
          <span class="tok-nt">&lt;/Menu&gt;</span>
        <span class="tok-nt">&lt;/menus&gt;</span>
      <span class="tok-nt">&lt;/MenuBar&gt;</span>
   <span class="tok-nt">&lt;/top&gt;</span>
   <span class="tok-nt">&lt;center&gt;</span>
      <span class="tok-nt">&lt;GridPane</span> <span class="tok-na">fx:id =</span><span class="tok-s">&quot;gameBoard&quot;</span> <span class="tok-na">BorderPane.alignment=</span><span class="tok-s">&quot;CENTER&quot;</span><span class="tok-nt">&gt;</span>
         <span class="tok-nt">&lt;children&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b1&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-nt">/&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b2&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span>  <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b3&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span>  <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-nt">/&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b4&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span>  <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b5&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span>  <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b6&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span>  <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-nt">/&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b7&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-nt">/&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b8&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;1&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-nt">/&gt;</span>
          <span class="tok-nt">&lt;Button</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;b9&quot;</span> <span class="tok-na">prefHeight=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">prefWidth=</span><span class="tok-s">&quot;100.0&quot;</span> <span class="tok-na">GridPane.columnIndex=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-na">GridPane.rowIndex=</span><span class="tok-s">&quot;2&quot;</span> <span class="tok-nt">/&gt;</span>
         <span class="tok-nt">&lt;/children&gt;</span>
      <span class="tok-nt">&lt;/GridPane&gt;</span>
   <span class="tok-nt">&lt;/center&gt;</span>
<span class="tok-nt">&lt;/BorderPane&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that each button has an id. We&#8217;ll need them while processing button clicks in the controller class. Run the TicTacToe class and the window will look pretty close to the final version of our Tic-Tac-Toe game.</p>
</div>
<div id="FIG10-8" class="imageblock">
<div class="content">
<img src="./images/fig_10_08.png" alt="fig 10 08">
</div>
<div class="title">Figure 86. Running TicTacToe - the first square has a focus</div>
</div>
<div class="paragraph">
<p>Do yo see this thin border around the top left square? It happens because by default the firs grid cell <em>has a focus</em>, which means that this particular GUI component is ready to receive input. But we don&#8217;t want to suggest the player starting the game from the top left corner, do we? We want to remove this little border, and it&#8217;s time to create a a special style for a button that will not show the focus.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s create a new file named <em>tictactoe.css</em>. In IDEA, right click on the package name <em>mygame</em>  and use the menu  File | New | File. It&#8217;ll create an empty file. Type the following in there:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="css"><span class="tok-nc">.button</span><span class="tok-p">{</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-n">focus</span><span class="tok-o">-</span><span class="tok-k">color</span><span class="tok-o">:</span> <span class="tok-k">transparent</span><span class="tok-p">;</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">background</span><span class="tok-o">-</span><span class="tok-n">insets</span><span class="tok-o">:</span> <span class="tok-m">-1</span><span class="tok-o">,</span> <span class="tok-m">0</span><span class="tok-o">,</span> <span class="tok-m">1</span><span class="tok-o">,</span> <span class="tok-m">1</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>From Chapter 7 you may remember that this means that every button in our application will have these attributes. Web designers call the styles created for certain types of GUI element <em>type selectors</em>. Hence the attributes defined in the <code>.button</code> section of CSS will apply only for buttons. If we wanted to style, menus, we&#8217;d need to add a section <code>.menu</code> to the CSS file.  Labels would be styled in the <code>.label</code> section, and so on.</p>
</div>
<div class="paragraph">
<p>When I did my search on line to figure out how to remove the focus border, the online documentation suggested that adding the rule <code>-fx-focus-color: transparent;</code> would do the trick. But it didn&#8217;t. Every programmer knows, that not everything works by the book. By doing a little more online research I figured out that adding <code>-fx-background-insets: -1, 0, 1, 1;</code> is needed too.</p>
</div>
<div class="paragraph">
<p>Don&#8217;t be scared that not everything works as it should from the first time. Luckily, each programming language has an online community of people who are willing to share their findings and answer the questions of the rookies. One of the best resources for asking questions and getting help is the Web site <a href="http://stackoverflow.com/">StackOverflow</a>.</p>
</div>
<div class="paragraph">
<p>Now we need to add a line to the <code>main</code> method of the TicTacToe class to load the file <code>tictactoe.css</code>. We did something like this in Chapter 7 while styling the Sign In application. We&#8217;ll also need to do small changes in the <code>main</code> method to keep store the reference to a <code>scene</code> in a separate variable. We also want to set fix the size of the game board by invoking <em>setResizable(false);</em> on the stage object. After these modifications the class <code>TicTacToe</code> will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TicTacToe</span> <span class="tok-kd">extends</span> <span class="tok-n">Application</span> <span class="tok-o">{</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">start</span><span class="tok-o">(</span><span class="tok-n">Stage</span> <span class="tok-n">primaryStage</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span><span class="tok-o">{</span>
        <span class="tok-n">Parent</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-n">FXMLLoader</span><span class="tok-o">.</span><span class="tok-na">load</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">()</span>
                           <span class="tok-o">.</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;tictactoe.fxml&quot;</span><span class="tok-o">));</span>
        <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setTitle</span><span class="tok-o">(</span><span class="tok-s">&quot;TicTacToe&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">Scene</span> <span class="tok-n">scene</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span> <span class="tok-mi">300</span><span class="tok-o">,</span> <span class="tok-mi">275</span><span class="tok-o">);</span>
        <span class="tok-n">scene</span><span class="tok-o">.</span><span class="tok-na">getStylesheets</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">()</span>
            <span class="tok-o">.</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;tictactoe.css&quot;</span><span class="tok-o">).</span><span class="tok-na">toExternalForm</span><span class="tok-o">());</span>
        <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setResizable</span><span class="tok-o">(</span><span class="tok-kc">false</span><span class="tok-o">);</span>
        <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-n">scene</span><span class="tok-o">);</span>
        <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">show</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">launch</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the TicTacToe class now and the focus is gone:</p>
</div>
<div id="FIG10-9" class="imageblock">
<div class="content">
<img src="./images/fig_10_09.png" alt="fig 10 09">
</div>
<div class="title">Figure 87. Running TicTacToe - the first square has no focus</div>
</div>
<div class="paragraph">
<p>The GUI is ready. The name of the Java class that will play the role of the controller was specified in the file <em>tictactoe.fxml</em> as <code>fx:controller="mygame.Controller"</code>. Now let&#8217;s program the application logic in the controller class.</p>
</div>
</div>
<div class="sect3">
<h4 id="_handling_button_clicks_in_controller">10.1.2. Handling Button Clicks in Controller</h4>
<div class="paragraph">
<p>There are different ways of programming computer games. In some games you play against another player, in others - against the computer. Our version of TicTac-Toe will have two players. The first one will place X&#8217;s on the blank buttons and the other one will place O&#8217;s.  Hence we need to keep track of the player&#8217;s number.</p>
</div>
<div class="paragraph">
<p>When the player will click on the button, the event handler should place the appropriate label on the button. The code of the class <code>Controller</code> will take care of this functionality:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Controller</span> <span class="tok-o">{</span>
   <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-n">isFirstPlayer</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>

   <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">buttonClickHandler</span><span class="tok-o">(</span><span class="tok-n">ActionEvent</span> <span class="tok-n">evt</span><span class="tok-o">){</span>

        <span class="tok-n">Button</span> <span class="tok-n">clickedButton</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">Button</span><span class="tok-o">)</span> <span class="tok-n">evt</span><span class="tok-o">.</span><span class="tok-na">getTarget</span><span class="tok-o">();</span>
        <span class="tok-n">String</span> <span class="tok-n">buttonLabel</span> <span class="tok-o">=</span> <span class="tok-n">clickedButton</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>

        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">buttonLabel</span><span class="tok-o">)</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">isFirstPlayer</span><span class="tok-o">){</span>
            <span class="tok-n">clickedButton</span><span class="tok-o">.</span><span class="tok-na">setText</span><span class="tok-o">(</span><span class="tok-s">&quot;X&quot;</span><span class="tok-o">);</span>
            <span class="tok-n">isFirstPlayer</span> <span class="tok-o">=</span> <span class="tok-kc">false</span><span class="tok-o">;</span>
        <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">buttonLabel</span><span class="tok-o">)</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-o">!</span><span class="tok-n">isFirstPlayer</span><span class="tok-o">){</span>
            <span class="tok-n">clickedButton</span><span class="tok-o">.</span><span class="tok-na">setText</span><span class="tok-o">(</span><span class="tok-s">&quot;O&quot;</span><span class="tok-o">);</span>
            <span class="tok-n">isFirstPlayer</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
        <span class="tok-o">}</span>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>buttonClickHandler</code> will handle events generated when the player clicks on a button. Note that we check if the button&#8217;s label is blank, then the program displays either X or O depending on which player clicked on the button. To let the GUI know about this event handler we need to add the attribute <code>onAction="#buttonClickHandler"</code> to each <code>&lt;Button&gt;</code> tag in the file <em>tictactoe.fxml</em>.
After this is done, run the <code>TicTacToe</code> program again. Start clicking on empty squares, and the program will take turns in placing the X&#8217;s and O&#8217;s on them.</p>
</div>
<div id="FIG10-10" class="imageblock">
<div class="content">
<img src="./images/fig_10_10.png" alt="fig 10 10">
</div>
<div class="title">Figure 88. Running TicTacToe - after 3 clicks</div>
</div>
<div class="paragraph">
<p>Great,the View communicates with the Controller! But the X&#8217;s and O&#8217;s look unproportionally small in these large squares. Besides, the gray color does not look too exciting. It&#8217;s time to add some styling to our GUI components.</p>
</div>
</div>
<div class="sect3">
<h4 id="_styling_buttons_and_the_menu_bar">10.1.3. Styling Buttons and the Menu Bar</h4>
<div class="paragraph">
<p>Let&#8217;s add more style attributes to the <code>.button</code> and add a new type selector for the <code>.menu-bar</code> to the file <em>tictactoe.css</em>. You can find the color names and their codes in the  <a href="https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#typecolor">JavaFX CSS Reference Guide</a>. This is what I came up with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="css"><span class="tok-nc">.button</span><span class="tok-p">{</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-n">focus</span><span class="tok-o">-</span><span class="tok-k">color</span><span class="tok-o">:</span> <span class="tok-k">transparent</span><span class="tok-p">;</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">background</span><span class="tok-o">-</span><span class="tok-n">insets</span><span class="tok-o">:</span> <span class="tok-m">-1</span><span class="tok-o">,</span> <span class="tok-m">0</span><span class="tok-o">,</span> <span class="tok-m">1</span><span class="tok-o">,</span> <span class="tok-m">1</span><span class="tok-p">;</span>

  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">font-weight</span><span class="tok-o">:</span> <span class="tok-k">bold</span><span class="tok-p">;</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">font-size</span><span class="tok-o">:</span> <span class="tok-m">36</span><span class="tok-p">;</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">text</span><span class="tok-o">-</span><span class="tok-n">fill</span><span class="tok-o">:</span> <span class="tok-nb">blue</span><span class="tok-p">;</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">background-color</span><span class="tok-o">:</span> <span class="tok-nb">violet</span><span class="tok-p">;</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">border-color</span><span class="tok-o">:</span><span class="tok-nb">darkblue</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-nc">.menu-bar</span><span class="tok-p">{</span>
  <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">background-color</span><span class="tok-o">:</span> <span class="tok-nb">gold</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you run the <code>TicTacToe</code> program now and start clicking on buttons, the game board will look like this:</p>
</div>
<div id="FIG10-11" class="imageblock">
<div class="content">
<img src="./images/fig_10_11.png" alt="fig 10 11">
</div>
<div class="title">Figure 89. Adding colors to the game board</div>
</div>
<div class="paragraph">
<p>As you can see, my artistic abilities are limited, but if you spend some time learning CSS, you may come up with a lot fancier game board than mine.</p>
</div>
<div class="paragraph">
<p>All JavaFX components are pre-styled, and the combination of the styles is called <em>theme</em>. The default theme of all JavaFX components is called caspian. By defining your own CSS rules you can override the defaults. Scene Builder has a menu View | Show CSS analyzer, which allows you to see the default styles of your GUI components. If you&#8217;re interesting in learning more about styling with Scene Builder, watch the video titled <a href="https://www.youtube.com/watch?v=7Nu3_5doZK4">"In-Depth Layout and Styling with the JavaFX Scene Builder"</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_the_game_strategy">10.1.4. Implementing the Game Strategy</h4>
<div class="paragraph">
<p>In the beginning of this chapter I&#8217;ve described the game strategy. We&#8217;ll implement it in the <code>Controller</code> class. On each button click we need to check if there is already a winning combination of X&#8217;s or O&#8217;s. If there is, the program should highlight the winning combination. In case of a draw, the player may select the menu option Play to start playing again.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll write a method <code>find3InARow</code>, which on every click  will check each row, column, and diagonals on the board to see if they have the same labels. The method <code>find3InARow</code> will be invoked from the method <code>buttonClickHandler</code>. If the winning combination is found, the program will invoke the method <code>highlightWinningCombo</code> to show the winning combination in different style.</p>
</div>
<div class="paragraph">
<p>To compare the labels of the buttons we need to have references to their <code>Button</code> objects, which we&#8217;ll get using the injection mechanism offered by the <code>@FXML</code> annotation as we did in Chapter 8. We&#8217;ll also need to have a reference to the <code>GridPane</code>, which is a container for all buttons. You&#8217;ll see its use in the section "Handling the Tic-Tac-Toe Menu Play".</p>
</div>
<div class="paragraph">
<p>Each button will have a matching variable in the controller annotated with <code>@FXML</code>. The grid will also have a reference variable. We&#8217;ll just add the following member variables to the <code>Controller</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b1</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b2</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b3</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b4</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b5</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b6</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b7</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b8</span><span class="tok-o">;</span>
<span class="tok-nd">@FXML</span> <span class="tok-n">Button</span> <span class="tok-n">b9</span><span class="tok-o">;</span>

<span class="tok-nd">@FXML</span> <span class="tok-n">GridPane</span> <span class="tok-n">gameBoard</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s write the method <code>find3InARow</code> that will methodically compare the non-blank labels of the buttons in each row, column, and both diagonals. If three labels are the same, the code should highlight the winning combination. This is how the code in the method <code>find3InARow</code> will look:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-nf">find3InARow</span><span class="tok-o">(){</span>
       <span class="tok-c1">//Row 1</span>
       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">!=</span><span class="tok-n">b1</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b1</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b2</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span>
           <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b2</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b3</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()){</span>
           <span class="tok-n">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">b1</span><span class="tok-o">,</span><span class="tok-n">b2</span><span class="tok-o">,</span><span class="tok-n">b3</span><span class="tok-o">);</span>
           <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
       <span class="tok-c1">//Row 2</span>
       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">!=</span><span class="tok-n">b4</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b4</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b5</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span>
           <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b5</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b6</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()){</span>
           <span class="tok-n">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">b4</span><span class="tok-o">,</span><span class="tok-n">b5</span><span class="tok-o">,</span><span class="tok-n">b6</span><span class="tok-o">);</span>
           <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
       <span class="tok-c1">//Row 3</span>
       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">!=</span><span class="tok-n">b7</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b7</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b8</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span>
           <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b8</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b9</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()){</span>
           <span class="tok-n">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">b7</span><span class="tok-o">,</span><span class="tok-n">b8</span><span class="tok-o">,</span><span class="tok-n">b9</span><span class="tok-o">);</span>
           <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
       <span class="tok-c1">//Column 1</span>
       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">!=</span><span class="tok-n">b1</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b1</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b4</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span>
           <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b4</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b7</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()){</span>
           <span class="tok-n">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">b1</span><span class="tok-o">,</span><span class="tok-n">b4</span><span class="tok-o">,</span><span class="tok-n">b7</span><span class="tok-o">);</span>
           <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
       <span class="tok-c1">//Column 2</span>
       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">!=</span><span class="tok-n">b2</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b2</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b5</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span>
           <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b5</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b8</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()){</span>
           <span class="tok-n">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">b2</span><span class="tok-o">,</span><span class="tok-n">b5</span><span class="tok-o">,</span><span class="tok-n">b8</span><span class="tok-o">);</span>
           <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
       <span class="tok-c1">//Column 3</span>
       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">!=</span><span class="tok-n">b3</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b3</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b6</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span>
           <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b6</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b9</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()){</span>
           <span class="tok-n">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">b3</span><span class="tok-o">,</span><span class="tok-n">b6</span><span class="tok-o">,</span><span class="tok-n">b9</span><span class="tok-o">);</span>
           <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
       <span class="tok-c1">//Diagonal 1</span>
       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">!=</span><span class="tok-n">b1</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b1</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b5</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span>
           <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b5</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b9</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()){</span>
           <span class="tok-n">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">b1</span><span class="tok-o">,</span><span class="tok-n">b5</span><span class="tok-o">,</span><span class="tok-n">b9</span><span class="tok-o">);</span>
           <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
       <span class="tok-c1">//Diagonal 2</span>
       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">!=</span><span class="tok-n">b3</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b3</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b5</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span>
           <span class="tok-o">&amp;&amp;</span> <span class="tok-n">b5</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">b7</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">()){</span>
           <span class="tok-n">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">b3</span><span class="tok-o">,</span><span class="tok-n">b5</span><span class="tok-o">,</span><span class="tok-n">b7</span><span class="tok-o">);</span>
           <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
       <span class="tok-o">}</span>
       <span class="tok-k">return</span> <span class="tok-kc">false</span><span class="tok-o">;</span>
   <span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you&#8217;ll check the <code>fx:id</code> of each button in the file <em>tictactoe.fxml</em>, you&#8217;ll see that the first row is represented by the buttons <code>b1</code>, <code>b2</code>, and <code>b3</code>. The first column is represented by the buttons <code>b1</code>, <code>b4</code>, and <code>b7</code>. One diagonal consists of the buttons <code>b1</code>, <code>b5</code>, and <code>b9</code>. It should be pretty easy to read and understand the code of the method <code>find3InARow</code>, isn&#8217;t it? The method <code>highlightWinningCombo</code> will get the references to the three winning buttons as the method arguments, and it has to change their styles.</p>
</div>
</div>
<div class="sect3">
<h4 id="_highlighting_the_winning_combination">10.1.5. Highlighting the Winning Combination</h4>
<div class="paragraph">
<p>The styles of the winning buttons should be changed dynamically (during the runtime). First of all, we need to come up with the style for displaying the winning button and add it to the CSS file. Then the class <code>Controller</code> will invoke the method <code>setStyle</code> on them providing the name of the winning style.</p>
</div>
<div class="paragraph">
<p>I want to change the background of the winning buttons, but this time I won&#8217;t use just a single color, but a <em>color gradient</em>. In computer graphics color gradients refer to filling the area with different colors that are smoothly transitioning from one color to another. The color transitioning can be linear or radial, and <a href="http://en.wikipedia.org/wiki/Color_gradient">this Wikipedia article</a> gives you some examples of both.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll use radial gradients in our game. With gradients you can use more than two colors. I&#8217;ll use three colors in the gradient for the winning squares. The background color will transition from white to light yellow, and then to lawn green. I&#8217;ll use red for the text of the label on the winning square.</p>
</div>
<div class="paragraph">
<p>To dynamically change the style of a GUI component you can call the method <code>setStyle</code> and specify the color as an argument, for example:</p>
</div>
<div class="paragraph">
<p><code>myButton.setStyle("-fx-text-fill: red;");</code></p>
</div>
<div class="paragraph">
<p>But embedding CSS rules in your Java program is not a good idea. What if you decide to change the styling (e.g. to change the color from red to pink)? You don&#8217;t want to search for all places in your Java where this style was used. Besides, changing the styles in the code would require to recompile your Java program. It&#8217;s much better to keep the style definitions in the CSS file.</p>
</div>
<div class="paragraph">
<p>So far we&#8217;ve been using CSS <em>type selectors</em> that can change the style of the specified component types. But CSS allows you to define and name a style that&#8217;s not intended for a specific component type and can be applied by name to various components. In CSS such styles are called <em>class selectors</em>. Let&#8217;s add a style selector called <code>.winning-square</code> to the file <code>tictactoe.css</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="css"><span class="tok-nc">.winning-square</span> <span class="tok-p">{</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">text</span><span class="tok-o">-</span><span class="tok-n">fill</span><span class="tok-o">:</span> <span class="tok-nb">red</span><span class="tok-p">;</span>
    <span class="tok-o">-</span><span class="tok-n">fx</span><span class="tok-o">-</span><span class="tok-k">background-color</span><span class="tok-o">:</span> <span class="tok-n">radial</span><span class="tok-o">-</span><span class="tok-n">gradient</span><span class="tok-p">(</span> <span class="tok-n">radius</span> <span class="tok-m">100%</span><span class="tok-o">,</span> <span class="tok-nb">white</span><span class="tok-o">,</span> <span class="tok-nb">lightyellow</span><span class="tok-o">,</span> <span class="tok-nb">lawngreen</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The style selector <code>.winning-square</code> includes two style rules: one for setting the button&#8217;s text color to red, and another to set the button&#8217;s background color to radial gradient. Our Java program has to get a reference to the existing styles of the button and add a <code>.winning-square</code>, which will override both the text and the background color of the button.The method <code>highlightWinningCombo</code> will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">highlightWinningCombo</span><span class="tok-o">(</span><span class="tok-n">Button</span> <span class="tok-n">first</span><span class="tok-o">,</span> <span class="tok-n">Button</span> <span class="tok-n">second</span><span class="tok-o">,</span> <span class="tok-n">Button</span> <span class="tok-n">third</span><span class="tok-o">){</span>
    <span class="tok-n">first</span><span class="tok-o">.</span><span class="tok-na">getStyleClass</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;winning-square&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">second</span><span class="tok-o">.</span><span class="tok-na">getStyleClass</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;winning-square&quot;</span><span class="tok-o">);</span>
    <span class="tok-n">third</span><span class="tok-o">.</span><span class="tok-na">getStyleClass</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;winning-square&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Try playing the game after adding the methods <code>find3InARow</code> and <code>highlightWinningCombo</code> to the class <code>Controller</code>. The winning combination will look as follows:</p>
</div>
<div id="FIG10-12" class="imageblock">
<div class="content">
<img src="./images/fig_10_12.png" alt="fig 10 12">
</div>
<div class="title">Figure 90. We&#8217;ve got the winner!</div>
</div>
<div class="paragraph">
<p>JavaFX includes various <a href="https://docs.oracle.com/javafx/2/visual_effects/jfxpub-visual_effects.htm">visual effects</a> and <a href="https://docs.oracle.com/javafx/2/animations/jfxpub-animations.htm">transition based animations</a> that can make your GUI more fun to use.</p>
</div>
<div class="paragraph">
<p>To use the effect or animation you need to pick one from the package <code>javafx.scene.effect</code> or <code>javafx.animation</code> respectively. I&#8217;ll show you how to apply a fade transition the <code>FadeTransition</code> to our winning buttons. Each winning button will keep fading and coming back to its original state. We&#8217;ll add the method <code>applyFadeTransition</code> to the <code>Controller</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">applyFadeTransition</span><span class="tok-o">(</span><span class="tok-n">Button</span> <span class="tok-n">winningButton</span><span class="tok-o">)</span> <span class="tok-o">{</span>

  <span class="tok-n">FadeTransition</span> <span class="tok-n">ft</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">FadeTransition</span><span class="tok-o">(</span><span class="tok-n">Duration</span><span class="tok-o">.</span><span class="tok-na">millis</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">),</span> <span class="tok-n">winningButton</span><span class="tok-o">);</span>

  <span class="tok-n">ft</span><span class="tok-o">.</span><span class="tok-na">setFromValue</span><span class="tok-o">(</span><span class="tok-mf">1.0</span><span class="tok-o">);</span>
  <span class="tok-n">ft</span><span class="tok-o">.</span><span class="tok-na">setToValue</span><span class="tok-o">(</span><span class="tok-mf">0.1</span><span class="tok-o">);</span>
  <span class="tok-n">ft</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">);</span>
  <span class="tok-n">ft</span><span class="tok-o">.</span><span class="tok-na">setAutoReverse</span><span class="tok-o">(</span><span class="tok-kc">true</span><span class="tok-o">);</span>
  <span class="tok-n">ft</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates an instance of the animation class <code>FadeTransition</code> that will span 1000 milliseconds (1 second) and assigns this animation to the winning button. Then the code sets the fading parameters to change the opacity of the button from 1.0 to 0.1 (changing to 0.0 would make the button completely transparent).</p>
</div>
<div class="paragraph">
<p>Setting the style count to 10 plays the animation 10 times. Because of <code>setAutoReverse(true)</code>, the animation will proceed forward on the first cycle, then reverses on the second cycle, and so on. The method <code>play</code> starts the animation. Adding the following three lines to the method <code>highlightWinningCombo</code> will play the animation on the  <code>winningButton</code> component.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">applyFadeTransition</span><span class="tok-o">(</span><span class="tok-n">first</span><span class="tok-o">);</span>
<span class="tok-n">applyFadeTransition</span><span class="tok-o">(</span><span class="tok-n">second</span><span class="tok-o">);</span>
<span class="tok-n">applyFadeTransition</span><span class="tok-o">(</span><span class="tok-n">third</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The screen shot shown on Figure 10-12 should give you an idea of how the end of the animation cycle will look like.</p>
</div>
<div id="FIG10-13" class="imageblock">
<div class="content">
<img src="./images/fig_10_13.png" alt="fig 10 13">
</div>
<div class="title">Figure 91. Faded winning buttons</div>
</div>
<div class="paragraph">
<p>Compare this image with Figure 10-11, or better run the code that comes with the book to see the animation in action.</p>
</div>
</div>
<div class="sect3">
<h4 id="_handling_the_tic_tac_toe_menu_play">10.1.6. Handling the Tic-Tac-Toe Menu Play</h4>
<div class="paragraph">
<p>The winner is found, but how to start a new game? Our gane has a menu Actions with the menu item Play. Now we need to make it working so the players can start a new game when either a winning combination is found or it&#8217;s a draw.</p>
</div>
<div class="paragraph">
<p>The good news is that clicks on menu items are processes the same way as clicks on buttons. In the file <em>tictactoe.fxml</em> we&#8217;ll assign <code>onAction</code> event handler for the menu Play:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><span class="tok-nt">&lt;MenuItem</span> <span class="tok-na">text=</span><span class="tok-s">&quot;Play&quot;</span> <span class="tok-na">onAction=</span><span class="tok-s">&quot;#menuClickHandler&quot;</span><span class="tok-nt">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the user clicks on the menu Play, the controller needs to reset buttons' labels to blank and remove styling from the winning buttons. We&#8217;ll do this by getting a hold of all children of our <code>GridPane</code> and invoking the method <code>forEach</code> passing a short lambda expression to it. This is what the method <code>menuClickHandler</code> will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">menuClickHandler</span><span class="tok-o">(</span><span class="tok-n">ActionEvent</span> <span class="tok-n">evt</span><span class="tok-o">){</span>

   <span class="tok-n">MenuItem</span> <span class="tok-n">clickedMenu</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">MenuItem</span><span class="tok-o">)</span> <span class="tok-n">evt</span><span class="tok-o">.</span><span class="tok-na">getTarget</span><span class="tok-o">();</span>
   <span class="tok-n">String</span> <span class="tok-n">menuLabel</span> <span class="tok-o">=</span> <span class="tok-n">clickedMenu</span><span class="tok-o">.</span><span class="tok-na">getText</span><span class="tok-o">();</span>

   <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-s">&quot;Play&quot;</span><span class="tok-o">.</span><span class="tok-na">equals</span><span class="tok-o">(</span><span class="tok-n">menuLabel</span><span class="tok-o">)){</span>           <b class="conum">(1)</b>
       <span class="tok-n">ObservableList</span><span class="tok-o">&lt;</span><span class="tok-n">Node</span><span class="tok-o">&gt;</span> <span class="tok-n">buttons</span> <span class="tok-o">=</span>       <b class="conum">(2)</b>
              <span class="tok-n">gameBoard</span><span class="tok-o">.</span><span class="tok-na">getChildren</span><span class="tok-o">();</span>

       <span class="tok-n">buttons</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">btn</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
         <span class="tok-o">((</span><span class="tok-n">Button</span><span class="tok-o">)</span> <span class="tok-n">btn</span><span class="tok-o">).</span><span class="tok-na">setText</span><span class="tok-o">(</span><span class="tok-s">&quot;&quot;</span><span class="tok-o">);</span>      <b class="conum">(3)</b>

         <span class="tok-n">btn</span><span class="tok-o">.</span><span class="tok-na">getStyleClass</span><span class="tok-o">().</span><span class="tok-na">remove</span><span class="tok-o">(</span><span class="tok-s">&quot;winning-square&quot;</span><span class="tok-o">);</span> <b class="conum">(4)</b>
       <span class="tok-o">});</span>

       <span class="tok-n">isFirstPlayer</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">;</span>  <b class="conum">(5)</b>
   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This code processes just the clicks on the menu Play, but I included the if statement to check the menu label in case you decided to implement other menus too.</p>
</li>
<li>
<p>We&#8217;re getting references to all children of the grid (the buttons) in one shot. The method <code>getChildren</code> returns a JavaFX collection of type <code>ObservableList</code> located in the package <code>javafx.collections</code>.</p>
</li>
<li>
<p>Each Java collection implements the method <code>forEach</code>, which gets a lambda expression to set the label of each button to an empty string.</p>
</li>
<li>
<p>Then we&#8217;re getting the reference to the styles of the button and remove the style <code>winning-square</code> if exists.</p>
</li>
<li>
<p>Finally, the code sets the variable <code>isFirstPlayer</code> to <code>true</code> so the next game will place an X as the first label.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Enjoy our Tic-Tac-Toe game!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_playing_against_computer">10.2. Project: Playing Against Computer</h3>
<div class="paragraph">
<p>Our version of the game is created for two players. In this assignment you&#8217;ll need to change the program so the player can play against the computer. The player will keep playing with X&#8217;s, and the computer with O&#8217;s.</p>
</div>
<div class="paragraph">
<p>Write a method <code>goComputer</code> that should try to find if there are any two buttons with O&#8217;s in each row, column or a diagonal. If found, the program should place a O to the winning position. If not found, the computer should place a O next to another O. If no O&#8217;s are found, the computer should try to place an O in the middle of the board. If the middle square is occupied, place a O on the first blank button.</p>
</div>
<div class="paragraph">
<p>The method <code>goComputer</code> should be called from the method <code>buttonClickHandler</code> right after the line that invokes the method <code>find3InARow</code>.</p>
</div>
<div class="sect3">
<h4 id="_challenge_yourself_4">10.2.1. Challenge Yourself</h4>
<div class="paragraph">
<p>Play an audio when the winning combination is found. To do this learn how to use the JavaFX class <code>AudioClip</code> located in the package <code>javafx.scene.media</code>.
:toc-placement!:
:imagesdir: .</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_working_with_files_and_serialization">11. Working With Files and Serialization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After a program ends it gets erased from memory. When you run it again, its content is loaded into memory and all Java objects are created from scratch. If you’d like to save some results of the program execution, they must be stored in files on a hard disk, a solid-state drive, a memory stick, or other device that can store the data for a long time.</p>
</div>
<div class="paragraph">
<p>In this chapter you’ll learn how to save data on disks and read them back into memory using Java Input/Output(I/O) streams.A program can open an <em>output stream</em> with a file on disk and write the important data there. Similarly, you can open an <em>input stream</em> and read the data from a file.</p>
</div>
<div class="paragraph">
<p>For example, if a player wins a game and  you want to save the score, you can save it in a file called scores.txt using an output stream. If you want to save the player&#8217;s preferences (e.g. colors or fonts) you can save them in a file, and read and apply them when the user runs your program again.</p>
</div>
<div class="paragraph">
<p>A program reads or writes data from/to a stream serially byte after byte, character after character, etc.  Since your program may use different data types like <code>String</code>, <code>int</code>, <code>double</code>, you should use an appropriate Java stream, for example a byte stream, a character stream, or a data stream.</p>
</div>
<div class="paragraph">
<p>In this chapter I&#8217;ll show you how to use I/O streams with files located in your computer. In the next chapter you&#8217;ll learn about I/O streams that can work with remote data located in other computers connected into a network.</p>
</div>
<div class="paragraph">
<p>All classes that can work with file streams are located in packages  <code>java.io</code> and <code>java.nio</code>.  Classes from the <code>java.io</code>
implement blocking I/O: When bytes are being read/written, they become unavailable for other threads of execution. This may not be an issue with small files like a history of game scores, but may become an issue with large files that contain a gigabyte or more. The package <code>java.nio</code> offers a set of classes with improved performance as well as some useful utility classes.</p>
</div>
<div class="paragraph">
<p>I&#8217;ll start with explaining you the basics of working with streams of bytes using classes from the <code>java.io</code> package, and then give you some examples of working with classes from <code>java.nio</code>.</p>
</div>
<div class="sect2">
<h3 id="_basics_of_working_with_streams">11.1. Basics of Working With Streams</h3>
<div class="paragraph">
<p>Think of a stream as a pipe. If you just need to read the data you have one pipe where the data flow through this pipe from the data source into your program. If you need to write the data into a storage, it&#8217;s another pipe where the data flow from your program. As with any pipe, it has to be opened to start the flow and closed to stop it.</p>
</div>
<div class="paragraph">
<p>Java supports several types of streams, but no matter what type you are going to use, the following three steps should be done in your program:</p>
</div>
<div class="paragraph">
<p>• Open a stream that points at some data store e.g. a local or remote file.</p>
</div>
<div class="paragraph">
<p>• Read or write data from/to this stream.</p>
</div>
<div class="paragraph">
<p>• Close the stream (Java can do it automatically).</p>
</div>
<div class="paragraph">
<p>In the real world people use different types of pipes for carrying different contents (e.g. gas, oil, milkshakes). Similarly, Java programmers use different classes depending on the type of data they need to carry over a stream. Some streams are used for carrying text, some for bytes, et al.</p>
</div>
<div class="sect3">
<h4 id="_byte_streams">11.1.1. Byte Streams</h4>
<div class="paragraph">
<p>To create a program that reads a file, interprets and displays its content on the screen, you need to know what type of data is stored in this file. On the other hand, a program that just copies files from one place to another, does not even need to know is it an image, a text, or a file with music. Such a copy program reads the original file in memory as a <em>set of bytes</em>, and then writes them into a destination folder..</p>
</div>
<div class="paragraph">
<p>Originaly <code>java.io</code> package have not offered a fast way to copy files and you&#8217;d need to write a program that reads byte after byte using Java classes <code>FileInputStream</code> or <code>FileOutputStream</code>.</p>
</div>
<div class="paragraph">
<p>If your program has to work only with text files, you could use the classes <code>Reader</code> and <code>Writer</code>, which are specifically meant for reading character streams.</p>
</div>
<div class="paragraph">
<p>After selecting the appropriate class you&#8217;ll be invoking one of its methods to read or write the file. For example the <a href="http://docs.oracle.com/javase/8/docs/api/java/io/FileInputStream.html">online documentation</a> of the class <code>FileInputStream</code> includes the method <code>read</code> having the following signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">read</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">IOException</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This should tell you that the method <code>read</code> returns an integer value and may throw the <code>IOException</code>, which is an error that may happen if the file is corrupted or deleted, a device failure happened et al. Hence, you must enclose the invocation of the method <code>read</code> into a try-catch block as explained in Chapter 9. To get a specific reason of this exception you&#8217;ll call the method <code>getMessage</code> on the exception object.</p>
</div>
<div class="paragraph">
<p>Each byte in a file is represented by a code, which is a positive integer number. The method <code>read</code> returns the value of this code.</p>
</div>
<div class="paragraph">
<p>The next example shows how to use the class <code>FileInputStream</code> to read the bytes from a file named <em>abc.dat</em>. This little program won&#8217;t interpret the meaning of each byte - it&#8217;ll just print their code values.</p>
</div>
<div class="paragraph">
<p>I&#8217;ll start with creating a new Java project <em>Chapter11</em> in IDEA. Then I&#8217;ll create a new empty file <em>abc.dat</em> in the root folder of the project (right-click on the project name and select the menu New | File). Finally, I&#8217;ll type the following text in <em>abc.dat</em>:</p>
</div>
<div class="paragraph">
<p><em>This is a test file</em></p>
</div>
<div class="paragraph">
<p>Then I&#8217;ll create a new Java class <code>MyByteReader</code> that will read and print the content of the file <em>abc.dat</em>. But let&#8217;s pretend that we don&#8217;t know that the content of this file is text - I want to read it byte by byte and print each byte&#8217;s code (not a letter) separated by a space character. The class <code>MyByteReader</code> will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.FileInputStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyByteReader</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-k">try</span> <span class="tok-o">(</span><span class="tok-n">FileInputStream</span> <span class="tok-n">myFile</span> <span class="tok-o">=</span>             <b class="conum">(1)</b>
              <span class="tok-k">new</span> <span class="tok-nf">FileInputStream</span><span class="tok-o">(</span><span class="tok-s">&quot;abc.dat&quot;</span><span class="tok-o">)){</span>

      <span class="tok-kt">int</span> <span class="tok-n">byteValue</span><span class="tok-o">;</span>

      <span class="tok-k">while</span> <span class="tok-o">((</span><span class="tok-n">byteValue</span> <span class="tok-o">=</span> <span class="tok-n">myFile</span><span class="tok-o">.</span><span class="tok-na">read</span><span class="tok-o">())</span> <span class="tok-o">!=</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">{</span> <b class="conum">(2)</b>

          <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-n">byteValue</span> <span class="tok-o">+</span> <span class="tok-s">&quot; &quot;</span><span class="tok-o">);</span>   <b class="conum">(3)</b>
      <span class="tok-o">}</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>                <b class="conum">(4)</b>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Could not read file: &quot;</span> <span class="tok-o">+</span>
                <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>First we open the file for reading (using a default character set) by creating an instance of the class <code>FileInputStream</code> passing the file name <code>abc.dat</code> as a parameter. In Chapter 9 you&#8217;ve learned the syntax of the try-catch blocks. But here I use a special syntax called <em>try-with-resources</em>. When there are some program resources that has to be opened and closed (e.g. <code>FileInputStream</code>), just instantiate them in parentheses right after the <code>try</code> keyword and Java will close them for you automatically. This spares you from writing a <code>finally</code> block containing the code for closing resources.</p>
</li>
<li>
<p>This line starts a <code>while</code> loop that calls the method <code>read()</code>, which reads one byte, assigns its value to the variable <code>byteCode</code>, and compares it with <code>-1</code> (the end of file indicator).</p>
</li>
<li>
<p>If the value in the current byte is not equal to <code>-1</code>, we print it followed by a space character. The loop ends when it reads the <code>-1</code> byte.</p>
</li>
<li>
<p>If an <code>IOException</code> occurs, catch it and print the reason of this error.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Running this program prints the following numbers that represent encoding of the text "This is a test file":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-mi">84</span> <span class="tok-mi">104</span> <span class="tok-mi">105</span> <span class="tok-mi">115</span> <span class="tok-mi">32</span> <span class="tok-mi">105</span> <span class="tok-mi">115</span> <span class="tok-mi">32</span> <span class="tok-mi">97</span> <span class="tok-mi">32</span> <span class="tok-mi">116</span> <span class="tok-mi">101</span> <span class="tok-mi">115</span> <span class="tok-mi">116</span> <span class="tok-mi">32</span> <span class="tok-mi">102</span> <span class="tok-mi">105</span> <span class="tok-mi">108</span> <span class="tok-mi">101</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Writing bytes into a file works similarly, but you&#8217;d use the class <code>FileOutputStream</code> and its method <code>write()</code> as shown in the program <code>MyByteWriter</code> below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.FileOutputStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyByteWriter</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-c1">// Some byte values represented by integer codes</span>
    <span class="tok-kt">int</span> <span class="tok-n">someData</span><span class="tok-o">[]=</span> <span class="tok-o">{</span><span class="tok-mi">56</span><span class="tok-o">,</span><span class="tok-mi">230</span><span class="tok-o">,</span><span class="tok-mi">123</span><span class="tok-o">,</span><span class="tok-mi">43</span><span class="tok-o">,</span><span class="tok-mi">11</span><span class="tok-o">,</span><span class="tok-mi">37</span><span class="tok-o">};</span>   <b class="conum">(1)</b>

    <span class="tok-k">try</span> <span class="tok-o">(</span><span class="tok-n">FileOutputStream</span> <span class="tok-n">myFile</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">FileOutputStream</span><span class="tok-o">(</span><span class="tok-s">&quot;xyz.dat&quot;</span><span class="tok-o">)){</span>            <b class="conum">(2)</b>

        <span class="tok-kt">int</span> <span class="tok-n">arrayLength</span> <span class="tok-o">=</span> <span class="tok-n">someData</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">;</span>

        <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">arrayLength</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">++){</span>
            <span class="tok-n">myFile</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">someData</span><span class="tok-o">[</span><span class="tok-n">i</span><span class="tok-o">]);</span>        <b class="conum">(3)</b>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Could not write into the file: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>     <b class="conum">(4)</b>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The program <code>MyByteWriter</code> populates an array <code>someData</code> with integer codes that may represent some characters</p>
</li>
<li>
<p>Then the program opens the file <em>xyz.dat</em></p>
</li>
<li>
<p>and writes each of the integers into the file.</p>
</li>
<li>
<p>If an error occurs, we catch it and print the reason.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_bufferred_streams">11.1.2. Bufferred Streams</h4>
<div class="paragraph">
<p>The code examples in the Byte Streams section were reading or writing into a a file one byte at a time. One invocation of <code>read</code> would read one byte, and one invocation of <code>write</code> would write one byte. In general, disk access is much slower than the processing performed in memory; that’s why it’s not a good idea to access the disk a thousand times to read a file of 1,000 bytes. To minimize the number of times the disk is accessed, Java provides buffers, which serve as reservoirs of data.</p>
</div>
<div id="FIG11-1" class="imageblock">
<div class="content">
<img src="./images/fig_11_BufferedStream.png" alt="fig 11 BufferedStream">
</div>
</div>
<div class="paragraph">
<p>The class <code>BufferedInputStream</code> works as a middleman between <code>FileInputStream</code> and the file itself. It reads a big chunk of bytes from a file into memory (a buffer) in one shot, and the <code>FileInputStream</code> object then reads single bytes from there, which are fast memory-to-memory operations. <code>BufferedOutputStream</code> works similarly with the class <code>FileOutputStream</code>.</p>
</div>
<div class="paragraph">
<p>The main idea here is to minimize disk access.
Buffered streams are not changing the type of the original streams — they just make reading more efficient. A program performs stream chaining (or stream piping) to connect streams, just as pipes are connected in plumbing.</p>
</div>
<div class="paragraph">
<p>The next code listing shows a class <code>MyBufferedByteReader</code>, which is a slightly modified version of <code>MyByteReader</code>. I just attached "another fragment to the pipe" - the <code>BufferedInputStream</code> from the <code>java.io</code> package.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.BufferedInputStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.FileInputStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyBufferedByteReader</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-k">try</span> <span class="tok-o">(</span><span class="tok-n">FileInputStream</span> <span class="tok-n">myFile</span> <span class="tok-o">=</span> <span class="tok-k">new</span>
                    <span class="tok-nf">FileInputStream</span><span class="tok-o">(</span><span class="tok-s">&quot;abc.dat&quot;</span><span class="tok-o">);</span>  <b class="conum">(1)</b>
         <span class="tok-n">BufferedInputStream</span> <span class="tok-n">buff</span> <span class="tok-o">=</span> <span class="tok-k">new</span>
         <span class="tok-nf">BufferedInputStream</span><span class="tok-o">(</span><span class="tok-n">myFile</span><span class="tok-o">);){</span>

        <span class="tok-kt">int</span> <span class="tok-n">byteValue</span><span class="tok-o">;</span>

        <span class="tok-k">while</span> <span class="tok-o">((</span><span class="tok-n">byteValue</span> <span class="tok-o">=</span> <span class="tok-n">buff</span><span class="tok-o">.</span><span class="tok-na">read</span><span class="tok-o">())</span> <span class="tok-o">!=</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-o">)</span> <span class="tok-o">{</span> <b class="conum">(2)</b>

            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-n">byteValue</span> <span class="tok-o">+</span> <span class="tok-s">&quot; &quot;</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">e</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Here we use the try-with-resources syntax again. This time we create an instance of <code>FileInputReader</code> and then and instance of <code>BufferedInputReader</code> providing the <code>FileInputReader</code> as an argument. This is how we connect to fragments of the pipe that uses the file <em>abc.dat</em> as the source of data.</p>
</li>
<li>
<p>Under the hood the <code>BufferedInputReader</code> reads  bytes from disk in chunks into a memory buffer, and then the method <code>read</code> reads one byte at time from memory.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The program <code>MyBufferedByteReader</code> produces the same output as <code>MyByteReader</code>, but will work just a little bit faster.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_character_streams">11.2. Character Streams</h3>
<div class="paragraph">
<p>Text in Java is represented as a set of <code>char</code> values, which are encoded based on the character sets capable to represent alphabet or other symbols used in a particular human language. As you can imagine, the text in English, Ukrainian, and Japanese should use different character encodings. The names of some of the standard character sets for English-speaking people are US-ASCII, UTF-8, and UTF-16.</p>
</div>
<div class="paragraph">
<p>Each JVM has a default character set, which could be changed during the JVM startup. You can also find out what&#8217;s the default character in your Java installation by invoking the method <code>defaultCharset</code> on the class <code>Charset</code>, and I&#8217;ll show how to do it in the section "Reading Text Files".</p>
</div>
<div class="paragraph">
<p>The Java classes <code>FileReader</code> and <code>FileWriter</code> from the package <code>java.io</code> were specifically created to work with text files, but they work only with default character encoding and don’t handle localization properly.</p>
</div>
<div class="paragraph">
<p>For efficiency, the reading can be piped with the <code>BufferedReader</code> or <code>BufferedWriter</code>, which read or write from/to the stream buffering characters. I&#8217;ll show you examples of working with text files in the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_files_using_java_nio">11.3. Working With Files Using java.nio</h3>
<div class="paragraph">
<p>The <code>java.nio</code> package contains classes that offer a simplified and more efficient way of working with files, and you&#8217;ll see some useful examples here. But first I&#8217;d like to introduce a classes Path and Paths that will represent a file you&#8217;re planning to work with.</p>
</div>
<div class="sect3">
<h4 id="_using_classes_path_and_paths">11.3.1. Using Classes Path and Paths</h4>
<div class="paragraph">
<p>So far we worked with files located in the root directory of our IDEA project. But files are grouped in directories (folders), which in turn can include nested directories and files. More over, files are represented differently in Windows, Mac OS and Linux operational systems. For example, in Windows the pull path to a file may look like this:
<em>c:\mystuff\games\tictactoeScores.txt</em></p>
</div>
<div class="paragraph">
<p>In Mac OS or Linux disks are not named with letters like <em>c:</em> or <em>d:</em>. For example, the path to user&#8217;s files starts from the <em>Users</em> directory. Besides a backslash is not used for a separator symbol there. A full path to a file <em>tictactoeScores.txt</em> of the user <em>mary</em> may look like this:</p>
</div>
<div class="paragraph">
<p><em>/Users/mary/mystuff/games/tictactoeScores.txt</em></p>
</div>
<div class="paragraph">
<p>So before even opening a file you can create an instance of the object <code>Path</code>, which doesn&#8217;t open or reads a file, but represents the location of the file on the disk.</p>
</div>
<div class="paragraph">
<p>There is a special class <code>Paths</code> (yes, in plural) that includes a number of static methods, and in particular, can build the <code>Path</code> object for you. For example, you can invoke the method <code>get</code> passing the name of the file as the argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Path</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;abc.dat&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Since we specified just the file name without a directory, the program will look for the file in the current directory, which in IDEA is the directory of your project (e.g. <em>Chapter11</em>). Outside of the IDE, the current directory is the one where the program was started from.</p>
</div>
<div class="paragraph">
<p>But if we were to create a directory <em>data</em> at the root of our project and move the file <em>abc.dat</em> there, then the <em>relative path</em> to the file starting from the project root would look as <code>"data/abc.dat"</code> on Mac OS or <code>"data\\abc.dat"</code> on Windows. Two backslashes in a Java string correspond to one backslash in the Windows operational system.</p>
</div>
<div class="paragraph">
<p>But your IDEA project is also located in some directory on disk, e.g. <em>chapter11</em>, which is a subdirectory of <em>practicalJava</em>. The file can be represented by the <em>absolute path</em>, which may look like this:</p>
</div>
<div class="paragraph">
<p><em>c:\practicalJava\chapter11\data\abc.dat</em></p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p><em>/Users/mary/practicalJava/chapter11/data/abc.dat</em></p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_class_files">11.3.2. Using the Class Files</h4>
<div class="paragraph">
<p>The class <code>Files</code> has several methods that will help you with file manipulations. It can create, delete, rename and copy files. There are methods to read and write files too.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reading_a_file">11.3.3. Reading a File</h4>
<div class="paragraph">
<p>The simplest way to read a file is by calling the method <code>readAllBytes</code> on the class <code>Files</code>. The following line reads the file <em>abc.dat</em> into an array of bytes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">myFileBytes</span> <span class="tok-o">=</span> <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">readAllBytes</span><span class="tok-o">(</span><span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;abc.dat&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the file contains text, you can read the file into a <code>String</code> variable like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">String</span> <span class="tok-n">myFileText</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">String</span><span class="tok-o">(</span><span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">readAllBytes</span><span class="tok-o">(</span><span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;abc.dat&quot;</span><span class="tok-o">)));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to read a text file into a collection, where each element contains one line from the file use the method <code>readAllLines</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">myFileLines</span> <span class="tok-o">=</span> <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">readAllLines</span><span class="tok-o">(</span><span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;abc.dat&quot;</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>readAllBytes</code> and <code>readAllLines</code> do not use buffers, but for small files is not important.  For more efficient reading you can ask the class <code>Files</code> to create a buffered stream. For example, the program <code>MyTextFileReader</code> uses the method <code>newBufferedReader</code> for more efficient reading. Here I used the same file <em>abc.dat</em> located in the root directory of our IDEA project Chapter11.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">niosamples</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.io.BufferedReader</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.charset.Charset</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.charset.StandardCharsets</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Files</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Path</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Paths</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyTextFileReader</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">){</span>

    <span class="tok-n">Path</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;abc.dat&quot;</span><span class="tok-o">);</span>     <b class="conum">(1)</b>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The absolute path is &quot;</span> <span class="tok-o">+</span>
                         <span class="tok-n">path</span><span class="tok-o">.</span><span class="tok-na">toAbsolutePath</span><span class="tok-o">());</span>

    <span class="tok-k">try</span> <span class="tok-o">{</span>
      <span class="tok-k">if</span> <span class="tok-o">(</span> <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">exists</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">)){</span>         <b class="conum">(2)</b>
          <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The file size is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">size</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">));</span>
      <span class="tok-o">}</span>

      <span class="tok-n">BufferedReader</span> <span class="tok-n">bufferedReader</span><span class="tok-o">=</span>    <b class="conum">(3)</b>
               <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newBufferedReader</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">StandardCharsets</span><span class="tok-o">.</span><span class="tok-na">UTF_8</span><span class="tok-o">);</span>

      <span class="tok-n">String</span> <span class="tok-n">currentLine</span><span class="tok-o">;</span>

      <span class="tok-k">while</span> <span class="tok-o">((</span><span class="tok-n">currentLine</span> <span class="tok-o">=</span>             <b class="conum">(4)</b>
             <span class="tok-n">bufferedReader</span><span class="tok-o">.</span><span class="tok-na">readLine</span><span class="tok-o">())</span> <span class="tok-o">!=</span> <span class="tok-kc">null</span><span class="tok-o">){</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">currentLine</span><span class="tok-o">);</span>

      <span class="tok-o">}</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t read file: &quot;</span> <span class="tok-o">+</span>
                             <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>             <b class="conum">(5)</b>
           <span class="tok-s">&quot;Your default character encoding is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">Charset</span><span class="tok-o">.</span><span class="tok-na">defaultCharset</span><span class="tok-o">());</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The program starts with creating a <code>Path</code> object from <em>abc.dat</em> and printing its absolute path.</p>
</li>
<li>
<p>Then it checks if the file represented by the path exists and prints its size in bytes.</p>
</li>
<li>
<p>Here we&#8217;re opening the buffered reader capable of reading text encoded with a character set <code>UTF-8</code>.</p>
</li>
<li>
<p>Reading the text lines from the buffer.</p>
</li>
<li>
<p>Print the default character set being used for those who are interested.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When I ran the program <code>MyTextFileReader</code> it printed the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">The</span> <span class="tok-n">absolute</span> <span class="tok-n">path</span> <span class="tok-n">is</span> <span class="tok-o">/</span><span class="tok-n">Users</span><span class="tok-o">/</span><span class="tok-n">yfain11</span><span class="tok-o">/</span><span class="tok-n">IdeaProjects</span><span class="tok-o">/</span><span class="tok-n">jfk</span><span class="tok-o">/</span><span class="tok-n">Chapter11</span><span class="tok-o">/</span><span class="tok-n">abc</span><span class="tok-o">.</span><span class="tok-na">dat</span>
<span class="tok-n">The</span> <span class="tok-n">file</span> <span class="tok-n">size</span> <span class="tok-n">is</span> <span class="tok-mi">19</span>
<span class="tok-n">This</span> <span class="tok-n">is</span> <span class="tok-n">a</span> <span class="tok-n">test</span> <span class="tok-n">file</span>
<span class="tok-n">Your</span> <span class="tok-k">default</span> <span class="tok-n">character</span> <span class="tok-n">encoding</span> <span class="tok-n">is</span> <span class="tok-n">UTF</span><span class="tok-o">-</span><span class="tok-mi">8</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now make an experiment to see if the <code>IOException</code> is thrown if the file is not found where expected to be. Just move the file <em>abc.dat</em> into a different directory and re-run <code>MyTextFileReader</code>. Now the console output looks different:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Can</span><span class="tok-err">&#39;</span><span class="tok-n">t</span> <span class="tok-n">read</span> <span class="tok-nl">file:</span> <span class="tok-n">abc</span><span class="tok-o">.</span><span class="tok-na">dat</span>
<span class="tok-n">Your</span> <span class="tok-k">default</span> <span class="tok-n">character</span> <span class="tok-n">encoding</span> <span class="tok-n">is</span> <span class="tok-n">UTF</span><span class="tok-o">-</span><span class="tok-mi">8</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This output was produced by the <code>catch</code> section from <code>MyTextFileReader</code> where the code invoked the <code>getMessage</code> method on the <code>IOException</code> object.</p>
</div>
</div>
<div class="sect3">
<h4 id="_writing_into_a_file">11.3.4. Writing Into a File</h4>
<div class="paragraph">
<p>Writing into a file is as reading one. Start with creating create an instance of the <code>Path</code> object.  If you want to write bytes, create a byte array, populate it with data and call the method <code>write</code> on the class <code>Files</code>. If you want to write some text into a file, just convert the text from a <code>String</code> into a byte array and then call the method <code>write</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Path</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;data/scores.txt&quot;</span><span class="tok-o">);</span>

<span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">myScore</span><span class="tok-o">.</span><span class="tok-na">getBytes</span><span class="tok-o">(),</span>
                    <span class="tok-n">StandardOpenOption</span><span class="tok-o">.</span><span class="tok-na">APPEND</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When your program opens a file for writing, you need to consider different options. For example, you may want to append text to an existing file, hence the above code snippet passes the argument  <code>StandardOpenOption.APPEND</code> to method <code>write</code>. If you want to create a file from scratch every time you run the program, use the option <code>StandardOpenOption.CREATE</code>.</p>
</div>
<div class="paragraph">
<p>The following program <code>MyTextFileWriter</code> writes the text into a file <code>scores.txt</code> in the directory <code>data</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">niosamples</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Files</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Path</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Paths</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.StandardOpenOption</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyTextFileWriter</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">){</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The current directory is &quot;</span><span class="tok-o">+</span>
         <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">getProperty</span><span class="tok-o">(</span><span class="tok-s">&quot;user.dir&quot;</span><span class="tok-o">));</span>   <b class="conum">(1)</b>

    <span class="tok-n">String</span> <span class="tok-n">myScore</span> <span class="tok-o">=</span>                        <b class="conum">(2)</b>
                <span class="tok-s">&quot;My game score is 28000 &quot;</span> <span class="tok-o">+</span>
                     <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot;\n&quot;</span><span class="tok-o">;</span>

    <span class="tok-n">Path</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;data/scores.txt&quot;</span><span class="tok-o">);</span> <b class="conum">(3)</b>

    <span class="tok-k">try</span> <span class="tok-o">{</span>

        <span class="tok-k">if</span> <span class="tok-o">(</span> <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">exists</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">)){</span>            <b class="conum">(4)</b>
            <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">myScore</span><span class="tok-o">.</span><span class="tok-na">getBytes</span><span class="tok-o">(),</span>
                      <span class="tok-n">StandardOpenOption</span><span class="tok-o">.</span><span class="tok-na">APPEND</span><span class="tok-o">);</span>
        <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
            <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">myScore</span><span class="tok-o">.</span><span class="tok-na">getBytes</span><span class="tok-o">(),</span>
                      <span class="tok-n">StandardOpenOption</span><span class="tok-o">.</span><span class="tok-na">CREATE</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The game score was saved at &quot;</span> <span class="tok-o">+</span> <span class="tok-n">path</span><span class="tok-o">.</span><span class="tok-na">toAbsolutePath</span><span class="tok-o">());</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t write file: &quot;</span>
                             <span class="tok-o">+</span> <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>For illustration purposes I want the program to print its current directory, which is stored in a special Java variable <code>user.dir</code>.</p>
</li>
<li>
<p>Then I populate a string with the content "My game score is 28000" and concatenate the current date and time followed by <code>\n</code>, which is the end of line marker.</p>
</li>
<li>
<p>Creating a <code>Path</code> object pointing at the file <code>score.txt</code>.</p>
</li>
<li>
<p>Check if the file <code>score.txt</code> already exists, append the new content to it. If the file doesn&#8217;t exists – create it and write the content there.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The program <code>MyTextFileWriter</code> printed the following on my console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">The</span> <span class="tok-n">current</span> <span class="tok-n">directory</span> <span class="tok-n">is</span> <span class="tok-o">/</span><span class="tok-n">Users</span><span class="tok-o">/</span><span class="tok-n">yfain11</span><span class="tok-o">/</span><span class="tok-n">IdeaProjects</span><span class="tok-o">/</span><span class="tok-n">jfk</span><span class="tok-o">/</span><span class="tok-n">Chapter11</span>
<span class="tok-n">The</span> <span class="tok-n">game</span> <span class="tok-n">score</span> <span class="tok-n">was</span> <span class="tok-n">saved</span> <span class="tok-n">at</span> <span class="tok-o">/</span><span class="tok-n">Users</span><span class="tok-o">/</span><span class="tok-n">yfain11</span><span class="tok-o">/</span><span class="tok-n">IdeaProjects</span><span class="tok-o">/</span><span class="tok-n">jfk</span><span class="tok-o">/</span><span class="tok-n">Chapter11</span><span class="tok-o">/</span><span class="tok-n">data</span><span class="tok-o">/</span><span class="tok-n">scores</span><span class="tok-o">.</span><span class="tok-na">txt</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After running <code>MyTextFileWriter</code> twice I opened the file <em>scores.txt</em>. Here&#8217;s what I found there:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">My</span> <span class="tok-n">game</span> <span class="tok-n">score</span> <span class="tok-n">is</span> <span class="tok-mi">28000</span> <span class="tok-mi">2015</span><span class="tok-o">-</span><span class="tok-mi">01</span><span class="tok-o">-</span><span class="tok-mi">11</span><span class="tok-nl">T09:</span><span class="tok-mi">07</span><span class="tok-o">:</span><span class="tok-mf">49.352</span>
<span class="tok-n">My</span> <span class="tok-n">game</span> <span class="tok-n">score</span> <span class="tok-n">is</span> <span class="tok-mi">28000</span> <span class="tok-mi">2015</span><span class="tok-o">-</span><span class="tok-mi">01</span><span class="tok-o">-</span><span class="tok-mi">11</span><span class="tok-nl">T09:</span><span class="tok-mi">10</span><span class="tok-o">:</span><span class="tok-mf">11.049</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each time the program saved the same score of 28000
attaching the system date and time. Of course, you could calculate and write the real score of a game. This is a simple way of printing the local date and time. The time portion goes after the letter "T" and shows hours, minutes, seconds, and nanoseconds. In the Java package <code>java.time</code> you can find multiple classes and methods providing formatting date and time for pretty printing. Go through Oracle&#8217;s tutorial on working with <a href="http://docs.oracle.com/javase/tutorial/datetime/TOC.html">Date and Time API</a> if interested.</p>
</div>
<div class="paragraph">
<p>For writing small files like <em>scores.txt</em> you don&#8217;t need to use buffered streams. For large files though, use BufferedWriter, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">String</span> <span class="tok-n">myScore</span> <span class="tok-o">=</span> <span class="tok-s">&quot;My game score is 28000 &quot;</span> <span class="tok-o">+</span>
                    <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot;\n&quot;</span><span class="tok-o">;</span>
<span class="tok-n">BufferedWrited</span> <span class="tok-n">writer</span> <span class="tok-o">=</span> <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newBufferedWriter</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">StandardOpenOption</span><span class="tok-o">.</span><span class="tok-na">APPEND</span><span class="tok-o">);</span>

<span class="tok-n">writer</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">myScore</span><span class="tok-o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The class <code>MyTextFileBufferedFileWriter</code> shows how to write the game score using <code>BufferedWriter</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">niosamples</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.io.BufferedWriter</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.charset.StandardCharsets</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Files</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Path</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Paths</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.StandardOpenOption</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MyTextFileBufferedFileWriter</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-n">String</span> <span class="tok-n">myScore</span> <span class="tok-o">=</span> <span class="tok-s">&quot;My game score is 28000 &quot;</span> <span class="tok-o">+</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-s">&quot;\n&quot;</span><span class="tok-o">;</span>

    <span class="tok-n">Path</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;data/scores.txt&quot;</span><span class="tok-o">);</span>

    <span class="tok-k">try</span> <span class="tok-o">(</span><span class="tok-n">BufferedWriter</span> <span class="tok-n">writer</span> <span class="tok-o">=</span>
                    <span class="tok-n">getBufferedWriter</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">))</span> <span class="tok-o">{</span>

        <span class="tok-n">writer</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">myScore</span><span class="tok-o">);</span>

        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The game score was saved at &quot;</span> <span class="tok-o">+</span> <span class="tok-n">path</span><span class="tok-o">.</span><span class="tok-na">toAbsolutePath</span><span class="tok-o">());</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t write file: &quot;</span> <span class="tok-o">+</span>
                                  <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>

  <span class="tok-c1">// The factory of BufferedWriter objects</span>
  <span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">BufferedWriter</span> <span class="tok-nf">getBufferedWriter</span><span class="tok-o">(</span><span class="tok-n">Path</span> <span class="tok-n">path</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">IOException</span><span class="tok-o">{</span>

      <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">exists</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">))</span> <span class="tok-o">{</span>
          <span class="tok-k">return</span> <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newBufferedWriter</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span>
                        <span class="tok-n">StandardOpenOption</span><span class="tok-o">.</span><span class="tok-na">APPEND</span><span class="tok-o">);</span>
      <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
          <span class="tok-k">return</span> <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newBufferedWriter</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span>
                         <span class="tok-n">StandardOpenOption</span><span class="tok-o">.</span><span class="tok-na">CREATE</span><span class="tok-o">);</span>
      <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this class I&#8217;ve moved the code that check if the file exists into a separate method <code>getBufferedWriter</code>. I did it to illustrate so-called <em>factory design pattern</em>. A factory can build different objects, right?  The method <code>getBufferedWriter</code> also builds different instances of a <code>BufferedReader</code> depending on the existence of the file referred by <code>path</code>. In programmers jargon the methods that create and return different object instances based on some parameter are called factories.</p>
</div>
<div class="paragraph">
<p>If you run the program <code>MyTextFileBufferedFileWriter</code> it&#8217;ll produce the same results as <code>MyTextFileFileWriter</code>. If you use these programs for writing short texts you won&#8217;t notice the difference in the speed of execution. But when you need to write large amount of information  <code>MyTextFileBufferedFileWriter</code> will work faster.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_arguments">11.4. Command-Line Arguments</h3>
<div class="paragraph">
<p>So far all of the code examples had the file names stored right in the code, or as  programmers say, <em>hard-coded</em> in the program.  This means that to create a program that reads a files with a different name you’d have to modify the code and recompile the program, which is not nice. You should create universal programs that can take parameters (e.g.the name of the file) from a command line during the program launch.</p>
</div>
<div class="paragraph">
<p>In the first lesson of this book you&#8217;ve been running the program HelloWorld from a command window:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">java</span> <span class="tok-n">HelloWorld</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But you&#8217;re allowed to add command-line arguments right after the name of the program, for example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">java</span> <span class="tok-n">HelloWorld</span> <span class="tok-n">Mary</span> <span class="tok-n">Smith</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case the program HelloWorld would get two command line parameters: Mary and Smith. If you remember, we always write the method main with a <code>String</code> array as an  argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The JVM passes the <code>String</code> array to the main method, and if you start a program without any command line arguments, this array remains empty.  Otherwise, this array will have exactly as many elements as the number of command-line arguments  passed to the program.</p>
</div>
<div class="paragraph">
<p>Let’s see  how we can use these command line arguments in a very simple class that will just print them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PrintArguments</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

      <span class="tok-c1">// How many arguments we&#39;ve got?</span>
      <span class="tok-kt">int</span> <span class="tok-n">numberOfArgs</span> <span class="tok-o">=</span> <span class="tok-n">args</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">;</span>

      <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">&lt;</span><span class="tok-n">numberOfArgs</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">++){</span>
          <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;I&#39;ve got &quot;</span> <span class="tok-o">+</span> <span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-n">i</span><span class="tok-o">]);</span>
      <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This program loops through the array <code>args</code> and prints the arguments received from the command line, if any. Run this program from the Command (or Terminal) Window as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">java</span> <span class="tok-n">PrintArguments</span> <span class="tok-n">Mary</span> <span class="tok-n">Smith</span> <span class="tok-mf">123.5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The program will print the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">I</span><span class="tok-err">&#39;</span><span class="tok-n">ve</span> <span class="tok-n">got</span> <span class="tok-n">Mary</span>
<span class="tok-n">I</span><span class="tok-err">&#39;</span><span class="tok-n">ve</span> <span class="tok-n">got</span> <span class="tok-n">Smith</span>
<span class="tok-n">I</span><span class="tok-err">&#39;</span><span class="tok-n">ve</span> <span class="tok-n">got</span> <span class="tok-mi">123</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The JVM placed <code>Mary</code> into the array element <code>args[0]</code>, <code>Smith</code> into <code>args[1]</code>, and <code>123</code> into `args[2].</p>
</div>
<div class="paragraph">
<p>Command-line arguments are always being passed to a program as strings.  It’s the responsibility of a program to convert the data to the appropriate data type, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span> <span class="tok-n">myScore</span> <span class="tok-o">=</span> <span class="tok-n">Integer</span><span class="tok-o">.</span><span class="tok-na">parseInt</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">2</span><span class="tok-o">]);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It’s always a good idea to check if the command line contains  correct number of arguments. Do this right in the beginning of the method <code>main</code>. If the program doesn’t receive expected arguments, it should print a brief message about it and immediately stop by using a special method <code>exit</code> of the class <code>System</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
 <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">.</span><span class="tok-na">length</span> <span class="tok-o">!=</span> <span class="tok-mi">3</span><span class="tok-o">){</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
             <span class="tok-s">&quot;Please provide arguments, for example:&quot;</span><span class="tok-o">);</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;java PrintArguments Mary Smith 123&quot;</span><span class="tok-o">);</span>

  <span class="tok-c1">// Exit the program</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">exit</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can test your programs that take command-line arguments without leaving IntelliJ IDEA. Just open the menu Run, select Edit Configurations and enter the values in the field Program arguments as shown below:</p>
</div>
<div id="FIG11-2" class="imageblock">
<div class="content">
<img src="./images/fig_11_commandline.png" alt="fig 11 commandline">
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s write a program to copy files. To make this program working with any files, the names of the original and destination files have to be passed to this program as command-line arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Files</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Path</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Paths</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FileCopy</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">.</span><span class="tok-na">length</span> <span class="tok-o">!=</span> <span class="tok-mi">2</span><span class="tok-o">)</span> <span class="tok-o">{</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
               <span class="tok-s">&quot;Please provide source and destination file names, for example:&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;java FIleCopy abc.datcopyOfabc.dat&quot;</span><span class="tok-o">);</span>

        <span class="tok-c1">// Exit the program</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">exit</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">);</span>
   <span class="tok-o">}</span>
    <span class="tok-n">Path</span> <span class="tok-n">sourcePath</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">]);</span>
   <span class="tok-n">Path</span> <span class="tok-n">destinationPath</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">1</span><span class="tok-o">]);</span>
    <span class="tok-k">try</span> <span class="tok-o">{</span>
       <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">copy</span><span class="tok-o">(</span><span class="tok-n">sourcePath</span><span class="tok-o">,</span> <span class="tok-n">destinationPath</span><span class="tok-o">);</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The file &quot;</span> <span class="tok-o">+</span> <span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">]</span> <span class="tok-o">+</span> <span class="tok-s">&quot; is copied to &quot;</span> <span class="tok-o">+</span> <span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">1</span><span class="tok-o">]);</span>

    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t copy file: &quot;</span> <span class="tok-o">+</span>
                               <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The file copy is done by calling the method <code>copy</code> on the class <code>Files</code>. This program will work fine as long as the destination file doesn&#8217;t exist. You can check for file existence in the program by using the method <code>exists</code> of the class <code>Files</code> as it was done in the class <code>MyTextFileReader</code> earlier.</p>
</div>
</div>
<div class="sect2">
<h3 id="_serialization_turning_an_object_into_bytes">11.5. Serialization: Turning an Object Into Bytes</h3>
<div class="paragraph">
<p>Imagine a building that, with a push of a button, can be turned into a pile of construction materials. Load all these materials on the truck and drive to a different city. On arrival push another button, and the building is magically re-created in its original form. This is what Java serialization is about, but instead of a building we&#8217;ll use a Java object. By “clicking the serialize button” JVM turns an instance of an object into a pile of bytes, and “clicking the deserialize button” re-creates the object.</p>
</div>
<div class="paragraph">
<p>Why would you need such functionality? Say you are working on a board game and want to be able to save the current state of the game so the player and continue playing it tomorrow even if the computer will need to be turned off. The program needs to save the state of the game in a file, and when the player launches the game again, the program should load the saved state and recreate the situation on the board.  Creating a Java class with fields like player name, level, score, lives can be a good way to represent a state of the game.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">class</span> <span class="tok-nc">GameState</span> <span class="tok-o">{</span>
   <span class="tok-n">String</span> <span class="tok-n">playerName</span><span class="tok-o">;</span>
   <span class="tok-kt">int</span> <span class="tok-n">level</span><span class="tok-o">;</span>
   <span class="tok-kt">int</span> <span class="tok-n">score</span><span class="tok-o">;</span>
   <span class="tok-kt">int</span> <span class="tok-n">remainingLives</span><span class="tok-o">;</span>

   <span class="tok-c1">// other fields go here</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the user selects the menu option <em>Save Game State</em>, the program has to create an instance of the object <code>GameState</code>, assign the values to its fields and save these values in a file. But which format to save these values in? Create a <code>String</code> variable, and concatenate all these values into it separating the values with commas? It&#8217;s a lot of work. Also, you&#8217;d need to remember the order of these concatenated values so when you need to read them you know to which fields of the object <code>GameState</code> to assign them to.</p>
</div>
<div class="paragraph">
<p>Luckily, Java greatly simplifies this process. You can create and instance of the Java object, populate it with the values, and then <em>serialize</em> this instance into a bunch of bytes in a special format that remembers the structure of the class <code>GameState</code>. Accordingly, when you need to re-create the instance of the <code>GameState</code> for these bytes, you can <em>deserialize</em> the object in one shot with all its fields values.</p>
</div>
<div class="paragraph">
<p>A Java object can be serialized if it implements <code>Serializabe</code> interface. It&#8217;s a very simple interface to implement, as it doesn&#8217;t declare any abstract methods. Just add <code>implements Serializable</code> to the class declaration to make a class serializable. The following class <code>GameState</code> will represent the state of the game.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.Serializable</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">GameState</span> <span class="tok-kd">implements</span> <span class="tok-n">Serializable</span> <span class="tok-o">{</span>

    <span class="tok-n">String</span> <span class="tok-n">playerName</span><span class="tok-o">;</span>                      <b class="conum">(1)</b>
    <span class="tok-kt">int</span> <span class="tok-n">level</span><span class="tok-o">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">score</span><span class="tok-o">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">remainingLives</span><span class="tok-o">;</span>

  <span class="tok-n">GameState</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">playerName</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">Level</span><span class="tok-o">,</span>   <b class="conum">(2)</b>
                   <span class="tok-kt">int</span> <span class="tok-n">score</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">remainingLives</span><span class="tok-o">){</span>

    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">playerName</span> <span class="tok-o">=</span> <span class="tok-n">playerName</span><span class="tok-o">;</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">level</span><span class="tok-o">=</span><span class="tok-n">level</span><span class="tok-o">;</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">score</span><span class="tok-o">=</span><span class="tok-n">score</span><span class="tok-o">;</span>
    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">remainingLives</span> <span class="tok-o">=</span> <span class="tok-n">remainingLives</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">(){</span>                 <b class="conum">(3)</b>

    <span class="tok-k">return</span> <span class="tok-s">&quot;PlayerName: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">playerName</span> <span class="tok-o">+</span> <span class="tok-s">&quot;, level:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">level</span> <span class="tok-o">+</span> <span class="tok-s">&quot;, score: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">score</span> <span class="tok-o">+</span>
    <span class="tok-s">&quot;, remainingLives: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">remainingLives</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>GameState</code> class has four fields that describe the current state of the game.</p>
</li>
<li>
<p>The class constructor populates these fields with the values passed as arguments.</p>
</li>
<li>
<p>We override the method <code>toString</code> to be able to print the content of the fields. The method <code>toString</code> is declared in the class <code>Object</code> - the ancestor of all Java classes. For example, if you write <code>System.out.println(myObject)</code>, Java finds and invokes the <code>toString`method on the object `myObject</code>. You&#8217;ll see this in action in the class <code>GameStateManager</code> below.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Java objects are serialized into an I/O stream of type <code>ObjectOutputStream</code>. You&#8217;ll need to create an instance of <code>OutputStream</code>, pipe it with <code>ObjectOutputStream</code>, and invoke a method <code>writeObject</code>.</p>
</div>
<div class="paragraph">
<p>To deserialize (to read back) a Java object you need to create an instance of <code>InputStream</code>,  pipe it with <code>ObjectInputStream</code>, and invoke a method <code>readObject</code>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s create a class <code>GameStateManager</code> that will perform the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create an instance of the class <code>GameState</code> and populate its fields with some data.</p>
</li>
<li>
<p>Serialize this instance of <code>GameState</code> into the file named <code>gamestate.ser</code>.</p>
</li>
<li>
<p>Deserialize the instance of <code>GameState</code> from the file
<code>gamestate.ser</code> into a new object.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.ObjectInputStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.ObjectOutputStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Files</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Path</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Paths</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.StandardOpenOption</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">GameStateManager</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-c1">// Create and populate the GameState object</span>
    <span class="tok-n">GameState</span> <span class="tok-n">gameState</span> <span class="tok-o">=</span>
              <span class="tok-k">new</span> <span class="tok-nf">GameState</span><span class="tok-o">(</span><span class="tok-s">&quot;Mary&quot;</span><span class="tok-o">,</span> <span class="tok-mi">45</span><span class="tok-o">,</span><span class="tok-mi">28000</span><span class="tok-o">,</span><span class="tok-mi">3</span><span class="tok-o">);</span> <b class="conum">(1)</b>

    <span class="tok-c1">// The file for serialization/deserialization</span>
    <span class="tok-n">Path</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;gamestate.ser&quot;</span><span class="tok-o">);</span>      <b class="conum">(2)</b>

    <span class="tok-n">saveGameState</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">gameState</span><span class="tok-o">);</span>              <b class="conum">(3)</b>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The GameStateObject is serialized&quot;</span><span class="tok-o">);</span>

    <span class="tok-n">GameState</span> <span class="tok-n">deserializedGameState</span> <span class="tok-o">=</span>            <b class="conum">(4)</b>
                               <span class="tok-n">loadGameState</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">);</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Deserialized game state; &quot;</span> <span class="tok-o">+</span>
                             <span class="tok-n">deserializedGameState</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

   <span class="tok-c1">// Serialize the gameState into a file</span>
  <span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">saveGameState</span><span class="tok-o">(</span><span class="tok-n">Path</span> <span class="tok-n">path</span><span class="tok-o">,</span>    <b class="conum">(5)</b>
                               <span class="tok-n">GameState</span> <span class="tok-n">gameState</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-k">try</span> <span class="tok-o">(</span><span class="tok-n">ObjectOutputStream</span> <span class="tok-n">whereToWrite</span> <span class="tok-o">=</span>        <b class="conum">(6)</b>
          <span class="tok-k">new</span> <span class="tok-nf">ObjectOutputStream</span><span class="tok-o">(</span><span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newOutputStream</span><span class="tok-o">(</span>
                    <span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">StandardOpenOption</span><span class="tok-o">.</span><span class="tok-na">CREATE</span><span class="tok-o">))){</span>

        <span class="tok-n">whereToWrite</span><span class="tok-o">.</span><span class="tok-na">writeObject</span><span class="tok-o">(</span><span class="tok-n">gameState</span><span class="tok-o">);</span>      <b class="conum">(7)</b>

    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
           <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t serialize file: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>

  <span class="tok-c1">// Deserialize the GameState from a file</span>
  <span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">GameState</span> <span class="tok-nf">loadGameState</span><span class="tok-o">(</span><span class="tok-n">Path</span> <span class="tok-n">path</span><span class="tok-o">){</span>

      <span class="tok-n">GameState</span> <span class="tok-n">loadedGameState</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>

      <span class="tok-k">try</span> <span class="tok-o">(</span><span class="tok-n">ObjectInputStream</span> <span class="tok-n">whereToReadFrom</span> <span class="tok-o">=</span>    <b class="conum">(8)</b>
                   <span class="tok-k">new</span> <span class="tok-nf">ObjectInputStream</span><span class="tok-o">(</span><span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newInputStream</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">))){</span>

          <span class="tok-n">loadedGameState</span><span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">GameState</span><span class="tok-o">)</span> <span class="tok-n">whereToReadFrom</span><span class="tok-o">.</span><span class="tok-na">readObject</span><span class="tok-o">();</span>      <b class="conum">(9)</b>

      <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">ClassNotFoundException</span> <span class="tok-n">cnfe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
          <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t find the declaration of GameState: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">cnfe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
      <span class="tok-o">}</span>  <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
          <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t deserialize file: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
      <span class="tok-o">}</span>

      <span class="tok-k">return</span> <span class="tok-n">loadedGameState</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The program starts with creating and populating the game state object. In this example I used hard-coded values, but in a real game they should be taken from the variables that reflect the actual game status.</p>
</li>
<li>
<p>The serialized file&#8217;s name is <code>gamestate.ser</code> and it&#8217;ll be represented by the <code>Path</code> object.</p>
</li>
<li>
<p>Then we call the method <code>saveGameState</code> that will serialize the object <code>GameState</code> into a file.</p>
</li>
<li>
<p>After serialization is complete, we deserialize it back into another instance of the game state object. The variable <code>deserializedGameState</code> points at this new instance.</p>
</li>
<li>
<p>The method <code>saveGameState</code> is responsible for serializing the object. It takes two parameters - the path to the file and the reference to the object that has to be serialized.</p>
</li>
<li>
<p>Now we&#8217;re opening the file&#8217;s <code>OutputStream</code> and pipe it up with the <code>ObjectOutputStream</code>.</p>
</li>
<li>
<p>It takes just one line of code to serialize the <code>GameState</code> object into the file using the method <code>write</code>.</p>
</li>
<li>
<p>The method <code>loadGameState</code> deserializes the object from a file, and we&#8217;re opening the <code>InputStream</code> and pipe it up with the <code>ObjectInputStream</code>.The data from file will be read in the same format and order as it was written. So if you&#8217;ll change the declaration of the class <code>GameState</code> between serialization and deserialization, Java will throw <code>InvalidClassException</code>.</p>
</li>
<li>
<p>It takes just one line of code to deserialize the file into a <code>GameState</code> object using the method <code>read</code>. In this example the same program serializes and deserializes the game state, but this may not be the case. You can send the serialized object to another computer on the network, and another program may deserialize the <code>GameState</code>. Hence it&#8217;s important that the declaration of the <code>GameState</code> is available on both computers. The exception <code>ClassNotFoundException</code> will be thrown if the declaration of the class <code>GameState</code> is not available.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Run the program <code>GameStateManager</code>, and you&#8217;ll see that it creates a new file <code>gamestate.ser</code>. Open this file in a text editor, and you&#8217;ll see some gibberish. Java serializes objects in its internal format, which is not meant for reading by the humans. The console output will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">The</span> <span class="tok-n">GameStateObject</span> <span class="tok-n">is</span> <span class="tok-n">serialized</span>
<span class="tok-n">Deserialized</span> <span class="tok-n">the</span> <span class="tok-n">game</span> <span class="tok-n">state</span>
<span class="tok-n">Deserialized</span> <span class="tok-n">game</span> <span class="tok-n">state</span> <span class="tok-n">object</span><span class="tok-o">;</span> <span class="tok-nl">PlayerName:</span> <span class="tok-n">Mary</span><span class="tok-o">,</span> <span class="tok-nl">level:</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-nl">score:</span> <span class="tok-mi">28000</span><span class="tok-o">,</span> <span class="tok-nl">remainingLives:</span> <span class="tok-mi">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you place the breakpoint right after the invokation of the <code>loadGameState</code> method, you&#8217;ll be able to see two different instances of the <code>GameState</code> object as shown below:</p>
</div>
<div id="FIG11-3" class="imageblock">
<div class="content">
<img src="./images/fig_11_debug_serialize.png" alt="fig 11 debug serialize">
</div>
</div>
<div class="paragraph">
<p>Note how IDEA conveniently shows the values of the variables not only in the debugger&#8217;s view at the bottom but in the source code of the program in grayed out font.</p>
</div>
</div>
<div class="sect2">
<h3 id="_project_saving_the_game_scores">11.6. Project: Saving the Game Scores</h3>
<div class="paragraph">
<p>In this project you&#8217;ll write a program that can keep the history of the game scores in a file by using Java serialization. This program should be able to deserialize and sort the saved scores showing the highest scores on top.</p>
</div>
<div class="paragraph">
<p>To complete this project you need to understand how to compare objects. While comparing two numbers is easy, Java objects may include multiple fields and you need to decide which fields of the object should be compared to place objects in a certain order. In this assignment you&#8217;ll be ordering objects <code>Score</code> so the objects with larger value of the field <code>score</code> should come first. In other words, you&#8217;ll need to sort the objects <code>Score</code> in the descending order of the field <code>score</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a serializable class <code>Score</code> to represent a game score.</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.Serializable</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.time.LocalDateTime</span><span class="tok-o">;</span>

<span class="tok-kd">class</span> <span class="tok-nc">Score</span> <span class="tok-kd">implements</span> <span class="tok-n">Serializable</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">score</span><span class="tok-o">;</span>
    <span class="tok-n">LocalDateTime</span> <span class="tok-n">dateTime</span><span class="tok-o">;</span>

    <span class="tok-n">Score</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">name</span><span class="tok-o">,</span> <span class="tok-kt">int</span> <span class="tok-n">score</span><span class="tok-o">,</span> <span class="tok-n">LocalDateTime</span> <span class="tok-n">dateTime</span><span class="tok-o">){</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">name</span><span class="tok-o">=</span><span class="tok-n">name</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">score</span><span class="tok-o">=</span><span class="tok-n">score</span><span class="tok-o">;</span>
        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">dateTime</span><span class="tok-o">=</span><span class="tok-n">dateTime</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">(){</span>
        <span class="tok-k">return</span> <span class="tok-n">name</span> <span class="tok-o">+</span> <span class="tok-s">&quot; scored &quot;</span> <span class="tok-o">+</span> <span class="tok-n">score</span> <span class="tok-o">+</span> <span class="tok-s">&quot; on &quot;</span> <span class="tok-o">+</span> <span class="tok-n">dateTime</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a class <code>ScoreManager</code> with the method <code>main</code>. Inside <code>main</code> declare and instantiate a collection of scores: <code>List&lt;Score&gt; scores</code>. Create the <code>Path</code> object to point at the file <code>scores.ser</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Score</span><span class="tok-o">&gt;</span> <span class="tok-n">scores</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span>

<span class="tok-n">Path</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;scores.ser&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The class <code>ArrayList</code> is one of the Java collections that implements the <code>List</code> interface, so declaring this variable of type <code>List</code> is valid.</p>
</div>
</li>
<li>
<p>Add the methods <code>saveScores</code> and <code>loadScores</code> to the class <code>ScoreManager</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">saveScores</span><span class="tok-o">(</span><span class="tok-n">Path</span> <span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Score</span><span class="tok-o">&gt;</span> <span class="tok-n">gameScores</span><span class="tok-o">)</span> <span class="tok-o">{}</span>

<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Score</span><span class="tok-o">&gt;</span> <span class="tok-nf">loadScores</span><span class="tok-o">(</span><span class="tok-n">Path</span> <span class="tok-n">path</span><span class="tok-o">){}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Write the code in the method <code>saveScore</code> to serialize the collection <code>scores</code> into a file <code>scores.ser</code>. Use the code from the class <code>GameStateManager</code> as an example, but this time you&#8217;ll need to serialize not just one object instance, but a collection of objects, for example:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">try</span> <span class="tok-o">(</span><span class="tok-n">ObjectOutputStream</span> <span class="tok-n">whereToWrite</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">ObjectOutputStream</span><span class="tok-o">(</span>
  <span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newOutputStream</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">StandardOpenOption</span><span class="tok-o">.</span><span class="tok-na">CREATE</span><span class="tok-o">))){</span>

    <span class="tok-n">whereToWrite</span><span class="tok-o">.</span><span class="tok-na">writeObject</span><span class="tok-o">(</span><span class="tok-n">gameScores</span><span class="tok-o">);</span>

<span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t serialize scores: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Write the code in the method <code>loadScores</code> to deserialize the data from the file <code>scores.ser</code>
:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Score</span><span class="tok-o">&gt;</span> <span class="tok-n">loadedScores</span><span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>

<span class="tok-k">try</span> <span class="tok-o">(</span><span class="tok-n">ObjectInputStream</span> <span class="tok-n">whereToReadFrom</span> <span class="tok-o">=</span>
    <span class="tok-k">new</span> <span class="tok-nf">ObjectInputStream</span><span class="tok-o">(</span><span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newInputStream</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">))){</span>

    <span class="tok-n">loadedScores</span><span class="tok-o">=</span>
         <span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Score</span><span class="tok-o">&gt;)</span> <span class="tok-n">whereToReadFrom</span><span class="tok-o">.</span><span class="tok-na">readObject</span><span class="tok-o">();</span>

<span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">ClassNotFoundException</span> <span class="tok-n">cnfe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t find the declaration of Score: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">cnfe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
<span class="tok-o">}</span>  <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t deserialize file: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
<span class="tok-o">}</span>

<span class="tok-k">return</span> <span class="tok-n">loadedScores</span><span class="tok-o">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Starting from this step all coding should be done in the <code>main</code> method of <code>ScoreManager</code>. If the file <em>scores.ser</em> already exists, load the collection of score. If <em>scores.ser</em> doesn&#8217;t exist, create a new collection.</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">exists</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">))</span> <span class="tok-o">{</span>
    <span class="tok-n">scores</span> <span class="tok-o">=</span> <span class="tok-n">loadScores</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">);</span>

<span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
    <span class="tok-n">scores</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create an instance of the <code>Score</code> class, populate its fields <code>name</code>, <code>score</code>, and <code>dateTime</code>. Assign a random number generated by the class <code>java.util.Random</code> to the <code>score</code> field. Assign the current date and time to the field <code>dateTime</code> Use the method <code>nextInt</code> to generate a number between 0 and 50000. Add the hew score to the <code>scores</code> collection.</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Random</span> <span class="tok-n">numberGenerator</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Random</span><span class="tok-o">();</span>

<span class="tok-n">Score</span> <span class="tok-n">myScore</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Score</span><span class="tok-o">(</span><span class="tok-s">&quot;Mary&quot;</span><span class="tok-o">,</span> <span class="tok-n">numberGenerator</span><span class="tok-o">.</span><span class="tok-na">nextInt</span><span class="tok-o">(</span><span class="tok-mi">50000</span><span class="tok-o">),</span> <span class="tok-n">LocalDateTime</span><span class="tok-o">.</span><span class="tok-na">now</span><span class="tok-o">());</span>

<span class="tok-n">scores</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">myScore</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</li>
<li>
<p>Print all the scores and invoke the method <code>saveScore</code> to serialize all <code>scores</code> into the file.</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;All scores:&quot;</span><span class="tok-o">);</span>
<span class="tok-n">scores</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">s</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">));</span>

<span class="tok-n">saveScores</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">,</span> <span class="tok-n">scores</span><span class="tok-o">);</span></code></pre>
</div>
</div>
</li>
<li>
<p>Sort and print the collection to show the highest score on top. Use the class <code>Comarator</code> to specify that sorting should be done by the field <code>score</code>. For sorting in the descendant order invoke the method <code>reverseOrder</code>. Use the Stream API.</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Sorted scores (highest on top):&quot;</span><span class="tok-o">);</span>
<span class="tok-n">Comparator</span><span class="tok-o">&lt;</span><span class="tok-n">Score</span><span class="tok-o">&gt;</span> <span class="tok-n">byScoreDescending</span> <span class="tok-o">=</span>
        <span class="tok-n">Collections</span><span class="tok-o">.</span><span class="tok-na">reverseOrder</span><span class="tok-o">(</span><span class="tok-n">Comparator</span><span class="tok-o">.</span><span class="tok-na">comparing</span><span class="tok-o">(</span><span class="tok-n">s</span> <span class="tok-o">-&gt;</span> <span class="tok-n">s</span><span class="tok-o">.</span><span class="tok-na">score</span><span class="tok-o">));</span>

<span class="tok-n">scores</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
        <span class="tok-o">.</span><span class="tok-na">sorted</span><span class="tok-o">(</span><span class="tok-n">byScoreDescending</span><span class="tok-o">)</span>
        <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">s</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">));</span></code></pre>
</div>
</div>
</li>
<li>
<p>Run the program <code>ScoreManager</code> and observe that all scores are printed in descending order.
:toc-placement!:
:imagesdir: .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_networking_downloading_files_from_the_internet">12. Networking: Downloading Files From the Internet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>People can talk to each other if they speak and understand the same language. Computers connected to a network can communicate with each other, if they use the same <em>protocol</em>. For example, your Web browser uses HTTP protocol to send requests and receive responses from remote server. Such a communication is possible if the program running on the server also understands HTTP.
Any network protocol defines the rules of how a program should send or receive data.</p>
</div>
<div class="paragraph">
<p>Say, you want to find a book about Harry Potter in the online bookstore. Usually you&#8217;d need to enter Harry Potter in the search field of that bookstore Web site and press the button to start the search. But the browser sends a request with a lot more data than a dozen of characters you&#8217;ve entered. According to HTTP protocol, every request should include a <em>request header</em>, which defines the method of sending data, identifies the browser that sends it, asks to connection to stay open (or not), and has other attributes.</p>
</div>
<div class="paragraph">
<p>Similarly, a server should run a program that receives and understands the HTTP request, finds all books that have Harry Potter in the title, and sends a response back to you, adding a <em>response header</em> to the data. Both request and response headers can add several hundred bytes to the actual data being sent.</p>
</div>
<div class="paragraph">
<p>Some other popular networking protocols are TCP/IP, FTP, WebSocket. In this chapter you&#8217;ll learn how to write Java programs that can connect to remote servers and download data using HTTP protocol.</p>
</div>
<div class="sect2">
<h3 id="_how_computers_find_each_other_on_the_web">12.1. How Computers Find Each Other on the Web</h3>
<div class="paragraph">
<p>If you want to visit a person, you need to know his or her exact address - the street, the building and apartment number. In the World Wide Web (WWW), to visit a Web site you need to know its Uniform Resource Locator (a URL). Let&#8217;s see which parts a URL consists of by using an example from Nickelodeon&#8217;s Web site:</p>
</div>
<div id="FIG12-1" class="imageblock">
<div class="content">
<img src="./images/fig_12_url.png" alt="fig 12 url">
</div>
</div>
<div class="paragraph">
<p>This URL tells me that on the host (the server) nick.com exists the file called <em>nickelodeon-football-stars.html</em> located in the folder <em>games</em>. The port number plays the same role as an apartment number in a building.</p>
</div>
<div class="paragraph">
<p>The server nick.com can run many programs, which serve users' requests, but we want to enter this server through "the door" number 80. As a matter of fact, the port number 80 is a default port number for all Web servers that use HTTP. That&#8217;s why if you skip the port number, your Web browser will try to connect to the Web server via the port 80.</p>
</div>
<div class="paragraph">
<p>If a URL starts with <em>https</em>, the <em>s</em> stands for "secure". All requests and responses are automatically encrypted by the browser and the server for additional security. If the user enters a URL that starts with https and has no port number, the Web browser sends an HTTPS request to the server&#8217;s port 443.</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s dissect another URL from Nickelodeon.</p>
</div>
<div id="FIG12-1-0" class="imageblock">
<div class="content">
<img src="./images/fig_12_uri.png" alt="fig 12 uri">
</div>
</div>
<div class="paragraph">
<p>There is no file name here. What <em>video</em> stands for in this URL? It&#8217;s not a file, and it&#8217;s not a folder on the host either. It&#8217;s just an ID that represents some resources at nick.com. There is a program running at nick.com that understands what this ID means and redirects the request to the application that serves the Web page with videos that may look like this:</p>
</div>
<div id="FIG12-3" class="imageblock">
<div class="content">
<img src="./images/fig_12_nick_videos.png" alt="fig 12 nick videos">
</div>
</div>
<div class="paragraph">
<p>Often the content that corresponds to a resource ID is not stored in a file, but is generated on the fly by a server-side program and can change daily, hourly, every minute or every second. Most likely by the time you enter <em><a href="http://www.nick.com/videos" class="bare">http://www.nick.com/videos</a></em> in your browser the content will be different.</p>
</div>
</div>
<div class="sect2">
<h3 id="_domain_names_and_ip_addresses">12.2. Domain Names and IP Addresses</h3>
<div class="paragraph">
<p>The name of the server (the host name) must be unique, and when a person or an organization registers a Web site, a unique number is assigned to this physical server. This number is called IP address. The IP address is either a group of four numbers (e.g. 122.65.98.11) or up to eight hexadecimal numbers (e.g. 2001:cdba:0000:0000:0000:0000:3257:9652). But remembering these long numbers would be difficult for people hence we&#8217;re using domain names that are easier to remember (e.g. nick.com or google.com).</p>
</div>
<div class="paragraph">
<p>When you&#8217;re entering a domain name in the browser, your Internet service provider uses special software to find the IP address that corresponds to the entered domain name. If found, your browser receives the requested Web page, which is a document in HTML format. If not found, you&#8217;ll get an error message that your search didn&#8217;t match any documents.</p>
</div>
<div class="paragraph">
<p>You can say,"But entering nick.com shows a lot of content even without providing any document name!" This happens because Web sites creators configure their servers to serve a certain HTML file if the user doesn&#8217;t specify any. Often they name the file with the home page content <em>index.html</em>, but it can be any other file too.</p>
</div>
<div class="paragraph">
<p>Most of the people connected to the Internet are getting dynamic (temporary) IP addresses assigned to their computers, which can change without notice.</p>
</div>
</div>
<div class="sect2">
<h3 id="_downloading_files_from_the_web">12.3. Downloading Files From the Web</h3>
<div class="paragraph">
<p>In Chapter 11 you&#8217;ve learned that how to read a local file if you know its location. You&#8217;d open a stream pointing to this file and read it. The same holds true for reading remote files. The only difference is that you need open the stream over the network. Java offers a variety of classes for reading (or writing) remote files. All these classes are located in the package <a href="http://docs.oracle.com/javase/8/docs/api/java/net/package-summary.html">java.net</a>. In this chapter we&#8217;ll use the classes that can exchange data with remote hosts using HTTP.</p>
</div>
<div class="paragraph">
<p>In particular, Java has a class <code>java.net.URL</code> that helps your program to connect to a remote computer on the Internet and get access to a resource there, provided that it&#8217;s not protected from public access.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see how you can start writing a program that creates an instance of the <code>URL</code> object that points at some remote resource, e.g. google.com:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-k">try</span><span class="tok-o">{</span>
  <span class="tok-n">URL</span> <span class="tok-n">myUrl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">URL</span><span class="tok-o">(</span><span class="tok-s">&quot;http://google.com&quot;</span><span class="tok-o">);</span>

    <span class="tok-c1">// More code will go here</span>
<span class="tok-o">}</span>
<span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">MalformedURLException</span> <span class="tok-n">ex</span><span class="tok-o">){</span>
      <span class="tok-n">ex</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>MalformedURLException</code> is thrown if you made a typo in the code, e.g. you&#8217;ve typed htp instead of http or some spaces sneaked into the URL. If the <code>MalformedURLException</code> is thrown, it does not indicate that the remote server is down; just check "the spelling" of your URL.</p>
</div>
<div class="paragraph">
<p>Creation of the <code>URL</code> object does not establish a connection with the remote computer. If your program needs to read a remote file, you still need to open a stream on that file. Usually a program performs the following steps to read a file from the Internet via HTTP connection:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an instance of the class <code>URL</code>.</p>
</li>
<li>
<p>Create an instance of the <code>URLConnection</code> to open a connection using the <code>URL</code> object from Step 1.</p>
</li>
<li>
<p>Get a reference to the input stream of this object by calling the method <code>getInputStream</code> from <code>URLConnection</code>.</p>
</li>
<li>
<p>Read the data from the stream.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While writing code for reading streams over the networks you’ll have to handle possible I/O exceptions the same way you did while reading the local files in Chapter 11.
The following program <code>WebSiteReader</code> reads and prints the code of google.com page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.BufferedReader</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.InputStreamReader</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.net.MalformedURLException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.net.URL</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.net.URLConnection</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">WebSiteReader</span> <span class="tok-o">{</span>
 <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">args</span><span class="tok-o">[]){</span>

   <span class="tok-n">URL</span> <span class="tok-n">url</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>
   <span class="tok-n">URLConnection</span> <span class="tok-n">urlConn</span> <span class="tok-o">=</span> <span class="tok-kc">null</span><span class="tok-o">;</span>

   <span class="tok-k">try</span>
   <span class="tok-o">{</span>
       <span class="tok-n">url</span>  <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">URL</span><span class="tok-o">(</span><span class="tok-s">&quot;http://www.google.com&quot;</span> <span class="tok-o">);</span>   <b class="conum">(1)</b>

       <span class="tok-n">urlConn</span> <span class="tok-o">=</span> <span class="tok-n">url</span><span class="tok-o">.</span><span class="tok-na">openConnection</span><span class="tok-o">();</span>             <b class="conum">(2)</b>

   <span class="tok-o">}</span> <span class="tok-k">catch</span><span class="tok-o">(</span> <span class="tok-n">IOException</span> <span class="tok-n">e</span><span class="tok-o">){</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t connect to the provided URL:&quot;</span> <span class="tok-o">+</span> <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">()</span> <span class="tok-o">);</span>
   <span class="tok-o">}</span>

   <span class="tok-k">try</span><span class="tok-o">(</span> <span class="tok-n">InputStreamReader</span> <span class="tok-n">inStream</span> <span class="tok-o">=</span>              <b class="conum">(3)</b>
        <span class="tok-k">new</span> <span class="tok-nf">InputStreamReader</span> <span class="tok-o">(</span><span class="tok-n">urlConn</span><span class="tok-o">.</span><span class="tok-na">getInputStream</span><span class="tok-o">(),</span> <span class="tok-s">&quot;UTF8&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">BufferedReader</span> <span class="tok-n">buff</span>  <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">BufferedReader</span><span class="tok-o">(</span><span class="tok-n">inStream</span><span class="tok-o">);){</span>

       <span class="tok-n">String</span> <span class="tok-n">currentLine</span><span class="tok-o">;</span>

       <span class="tok-c1">// Read and print the code of the Google&#39;s home page</span>
       <span class="tok-k">while</span> <span class="tok-o">((</span><span class="tok-n">currentLine</span> <span class="tok-o">=</span> <span class="tok-n">buff</span><span class="tok-o">.</span><span class="tok-na">readLine</span><span class="tok-o">())!=</span> <span class="tok-kc">null</span> <span class="tok-o">){</span> <b class="conum">(4)</b>

               <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">currentLine</span><span class="tok-o">);</span>
       <span class="tok-o">}</span>
   <span class="tok-o">}</span> <span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">MalformedURLException</span> <span class="tok-n">ex</span><span class="tok-o">){</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span> <span class="tok-o">(</span><span class="tok-s">&quot;Check the spelling of the URL&quot;</span> <span class="tok-o">+</span> <span class="tok-n">ex</span><span class="tok-o">.</span><span class="tok-na">getMessage</span><span class="tok-o">());</span>
   <span class="tok-o">}</span>
   <span class="tok-k">catch</span><span class="tok-o">(</span><span class="tok-n">IOException</span>  <span class="tok-n">ioe</span><span class="tok-o">){</span>
       <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Can&#39;t read from the Internet: &quot;</span><span class="tok-o">+</span>
               <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">toString</span><span class="tok-o">());</span>
   <span class="tok-o">}</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>WebSiteReader</code> creates an instance of the class <code>URL</code>.</p>
</li>
<li>
<p>Then it gets a reference to an instance of the <code>URLConnection</code> object to open a connection with the stream.</p>
</li>
<li>
<p>After that <code>WebSiteReader</code> opens <code>InputStreamReader</code>, which is piped with <code>BufferedReader</code>.</p>
</li>
<li>
<p>The <code>while</code> loop reads the line from <code>BufferedReader</code> and if it&#8217;s not <code>null</code>, it prints the line on the console.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Make sure your computer is connected to the Internet before you run the <code>WebSiteReader</code> program. Actually, I was writing this program while sitting on the plane without the Internet connection. This is what the program printed up in the sky:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">Can&#39;t read from the Internet: java.net.UnknownHostException: www.google.com</code></pre>
</div>
</div>
<div class="paragraph">
<p>When my computer got the Internet connection the output was different. Here&#8217;s a fragment of what you can expect to see on the console after running <code>WebSiteReader</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span class="tok-o">&lt;!</span><span class="tok-nx">doctype</span> <span class="tok-nx">html</span><span class="tok-o">&gt;&lt;</span><span class="tok-nx">html</span> <span class="tok-nx">itemscope</span><span class="tok-o">=</span><span class="tok-s2">&quot;&quot;</span> <span class="tok-nx">itemtype</span><span class="tok-o">=</span><span class="tok-s2">&quot;http://schema.org/WebPage&quot;</span> <span class="tok-nx">lang</span><span class="tok-o">=</span><span class="tok-s2">&quot;fr&quot;</span><span class="tok-o">&gt;&lt;</span><span class="tok-nx">head</span><span class="tok-o">&gt;&lt;</span><span class="tok-nx">meta</span> <span class="tok-nx">content</span><span class="tok-o">=</span><span class="tok-s2">&quot;/logos/doodles/2015/110th-anniversary-of-first-publication-of-becassine-5701649318281216-hp.jpg&quot;</span> <span class="tok-nx">itemprop</span><span class="tok-o">=</span><span class="tok-s2">&quot;image&quot;</span><span class="tok-o">&gt;&lt;</span><span class="tok-nx">title</span><span class="tok-o">&gt;</span><span class="tok-nx">Google</span><span class="tok-o">&lt;</span><span class="tok-err">/title&gt;&lt;script&gt;(function(){window.google={kEI:&#39;5OzPVMyJM4ukygPRz4CoBQ&#39;,kEXPI:&#39;4011559,4013606,4020347,4020562,4021598,4022545,4023678,4024599,4024626,4025090,4027899,4027921,4028062,4028128,4028367,4028508,4028634,4028706,4028717,8300111,8500393,8500852,8501081,8501084,10200083,10200903,10200904&#39;,authuser:0,kSID:&#39;5OzPVMyJM4ukygPRz4CoBQ&#39;};google.kHL=&#39;us&#39;;})();(function(){google.lc=[];google.li=0;google.getEI=function(a){for(var b;a&amp;&amp;(!a.getAttribute||!(b=a.getAttribute(&quot;eid&quot;)));)a=a.parentNode;return b</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a mix of HTML and JavaScript code. The class <code>WebSiteReader</code> explicitly creates the object <code>URLConnection</code>. Strictly speaking, you could achieve the same result by using only the class <code>URL</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">URL</span> <span class="tok-n">url</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">URL</span><span class="tok-o">(</span><span class="tok-s">&quot;http://www.google.com&quot;</span><span class="tok-o">);</span>
<span class="tok-n">InputStream</span> <span class="tok-n">in</span> <span class="tok-o">=</span> <span class="tok-n">url</span><span class="tok-o">.</span><span class="tok-na">openStream</span><span class="tok-o">();</span>
<span class="tok-n">BufferedReader</span> <span class="tok-n">buff</span><span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">BufferedReader</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">InputStreamReader</span><span class="tok-o">(</span><span class="tok-n">in</span><span class="tok-o">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason you may want use the <code>URLConnection</code> class is that it could give you some additional control over the I/O process. For example, by calling its method <code>setDoOutput</code> with the argument <code>true</code> you enable <code>WebSiteReader</code>  to write to the remote <code>URL</code>. In this case you&#8217;d need to get a reference to an <code>OutputStream</code> object by calling <code>getOutputStream</code> method on the <code>URLConnection</code> object. If you wanted to write a program that can send data to the server, you&#8217;d need to learn server-side programming, which this book doesn&#8217;t cover.</p>
</div>
<div class="sect3">
<h4 id="_downloading_any_file_from_the_internet">12.3.1. Downloading Any File From the Internet</h4>
<div class="paragraph">
<p>In Chapter 11 you&#8217;ve learned how to create a file and write into it. The <code>WebSiteReader</code> program just prints the remote data on the console, but you could have saved the data in the local file as well. It&#8217;s time to add the code that writes into a file. The goal is to write a program that can download any unprotected file (such as images, music, and binary files) available on the Web.</p>
</div>
<div id="FIG12-1-1" class="imageblock">
<div class="content">
<img src="./images/fig_12_DownloadUpload.png" alt="fig 12 DownloadUpload">
</div>
</div>
<div class="paragraph">
<p>The following class <code>FileDownload</code> creates the <code>URLConnection</code> object and get its <code>InputStream</code>. This class also creates an <code>OutputStream</code> to the local file. The URL and the local filename are given to <code>FileDownload</code> program as command-line arguments (explained in Chapter 11). The <code>FileDownload</code> connects to the provided URL, downloads its content and saves it in a local file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">import</span> <span class="tok-nn">java.io.OutputStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.io.InputStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.net.URL</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.net.URLConnection</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Path</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Paths</span><span class="tok-o">;</span>

<span class="tok-kd">class</span> <span class="tok-nc">FileDownload</span><span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">args</span><span class="tok-o">[]){</span>
    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">.</span><span class="tok-na">length</span> <span class="tok-o">!=</span> <span class="tok-mi">2</span><span class="tok-o">){</span>                 <b class="conum">(1)</b>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
            <span class="tok-s">&quot;Proper Usage: java FileDownload FileURL DestinationFileName&quot;</span><span class="tok-o">);</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span>
            <span class="tok-s">&quot;For example: java FileDownload http://myflex.org/yf/nyc.jpg nyc.jpg&quot;</span><span class="tok-o">);</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">exit</span><span class="tok-o">(-</span><span class="tok-mi">1</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-n">URLConnection</span> <span class="tok-n">fileStream</span><span class="tok-o">=</span><span class="tok-kc">null</span><span class="tok-o">;</span>

    <span class="tok-k">try</span><span class="tok-o">{</span>
        <span class="tok-n">URL</span> <span class="tok-n">remoteFile</span><span class="tok-o">=</span><span class="tok-k">new</span> <span class="tok-nf">URL</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">]);</span>        <b class="conum">(2)</b>

        <span class="tok-n">fileStream</span><span class="tok-o">=</span><span class="tok-n">remoteFile</span><span class="tok-o">.</span><span class="tok-na">openConnection</span><span class="tok-o">();</span> <b class="conum">(3)</b>

    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">IOException</span> <span class="tok-n">ioe</span><span class="tok-o">){</span>
        <span class="tok-n">ioe</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-n">Path</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">Paths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">1</span><span class="tok-o">]);</span>                <b class="conum">(4)</b>

    <span class="tok-k">try</span><span class="tok-o">(</span><span class="tok-n">OutputStream</span> <span class="tok-n">fOut</span><span class="tok-o">=</span><span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">newOutputStream</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">);</span> <b class="conum">(5)</b>

      <span class="tok-n">InputStream</span> <span class="tok-n">in</span> <span class="tok-o">=</span> <span class="tok-n">fileStream</span><span class="tok-o">.</span><span class="tok-na">getInputStream</span><span class="tok-o">();){</span> <b class="conum">(6)</b>

      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Downloading from &quot;</span> <span class="tok-o">+</span> <span class="tok-n">args</span><span class="tok-o">[</span><span class="tok-mi">0</span><span class="tok-o">]</span> <span class="tok-o">+</span> <span class="tok-s">&quot;. Please wait...&quot;</span><span class="tok-o">);</span>

      <span class="tok-c1">// Read a remote file and save it in the local one</span>

      <span class="tok-kt">int</span> <span class="tok-n">data</span><span class="tok-o">;</span>

      <span class="tok-k">while</span><span class="tok-o">((</span><span class="tok-n">data</span><span class="tok-o">=</span><span class="tok-n">in</span><span class="tok-o">.</span><span class="tok-na">read</span><span class="tok-o">())!=-</span><span class="tok-mi">1</span><span class="tok-o">){</span>      <b class="conum">(7)</b>
          <span class="tok-n">fOut</span><span class="tok-o">.</span><span class="tok-na">write</span><span class="tok-o">(</span><span class="tok-n">data</span><span class="tok-o">);</span>             <b class="conum">(8)</b>
      <span class="tok-o">}</span>

      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Finished downloading the file. It&#39;s located at &quot;</span><span class="tok-o">+</span><span class="tok-n">path</span><span class="tok-o">.</span><span class="tok-na">toAbsolutePath</span><span class="tok-o">());</span>
    <span class="tok-o">}</span> <span class="tok-k">catch</span> <span class="tok-o">(</span><span class="tok-n">Exception</span> <span class="tok-n">e</span><span class="tok-o">){</span>
        <span class="tok-n">e</span><span class="tok-o">.</span><span class="tok-na">printStackTrace</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This program starts with checking that two command-line arguments were provided. If not, it prints the message showing the right way to start <code>FileDownload</code> and exits the program by invoking the method <code>exit</code> on the <code>System</code> object.</p>
</li>
<li>
<p>Then the program creates an instance of the <code>URL</code> object using the URL provided as the first command-line argument.</p>
</li>
<li>
<p>Establishing a connection to the remote file.</p>
</li>
<li>
<p>Creating a <code>Path</code> object pointing to a local file where the downloaded data will be saved to.</p>
</li>
<li>
<p>Obtaining the <code>OutputStream</code> to the local file for writing.</p>
</li>
<li>
<p>Obtaining the <code>InputStream</code> to the remote file for reading.</p>
</li>
<li>
<p>Reading a byte from the <code>InputStream</code>.</p>
</li>
<li>
<p>Writing a byte to the <code>OutputStream</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>I&#8217;ve prepared an image for you that&#8217;s located at <a href="http://myflex.org/yf/nyc.jpg" class="bare">http://myflex.org/yf/nyc.jpg</a>. It&#8217;s a photo that I took in the New York City some time ago. Run this program with the following two command-line arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">http://myflex.org/yf/nyc.jpg nyc.jpg</code></pre>
</div>
</div>
<div class="paragraph">
<p>On my computer the console output looked like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">Downloading</span> <span class="tok-n">from</span> <span class="tok-nl">http:</span><span class="tok-c1">//myflex.org/yf/nyc.jpg. Please wait...</span>
<span class="tok-n">Finished</span> <span class="tok-n">downloading</span> <span class="tok-n">the</span> <span class="tok-n">file</span><span class="tok-o">.</span> <span class="tok-n">It</span><span class="tok-err">&#39;</span><span class="tok-n">s</span> <span class="tok-n">located</span> <span class="tok-n">at</span> <span class="tok-o">/</span><span class="tok-n">Users</span><span class="tok-o">/</span><span class="tok-n">yfain11</span><span class="tok-o">/</span><span class="tok-n">IdeaProjects</span><span class="tok-o">/</span><span class="tok-n">jfk</span><span class="tok-o">/</span><span class="tok-n">Chapter12</span><span class="tok-o">/</span><span class="tok-n">nyc</span><span class="tok-o">.</span><span class="tok-na">jpg</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>FileDowload</code> program has downloaded the photo and saved it the file <em>nyc.jpg</em>.This program has no knowledge of what type of data it has downloaded - it was simply reading and writing the data byte after byte. In this case it was an image, but the same program can be used for downloading audio and other files that&#8217;s has open access to the public.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ll open the downloaded file with a program that can show images, you&#8217;ll see the following photo:</p>
</div>
<div id="FIG12-2" class="imageblock">
<div class="content">
<img src="./images/fig_12_nyc.jpg" alt="fig 12 nyc">
</div>
</div>
<div class="paragraph">
<p>In this chapter I showed you how to download a file using HTTP. Professional Java developers use various techniques, technologies, and protocols for working with remote content. If you&#8217;re interested in exploring these advanced topics on your own, the <a href="http://docs.oracle.com/javaee/7/tutorial/">Java EE Tutorial</a> is a good start. Maybe one day I&#8217;ll write a book about the server side programming for kids.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_downloading_music">12.4. Project: Downloading Music</h3>
<div class="paragraph">
<p>In this project you&#8217;ll see how our <code>FileDownload</code> program to see if it can download an MP3 file as well.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Visit the Web site: <a href="http://www.last.fm/music/+free-music-downloads" class="bare">http://www.last.fm/music/+free-music-downloads</a> and pick an MP3 you like. At the time of this writing the Last.FM Web page looked as follows:</p>
<div id="FIG12-30" class="imageblock">
<div class="content">
<img src="./images/fig_12_lastfm.png" alt="fig 12 lastfm">
</div>
</div>
</li>
<li>
<p>Right-click on the blue button "Free MP3", and you&#8217;ll see a browser&#8217;s popup menu. Select the menu item that allows you to copy the link address. The link will be copied in your computer&#8217;s clipboard. I&#8217;ve selected a link to a music file that looked like this:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">http://freedownloads.last.fm/download/59565166/From%2BEmbrace%2BTo%2BEmbrace.mp3</code></pre>
</div>
</div>
</li>
<li>
<p>In IDEA select the menu Run | Edit Configuration and paste this link into the Program arguments field for the <code>FileDownload</code> program. This link will be the first command-line argument.</p>
<div id="FIG12-4" class="imageblock">
<div class="content">
<img src="./images/fig_12_EditConfigIDEA.png" alt="fig 12 EditConfigIDEA">
</div>
</div>
</li>
<li>
<p>Move the cursor to the very end of the Program arguments field and add a space followed by the name of the local file, where you want to save the song. I&#8217;ve entered song1.mp3. Press the button OK.</p>
</li>
<li>
<p>Run the program <code>FileDownload</code>. The MP3 file will be downloaded into the local file song1.mp3. Here&#8217;s the console output I&#8217;ve got:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">Downloading from http://freedownloads.last.fm/download/59565166/From%2BEmbrace%2BTo%2BEmbrace.mp3. Please wait...
Finished downloading the file. It&#39;s located at /Users/yfain11/IdeaProjects/jfk/Chapter12/song1.mp3</code></pre>
</div>
</div>
</li>
<li>
<p>Open this file in your MP3 player and enjoy the music!</p>
</li>
<li>
<p>Close the IDEA and repeat the same exercise from the command line. You&#8217;ll need to open a Command (or Terminal) window, change the directory to where the file <code>FileDownload.class</code> is located. By default, IDEA stores compiled classes in the directory <em>out/production</em>. My IDEA project was named Chapter12, and this is where its compiled classes were located in my computer:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">/Users/yfain11/IdeaProjects/jfk/Chapter12/out/production/Chapter12</code></pre>
</div>
</div>
</li>
<li>
<p>Run the <code>FileDownload</code> program providing the URL and the name of the local file as command-line arguments. It should download the file the same way as it did in the IDEA IDE.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_ping_pong_game">13. Creating a Ping-Pong Game</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In chapters 6, 7, and 10 you’ve learned how to create simple GUI with JavaFX using such components as buttons, labels and text fields. In this chapter we&#8217;ll use JavaFX again, but this time you&#8217;ll be drawing and animating shapes.</p>
</div>
<div class="paragraph">
<p>JavaFX includes the package <a href="http://docs.oracle.com/javase/8/javafx/api/javafx/scene/shape/package-summary.html">javafx.scene.shape</a>, which includes such classes as <code>Circle</code>, <code>Rectangle</code>, <code>Line</code> and more. All of these classes are inherited from the class <code>Shape</code>.</p>
</div>
<div class="paragraph">
<p>Ping-Pong is a perfect game to illustrate the drawing and animating capabilities of JavaFX. In this game you&#8217;ll have another chance to work with event handlers, and will learn how to move (animate) shapes around the stage.</p>
</div>
<div class="sect2">
<h3 id="_the_strategy">13.1. The Strategy</h3>
<div class="paragraph">
<p>Let’s come up with some rules of our Ping-Pong game:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>This game will have two players named Kid and Computer. The table should be painted green, the left paddle should be painted blue - it&#8217;ll be controlled by the Computer. The right paddle should be yellow - it&#8217;s controlled by the Kid. Initially the red ball should be located in the center of the table.</p>
</li>
<li>
<p>A new game starts when a player presses the N-key on the keyboard, pressing Q will end the game, and the S-key will serve the ball. Only the kid can serve the ball.</p>
</li>
<li>
<p>The Kid’s paddle movements should be controlled by the Up and Down arrow keys. Pressing the key once should move the paddle vertically by the preset number of pixels up or down. The paddle shouldn&#8217;t cross the table borders.</p>
</li>
<li>
<p>The Kid can move the right paddle and press the S-key. This should serve the ball from the position where the right paddle is located. The ball cam move at an angle, which means that its x and y coordinate should change while moving. If the ball crosses the top or bottom borders of the table, the Kid loses a point.</p>
</li>
<li>
<p>While the ball is moving to the left, the Computer should move the left paddle in the direction of the ball movement.</p>
</li>
<li>
<p>If the ball touches the left paddle, it should bounce and start moving to the right. When the Computer bounces the ball, it can move only horizontally to the right.</p>
</li>
<li>
<p>If the ball contacts the Kid’s paddle in the upper half of the table, the ball should be moving in the up-and-left direction.  If the ball was located in the bottom part of the table, it should move in the down-and-left direction.The game lasts until one of the players reaches the score of 21. Since the computer can&#8217;t serve the ball, the Kid should score a point if the ball crosses the left border of the table. If the ball crosses the top or
bottom table borders the point is given to the computer.The computer can also earn the point if it bounces the ball and it crosses the right border of the table. These rules are not the same as in a real Ping-Pong game, but they are good enough for our game.</p>
</li>
<li>
<p>The game score should be displayed in the left bottom corner of the table.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>At first, it seems to be a very challenging task. In programming we often have to break the complicated problem into a set of smaller and simpler tasks. The ability to do so is called <em>analytical thinking</em>, and it helps not only in programming, but  everywhere in your life. Do not get frustrated if you can’t achieve a big goal, split it in a set of the smaller ones an reach them one at time!</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start breaking our complex task. Try to visualize a ping-pong table. Can you write a program that will draw a green rectangle? That’s our first goal to achieve. Then we&#8217;ll add the paddle. Then we&#8217;ll see how to draw the ball. Learning how to move the ball will be the next task. Writing the keyboard event handlers shouldn&#8217;t be too difficult.</p>
</div>
<div id="FIG13-1" class="imageblock">
<div class="content">
<img src="./images/fig_13_PingPong.png" alt="fig 13 PingPong">
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s implement each step from the game strategy, one step at a time.</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_1_creating_the_table">13.2. Step 1: Creating the Table</h3>
<div class="paragraph">
<p>In this section or goal is to draw a 2D ping-pong table, which should look as a green rectangle.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start with creating a new JavaFX project in IntelliJ IDEA selecting JavaFX as a project type. Press Next, and on the next popup window enter PingPong as a project name. Press the button Finish and IDEA will generate a new project for you. Rename (right-click | Refactor | Rename) the file <em>sample.fxml</em> into <em>pingpong.fxml</em>, the <code>Main</code> class into <code>PingPong</code>, and <code>Controller</code> into <code>PingPongController</code>. The same way change the name of the package from <em>sample</em> to <em>pong</em>.</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s draw the ping-pong table in Scene Builder. Right-click on the file <em>pingpong.fxml</em> and open it in Scene Builder. As you&#8217;ve seen in Chapter 7, the generated FXML uses the <code>&lt;GridBag&gt;</code> as a default container, and you&#8217;ll see an empty <code>GridBag</code> in the Hierarchy pane. The left side of the SceneBuilder panels will look as follows:</p>
</div>
<div id="FIG13-2" class="imageblock">
<div class="content">
<img src="./images/fig_13_Group.png" alt="fig 13 Group">
</div>
</div>
<div class="paragraph">
<p>But I&#8217;m not going to use any layouts in the PingPong game. The game will consist of a number of shapes that I&#8217;ll keep in the <code>Group</code> container. We haven&#8217;t use it yet - the <code>Group</code> is used just to keep several child components together. Grouping components in a container can come handy, if you need to assign one event handler to all child components or auto-resize all of them as a group.</p>
</div>
<div class="paragraph">
<p>In Scene Builder delete the <code>GridBag</code> container and drag/drop the <code>Group</code> from the Miscellaneous section down to the Hierarchy panel. Then drag/drop a <code>Rectangle</code> from the Shapes panel onto the <code>Group</code>. Resize it an pick a nice green color from the Fill property on the right side. You&#8217;ll be picking a color from a dropdown palette, and the corresponding color code will be automatically inserted as a <code>fill</code> property of the <code>Rectangle</code>. Your Screen Builder should look like this:</p>
</div>
<div id="FIG13-3" class="imageblock">
<div class="content">
<img src="./images/fig_13_Rectangle.png" alt="fig 13 Rectangle">
</div>
</div>
<div class="paragraph">
<p>Open the file <em>pingpong.fxml</em> and you&#8217;ll see the tag <code>&lt;Rectangle&gt;</code> inside the <code>&lt;Group&gt;</code> generated by Scene Builder. Set the width of the <code>Rectangle</code> to 400, and the height to 250. It should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="tok-cp">&lt;?import javafx.scene.shape.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.*?&gt;</span>
<span class="tok-cp">&lt;?import java.lang.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.*?&gt;</span>
<span class="tok-cp">&lt;?import javafx.geometry.Insets?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.layout.GridPane?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.Button?&gt;</span>
<span class="tok-cp">&lt;?import javafx.scene.control.Label?&gt;</span>

<span class="tok-nt">&lt;Group</span> <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://javafx.com/javafx/8&quot;</span> <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml/1&quot;</span><span class="tok-nt">&gt;</span>
   <span class="tok-nt">&lt;children&gt;</span>
      <span class="tok-nt">&lt;Rectangle</span> <span class="tok-na">arcHeight=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">arcWidth=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">fill=</span><span class="tok-s">&quot;#31b287&quot;</span> <span class="tok-na">height=</span><span class="tok-s">&quot;250&quot;</span> <span class="tok-na">stroke=</span><span class="tok-s">&quot;BLACK&quot;</span> <span class="tok-na">strokeType=</span><span class="tok-s">&quot;INSIDE&quot;</span> <span class="tok-na">width=</span><span class="tok-s">&quot;400&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/children&gt;</span>
<span class="tok-nt">&lt;/Group&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>archHeight</code> and <code>arcWidth</code> were auto-generated in case you need to create rounded corners in the rectangle. The properties <code>stroke</code> and <code>strokeType</code> define the look and the placement of the rectangle&#8217;s border. Every rectangle has the <code>x</code> and <code>y</code> properties that define the coordinates of its upper left corner inside the container. By default the values of <code>x</code> and <code>y</code> are zeros, so this rectangle will be drawn starting from the upper left corner of the <code>Group</code> container.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re interested in learning how different properties change the look of the rectangle visit the <a href="http://docs.oracle.com/javase/8/javafx/api/javafx/scene/shape/Rectangle.html">online documentation</a> for this class. Keep in mind that some of the properties are defined in the class <code>Shape</code>, the ancestor of the <code>Rectangle</code>.</p>
</div>
<div class="paragraph">
<p>Running the auto-generated <code>PingPong</code> class will show the following window:</p>
</div>
<div id="FIG13-4" class="imageblock">
<div class="content">
<img src="./images/fig_13_HelloWorld.png" alt="fig 13 HelloWorld">
</div>
</div>
<div class="paragraph">
<p>There are a couple of things that I don&#8217;t like here. First, the corners of the rectangle are rounded just a little bit. This is caused by the properties <code>archHeight</code> and <code>arcWidth</code>, which are vertical and horizontal diameters of corner arcs. I&#8217;ll delete them from the table rectangle in <code>pingpong.fxml</code>.</p>
</div>
<div class="paragraph">
<p>Second, the window has a title Hello World set by the auto-generated code in IntelliJ IDEA. It&#8217;s easy to change in the class <code>PingPong</code>, but I don&#8217;t even want to see a title bar!</p>
</div>
<div class="paragraph">
<p>This is also an easy change in JavaFX. Set the stage style to <code>UNDECORATED</code> will remove the standard window title and borders. But if I&#8217;ll remove the title bar, I&#8217;ll lose the ability to close the window by clicking on the circle (or a little cross in Windows) will be gone. A bit later we&#8217;ll write the code to close the window by pressing the Q-key on the keyboard. At this point the code of the <code>PingPong</code> class looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">pong</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">javafx.application.Application</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.fxml.FXMLLoader</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.Parent</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.Scene</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.stage.Stage</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.stage.StageStyle</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PingPong</span> <span class="tok-kd">extends</span> <span class="tok-n">Application</span> <span class="tok-o">{</span>

 <span class="tok-nd">@Override</span>
 <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">start</span><span class="tok-o">(</span><span class="tok-n">Stage</span> <span class="tok-n">primaryStage</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span><span class="tok-o">{</span>

    <span class="tok-n">Parent</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-n">FXMLLoader</span><span class="tok-o">.</span><span class="tok-na">load</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">().</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;pingpong.fxml&quot;</span><span class="tok-o">));</span>

    <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span> <span class="tok-mi">400</span><span class="tok-o">,</span> <span class="tok-mi">250</span><span class="tok-o">));</span>
    <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">initStyle</span><span class="tok-o">(</span><span class="tok-n">StageStyle</span><span class="tok-o">.</span><span class="tok-na">UNDECORATED</span><span class="tok-o">);</span>
    <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">show</span><span class="tok-o">();</span>
 <span class="tok-o">}</span>


 <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
     <span class="tok-n">launch</span><span class="tok-o">(</span><span class="tok-n">args</span><span class="tok-o">);</span>
 <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class was generated by IDEA, but I&#8217;ve removed the Hello World title, set the size of the scene to 400 by 250 pixels, and added the line
<code>primaryStage.initStyle(StageStyle.UNDECORATED);</code>. Running the <code>PingPong</code> class will display the following green rectangle:</p>
</div>
<div id="FIG13-5" class="imageblock">
<div class="content">
<img src="./images/fig_13_undecorated.png" alt="fig 13 undecorated">
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s open <em>pingpong.fxml</em> in Scene Builder again add the paddles and the ball on top of the table. For paddles, I&#8217;ll drag/drop two <code>Rectangle</code> objects from the Shapes section onto the Group container. Our paddles will have size of 10 by 50 pixels. The left paddle will be blue, aand the right one - yellow. Then I drag/drop, resize and color the <code>Circle</code> setting its radius to 9 pixels and painting it red. My Scene Builder will look like this:</p>
</div>
<div id="FIG13-6" class="imageblock">
<div class="content">
<img src="./images/fig_13_paddles_and_ball.png" alt="fig 13 paddles and ball">
</div>
</div>
<div class="paragraph">
<p>Now back to IDEA. Since our shapes will need to communicate with the controller class, we need to assign an <code>fx:id</code> to each of them. Let&#8217;s assign the <code>fx:id="theGroup"</code> to the <code>Group</code> container. Our green <code>Rectangle</code> will get <code>fx:id="table"</code>.</p>
</div>
<div class="paragraph">
<p>Computer will play with the left paddle, and I&#8217;ll give it <code>fx:id="compPaddle"</code>. The Kid will play with the right paddle that will go by <code>fx:id="kidPaddle"</code>. The ball will get <code>fx:id="ball"</code>. Now The <code>Group</code> container in my file <em>pingpong.fxml</em> will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;Group</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;theGroup&quot;</span> <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://javafx.com/javafx/8&quot;</span> <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml/1&quot;</span><span class="tok-nt">&gt;</span>
   <span class="tok-nt">&lt;children&gt;</span>
      <span class="tok-nt">&lt;Rectangle</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;table&quot;</span> <span class="tok-na">fill=</span><span class="tok-s">&quot;#31b287&quot;</span> <span class="tok-na">height=</span><span class="tok-s">&quot;250&quot;</span> <span class="tok-na">stroke=</span><span class="tok-s">&quot;BLACK&quot;</span> <span class="tok-na">strokeType=</span><span class="tok-s">&quot;INSIDE&quot;</span> <span class="tok-na">width=</span><span class="tok-s">&quot;400&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;Rectangle</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;compPaddle&quot;</span> <span class="tok-na">arcHeight=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">arcWidth=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">fill=</span><span class="tok-s">&quot;DODGERBLUE&quot;</span> <span class="tok-na">height=</span><span class="tok-s">&quot;50.0&quot;</span> <span class="tok-na">layoutX=</span><span class="tok-s">&quot;24.0&quot;</span> <span class="tok-na">layoutY=</span><span class="tok-s">&quot;98.0&quot;</span> <span class="tok-na">stroke=</span><span class="tok-s">&quot;BLACK&quot;</span> <span class="tok-na">strokeType=</span><span class="tok-s">&quot;INSIDE&quot;</span> <span class="tok-na">width=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;Rectangle</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;kidPaddle&quot;</span> <span class="tok-na">arcHeight=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">arcWidth=</span><span class="tok-s">&quot;5.0&quot;</span> <span class="tok-na">fill=</span><span class="tok-s">&quot;#f0ff1f&quot;</span> <span class="tok-na">height=</span><span class="tok-s">&quot;50.0&quot;</span> <span class="tok-na">layoutX=</span><span class="tok-s">&quot;365.0&quot;</span> <span class="tok-na">layoutY=</span><span class="tok-s">&quot;98.0&quot;</span> <span class="tok-na">stroke=</span><span class="tok-s">&quot;BLACK&quot;</span> <span class="tok-na">strokeType=</span><span class="tok-s">&quot;INSIDE&quot;</span> <span class="tok-na">width=</span><span class="tok-s">&quot;10.0&quot;</span> <span class="tok-nt">/&gt;</span>
      <span class="tok-nt">&lt;Circle</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;ball&quot;</span> <span class="tok-na">fill=</span><span class="tok-s">&quot;#ff1f35&quot;</span> <span class="tok-na">layoutX=</span><span class="tok-s">&quot;191.0&quot;</span> <span class="tok-na">layoutY=</span><span class="tok-s">&quot;123.0&quot;</span> <span class="tok-na">radius=</span><span class="tok-s">&quot;9.0&quot;</span> <span class="tok-na">stroke=</span><span class="tok-s">&quot;BLACK&quot;</span> <span class="tok-na">strokeType=</span><span class="tok-s">&quot;INSIDE&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/children&gt;</span>
<span class="tok-nt">&lt;/Group&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Running the <code>PingPong</code> program will display the following ping-pong table:</p>
</div>
<div id="FIG13-7" class="imageblock">
<div class="content">
<img src="./images/fig_13_table_paddles_and_ball.png" alt="fig 13 table paddles and ball">
</div>
</div>
<div class="paragraph">
<p>The GUI drawing is complete, now we need to take care of the user interactions, which will be done in the class <code>PingPongController</code>. In <em>pingpong.fxml</em> we need to assign this class as the <code>fx:controller</code> to the <code>Group</code> (see Chapter 8 for a refresher):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;Group</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;theGroup&quot;</span> <span class="tok-na">fx:controller=</span><span class="tok-s">&quot;pong.PingPongController&quot;</span> <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://javafx.com/javafx/8&quot;</span> <span class="tok-na">xmlns:fx=</span><span class="tok-s">&quot;http://javafx.com/fxml/1&quot;</span><span class="tok-nt">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Dear Scene Builder and FXML, you&#8217;ve been very helpful. Now I&#8217;m happily going back to Java programming.</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_handling_keyboard_events">13.3. Step 2: Handling Keyboard Events</h3>
<div class="paragraph">
<p>We need to add the event handler methods to the class <code>PingPongController</code> to process keyboard events. Every key on the keyboard has a special code assigned, and our first goal is to figure out which key the player pressed.</p>
</div>
<div class="paragraph">
<p>For processing keyboard events JavaFX components have special event handler properties <code>onKeyPressed</code>, <code>onKeyReleased</code>, and <code>onKeyTyped</code>. The first two properties allow you to program different actions for the downward and upward key motions, if needed.</p>
</div>
<div class="paragraph">
<p>The <code>onKeyTyped</code> is used to assign a handler to the event when the key code is sent to the system output. This event is <a href="http://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/KeyEvent.html">not generated</a> for the keys that don&#8217;t produce character output. We&#8217;ll use <code>onKeyReleased</code> - this is when the the user lift his finger up.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
IDEA can help you to find out which event handlers can be used with a particular component. Just click CTRL-Space inside this component&#8217;s FXML tag and start typing with the letters <code>on</code> - you&#8217;ll see all applicable event handlers.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When the user releases a key, the <code>onKeyReleased</code> method handler receives the <code>KeyEvent</code> object as an argument. The method <code>getCode</code> from the class <code>KeyEvent</code> returns the <code>KeyCode</code> object that represents the key pressed. For example, if you press the button Q, the <code>getCode</code> will return <code>Q</code>. If you press the arrow up, the <code>getCode</code> will return <code>UP</code>.</p>
</div>
<div class="paragraph">
<p>But the same key can result in displaying more than one character (e.g. Q or q) The method <code>getText</code> of <code>KeyEvent</code> returns a <code>String</code> that represents the character typed by the user.</p>
</div>
<div class="paragraph">
<p>To enable our GUI to react on keyboard events right after the program starts, we need to <em>set the focus</em> on the GUI. This was not required when we clicked on the GUI components with the mouse, but now we won&#8217;t even touch the screen.</p>
</div>
<div class="paragraph">
<p>To set the focus to the <code>Group</code> container we&#8217;ll need to do two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable the <code>Group</code> to receive the focus by useing the attribute <code>focusTraversable="true"</code> in <em>pingpong.fxml</em>.</p>
</li>
<li>
<p>Right after the stage is displayed in the <code>PingPong</code> class, we&#8217;ll call the method <code>requestFocus</code> on the <code>Group</code> container. The method <code>start</code> in <code>PingPong</code> will look like this (I&#8217;ve added just the last line to the code generated by IDEA):</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"> <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">start</span><span class="tok-o">(</span><span class="tok-n">Stage</span> <span class="tok-n">primaryStage</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span><span class="tok-o">{</span>

  <span class="tok-n">Parent</span> <span class="tok-n">root</span> <span class="tok-o">=</span> <span class="tok-n">FXMLLoader</span><span class="tok-o">.</span><span class="tok-na">load</span><span class="tok-o">(</span><span class="tok-n">getClass</span><span class="tok-o">().</span><span class="tok-na">getResource</span><span class="tok-o">(</span><span class="tok-s">&quot;pingpong.fxml&quot;</span><span class="tok-o">));</span>

  <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">setScene</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Scene</span><span class="tok-o">(</span><span class="tok-n">root</span><span class="tok-o">,</span> <span class="tok-mi">400</span><span class="tok-o">,</span> <span class="tok-mi">250</span><span class="tok-o">));</span>
  <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">initStyle</span><span class="tok-o">(</span><span class="tok-n">StageStyle</span><span class="tok-o">.</span><span class="tok-na">UNDECORATED</span><span class="tok-o">);</span>

  <span class="tok-n">primaryStage</span><span class="tok-o">.</span><span class="tok-na">show</span><span class="tok-o">();</span>
  <span class="tok-n">root</span><span class="tok-o">.</span><span class="tok-na">requestFocus</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_processing_keyboard_events_in_the_controller">13.3.1. Processing Keyboard Events in the Controller</h4>
<div class="paragraph">
<p>In the code that comes with this chapter the final version of the controller is called <code>PingPongController</code>. But I&#8217;ve also included multiple versions of the controller that gradually implement the steps listed in the game strategy. Each "intermediate" controller class name starts with <code>PingPongController</code> followed with a different suffix with a version number (e.g. <code>PingPongController_v1</code>, <code>PingPongController_v2</code> etc.) The starting comment in each  class briefly describes what was added in this version of the controller. To see any of these controllers in action, just specify its name as <code>fx:controller</code> in the file <code>pingpong.fxml</code> and run the <code>PingPong</code> program.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In InelliJ IDEA you can easily compare two files to see the difference. Press CTRL or CMD button and click on the names of two files you&#8217;d like to compare (e.g. <code>PingPongController_v1</code> and <code>PingPongController_v2</code>). Then select the menu View | Compare Two Files, and you&#8217;ll see the source code of these files next to each other with highlighted differences.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s add to the <code>PingPongControler</code> a method handler for the key-released events. The first very simple version of the <code>PingPongControler</code> is shown next. The goal is to see that the controller receives the keyboard events and can recognize the keys pressed by the player.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">pong</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.input.KeyCode</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.input.KeyEvent</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PingPongController</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">keyReleasedHandler</span><span class="tok-o">(</span><span class="tok-n">KeyEvent</span> <span class="tok-n">event</span><span class="tok-o">){</span>

    <span class="tok-n">KeyCode</span> <span class="tok-n">keyCode</span> <span class="tok-o">=</span>  <span class="tok-n">event</span><span class="tok-o">.</span><span class="tok-na">getCode</span><span class="tok-o">();</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;You pressed &quot;</span> <span class="tok-o">+</span> <span class="tok-n">keyCode</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The event handler method just extracts the key code from the <code>KeyEvent</code> object provided by the Java runtime and prints it.
For example, after running the <code>PingPong</code> class and pressing the up and down arrows, <em>n</em>, <em>q</em>, and <em>s</em> keys, the console output should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">You pressed UP
You pressed DOWN
You pressed N
You pressed Q
You pressed S</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>KeyCode</code> in <code>PingPongController</code> is not a class or an interface, but a special Java construct called <code>enum</code> described next.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_enum_type">13.3.2. The enum Type</h4>
<div class="paragraph">
<p>Our controller class declares a variable of type <code>KeyCode</code>, which is neither a class nor an interface. It&#8217;s a special Java data type <code>enum</code> used for declaring a bunch of pre-defined constants that never change. For example, you can declare a new <code>enum</code> type day-of-the-week:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">enum</span> <span class="tok-n">Day</span> <span class="tok-o">{</span>
    <span class="tok-n">SUNDAY</span><span class="tok-o">,</span> <span class="tok-n">MONDAY</span><span class="tok-o">,</span> <span class="tok-n">TUESDAY</span><span class="tok-o">,</span> <span class="tok-n">WEDNESDAY</span><span class="tok-o">,</span>
    <span class="tok-n">THURSDAY</span><span class="tok-o">,</span> <span class="tok-n">FRIDAY</span><span class="tok-o">,</span> <span class="tok-n">SATURDAY</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following class <code>GreetTheDay</code> illustrates the use of the <code>enum Day</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">GreetTheDay</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-n">greet</span><span class="tok-o">(</span><span class="tok-n">Day</span><span class="tok-o">.</span><span class="tok-na">SATURDAY</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">greet</span><span class="tok-o">(</span><span class="tok-n">Day</span> <span class="tok-n">day</span><span class="tok-o">){</span>
    <span class="tok-k">switch</span> <span class="tok-o">(</span><span class="tok-n">day</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-k">case</span> <span class="tok-nl">MONDAY:</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;The week begins&quot;</span><span class="tok-o">);</span>
            <span class="tok-k">break</span><span class="tok-o">;</span>
        <span class="tok-k">case</span> <span class="tok-nl">SATURDAY:</span>
        <span class="tok-k">case</span> <span class="tok-nl">SUNDAY:</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello Weekend!&quot;</span><span class="tok-o">);</span>
            <span class="tok-k">break</span><span class="tok-o">;</span>
        <span class="tok-k">default</span><span class="tok-o">:</span>
            <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Hello Midweek&quot;</span><span class="tok-o">);</span>
            <span class="tok-k">break</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>greet</code> expects to receive one of the <code>Day</code> values as an argument. Our <code>main</code> method wants to greet Saturday, and if you run the program <code>GreetTheDay</code> it&#8217;ll print <em>Hello Weekend!</em>.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ll open the <a href="http://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/KeyCode.html">online documentation</a> for <code>KeyCode</code> you&#8217;ll find there the declarations of all possible keyboard keys.</p>
</div>
</div>
<div class="sect3">
<h4 id="_preparing_to_process_the_keys_s_q_and_n">13.3.3. Preparing to Process the Keys S, Q, and N</h4>
<div class="paragraph">
<p>Now we&#8217;ll add a <code>switch</code> statement to the controller to invoke the method that corresponds to the pressed key. Let&#8217;s not worry about implementing the application logic just yet. We want to make sure that the programs invokes the correct method for each key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">pong</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">javafx.application.Platform</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.input.KeyCode</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.input.KeyEvent</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PingPongController</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">keyReleasedHandler</span><span class="tok-o">(</span><span class="tok-n">KeyEvent</span> <span class="tok-n">event</span><span class="tok-o">){</span>

    <span class="tok-n">KeyCode</span> <span class="tok-n">keyCode</span> <span class="tok-o">=</span> <span class="tok-n">event</span><span class="tok-o">.</span><span class="tok-na">getCode</span><span class="tok-o">();</span>

    <span class="tok-k">switch</span> <span class="tok-o">(</span><span class="tok-n">keyCode</span><span class="tok-o">){</span>
      <span class="tok-k">case</span> <span class="tok-nl">UP:</span>
          <span class="tok-n">process_key_Up</span><span class="tok-o">();</span>
          <span class="tok-k">break</span><span class="tok-o">;</span>
      <span class="tok-k">case</span> <span class="tok-nl">DOWN:</span>
          <span class="tok-n">process_key_Down</span><span class="tok-o">();</span>
          <span class="tok-k">break</span><span class="tok-o">;</span>
      <span class="tok-k">case</span> <span class="tok-nl">N:</span>
          <span class="tok-n">process_key_N</span><span class="tok-o">();</span>
          <span class="tok-k">break</span><span class="tok-o">;</span>
      <span class="tok-k">case</span> <span class="tok-nl">Q:</span>
          <span class="tok-n">Platform</span><span class="tok-o">.</span><span class="tok-na">exit</span><span class="tok-o">();</span> <span class="tok-c1">// Terminate the app</span>
          <span class="tok-k">break</span><span class="tok-o">;</span>
      <span class="tok-k">case</span> <span class="tok-nl">S:</span>
          <span class="tok-n">process_key_S</span><span class="tok-o">();</span>
          <span class="tok-k">break</span><span class="tok-o">;</span>
      <span class="tok-o">}</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_Up</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing the Up key&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_Down</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing the Down key&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_N</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing the N key&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_S</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing the S key&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>switch</code> statement checks the value of <code>enum KeyCode</code> and calls the corresponding method which just prints a hard-coded message - we&#8217;ll implement them shortly. But the Q-key in the above <code>PingPongController</code> is fully functional. When the user presses the Q-key, the program invokes the method <code>exit</code> on the class <code>Platform</code>, which terminates the program.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_moving_the_paddle">13.4. Step 3: Moving the Paddle</h3>
<div class="paragraph">
<p>Now let&#8217;s teach the keys Up and Down to move the kid&#8217;s paddle vertically. Pressing the Up-arrow should move the kid&#8217;s paddle several pixels up according to the predefined moving increment. Pressing the Down-arrow should move the paddle down. We&#8217;ll declare an movement increment as a <code>final</code> variable in <code>PingPongController</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span> <span class="tok-o">=</span> <span class="tok-mi">6</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pressing the key once will change the vertical position of the paddle by 7 pixels. Seven is not a magical number, and you can use any other integer here.</p>
</div>
<div class="paragraph">
<p>The new version of the controller will use the <code>@FXML</code> annotations to inject the references to the GUI components. To update the position of the kid&#8217;s paddle on the GUI we&#8217;ll use data binding explained in Chapter 8. We&#8217;ll also add the method <code>initialize</code> that is invoked by the Java runtime once when the controller object is created. Finally, we&#8217;ll write the code in the methods <code>process_key_Down</code> and <code>process_key_Up</code> to move the kid&#8217;s paddle vertically.</p>
</div>
<div class="paragraph">
<p>In JavaFX the x and y coordinates of the top left corner of the stage have zero values. x-coordinate increases from left to right, and the y-coordinate increases from top to bottom. The following image shows how x and y coordinates change if a ping-pong table has the width of 400 pixels and the height of 250:</p>
</div>
<div id="FIG13-8" class="imageblock">
<div class="content">
<img src="./images/fig_13_table_coordinates.png" alt="fig 13 table coordinates">
</div>
</div>
<div class="paragraph">
<p>In our game the paddles can move only up or down, so depending on the key pressed we&#8217;ll be changing the value of the property <code>layoutY</code> of the right paddle, which will move it on stage accordingly. Here&#8217;s how the <code>PingPongController</code> will look now:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">pong</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">javafx.application.Platform</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.beans.property.DoubleProperty</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.beans.property.SimpleDoubleProperty</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.fxml.FXML</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.input.KeyCode</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.input.KeyEvent</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.shape.Circle</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.shape.Rectangle</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PingPongController</span> <span class="tok-o">{</span>

  <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span> <span class="tok-o">=</span> <span class="tok-mi">6</span><span class="tok-o">;</span>

  <span class="tok-n">DoubleProperty</span> <span class="tok-n">currentKidPaddleY</span> <span class="tok-o">=</span>
              <span class="tok-k">new</span> <span class="tok-nf">SimpleDoubleProperty</span><span class="tok-o">();</span>   <b class="conum">(1)</b>

  <span class="tok-kt">double</span> <span class="tok-n">allowedPaddleTopY</span><span class="tok-o">;</span>                 <b class="conum">(2)</b>
  <span class="tok-kt">double</span> <span class="tok-n">allowedPaddleBottomY</span><span class="tok-o">;</span>

  <span class="tok-nd">@FXML</span> <span class="tok-n">Rectangle</span> <span class="tok-n">table</span><span class="tok-o">;</span>                    <b class="conum">(3)</b>
  <span class="tok-nd">@FXML</span> <span class="tok-n">Rectangle</span> <span class="tok-n">compPaddle</span><span class="tok-o">;</span>
  <span class="tok-nd">@FXML</span> <span class="tok-n">Rectangle</span> <span class="tok-n">kidPaddle</span><span class="tok-o">;</span>
  <span class="tok-nd">@FXML</span> <span class="tok-n">Circle</span> <span class="tok-n">ball</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">initialize</span><span class="tok-o">()</span> <span class="tok-o">{</span>

    <span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">getLayoutY</span><span class="tok-o">());</span>  <b class="conum">(4)</b>
    <span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">layoutYProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">);</span>

    <span class="tok-n">allowedPaddleTopY</span> <span class="tok-o">=</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span><span class="tok-o">;</span> <b class="conum">(5)</b>
    <span class="tok-n">allowedPaddleBottomY</span> <span class="tok-o">=</span> <span class="tok-n">table</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span><span class="tok-o">;</span>

  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">keyReleasedHandler</span><span class="tok-o">(</span><span class="tok-n">KeyEvent</span> <span class="tok-n">event</span><span class="tok-o">){</span>

    <span class="tok-n">KeyCode</span> <span class="tok-n">keyCode</span> <span class="tok-o">=</span> <span class="tok-n">event</span><span class="tok-o">.</span><span class="tok-na">getCode</span><span class="tok-o">();</span>

    <span class="tok-k">switch</span> <span class="tok-o">(</span><span class="tok-n">keyCode</span><span class="tok-o">){</span>
        <span class="tok-k">case</span> <span class="tok-nl">UP:</span>
            <span class="tok-n">process_key_Up</span><span class="tok-o">();</span>
            <span class="tok-k">break</span><span class="tok-o">;</span>
        <span class="tok-k">case</span> <span class="tok-nl">DOWN:</span>
            <span class="tok-n">process_key_Down</span><span class="tok-o">();</span>
            <span class="tok-k">break</span><span class="tok-o">;</span>
        <span class="tok-k">case</span> <span class="tok-nl">N:</span>
            <span class="tok-n">process_key_N</span><span class="tok-o">();</span>
            <span class="tok-k">break</span><span class="tok-o">;</span>
        <span class="tok-k">case</span> <span class="tok-nl">Q:</span>
            <span class="tok-n">Platform</span><span class="tok-o">.</span><span class="tok-na">exit</span><span class="tok-o">();</span> <span class="tok-c1">// Terminate the application</span>
            <span class="tok-k">break</span><span class="tok-o">;</span>
        <span class="tok-k">case</span> <span class="tok-nl">S:</span>
            <span class="tok-n">process_key_S</span><span class="tok-o">();</span>
            <span class="tok-k">break</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_Up</span><span class="tok-o">()</span> <span class="tok-o">{</span>      <b class="conum">(6)</b>

    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;</span> <span class="tok-n">allowedPaddleTopY</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_Down</span><span class="tok-o">()</span> <span class="tok-o">{</span>      <b class="conum">(7)</b>

    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()&lt;</span> <span class="tok-n">allowedPaddleBottomY</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_N</span><span class="tok-o">()</span> <span class="tok-o">{</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing the N key&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_S</span><span class="tok-o">()</span> <span class="tok-o">{</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing the S key&quot;</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Declaring the property <code>currentKidPaddleY</code> that will be bound to the property <code>layoutY</code> of the kid&#8217;s paddle.</p>
</li>
<li>
<p>The Kid will be moving the paddle up and down, but we don&#8217;t want to allow the paddle to leave the table boundaries. The variable <code>allowedPaddleTopY</code> will store the maximum allowed y-coordinate for the top of the paddle, and the <code>allowedPaddleBottomY</code> will have the maximum allowed y-coordinate for the bottom of the paddle.</p>
</li>
<li>
<p>Using the <code>@FXML</code> tag we inject the references to the GUI components defined in <em>pingpong.fxml</em> into the controller&#8217;s variables.</p>
</li>
<li>
<p>The method <code>initialize</code> in the controller is called only once and is the right place to initialize important variables. First, we initialize the property <code>currentKidPaddleY</code>, with the value of the <code>layoutY</code> property of the right paddle (the <em>kidPaddle</em> component has an attribute <code>layoutY="98.0"</code> in the file <em>pingpong.fxml</em>). Then we bind <code>currentKidPaddleY</code> to the  <code>layoutY</code> property of the GUI component kidPaddle.</p>
</li>
<li>
<p>Here we set the limits for the paddle movements. We set the variable <code>allowedPaddleTopY=PADDLE_MOVEMENT_INCREMENT</code> to make sure that if the Kid keeps pressing the Up arrow, the paddle will never cross the top border of the table. The bottom restriction <code>allowedPaddleBottomY</code> is calculated by subtracting the height of the paddle and <code>PADDLE_MOVEMENT_INCREMENT</code> from the table height.</p>
</li>
<li>
<p>The method <code>process_key_Up</code> gets the current y-coordinate of the top border of the paddle, and if it&#8217;s far enough from the table top, the code decrements the value of the property <code>currentKidPaddleY</code> by <code>PADDLE_MOVEMENT_INCREMENT</code>. Because <code>currentKidPaddleY</code> is bound to the <code>layoutY</code> property of the GUI component <code>kidPaddle</code>, the latter moves up on stage. The movement stops if the <code>currentKidPaddleY</code> value is higher than <code>allowedPaddleTopY</code>. Remember, the y-coordinate increases from top down, so the higher y-coordinates means that it&#8217;s physically lower on stage.</p>
</li>
<li>
<p>The method <code>process_key_Down</code> works similarly to <code>process_key_Up</code> but ensures that the paddle won&#8217;t cross the bottom border of the table.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now our controller knows how to move the Kid&#8217;s paddle. The next challenge is to learn how to move the ball.</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_4_moving_the_ball">13.5. Step 4. Moving the Ball</h3>
<div class="paragraph">
<p>Let&#8217;s start implementing step 4 of the game strategy by calculating the starting position and painting the ball depending on the location of the right paddle.
When the user preses the S-key, we need to serve the ball from the position where the right paddle is currently located. Initially it&#8217;s located in the middle of the table, but the user may move it up or down before serving the ball.</p>
</div>
<div class="paragraph">
<p>The ball is represented by the shape <code>Circle</code>. From school math you should remember that a circle is represented by the coordinates of the center and the radius. In JavaFX the corresponding properties of the class <code>Circle</code> are called <code>centerX</code>, <code>centerY</code>, and <code>radius</code>. When the <code>Circle</code> is placed in a layout, its center gets the corresponding properties <code>layoutX</code> and <code>layoutY</code>.  By changing the coordinates of the center we can move the ball around the stage. Our ball is defined in the file <em>pingpong.fxml</em> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;Circle</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;ball&quot;</span> <span class="tok-na">fill=</span><span class="tok-s">&quot;#ff1f35&quot;</span> <span class="tok-na">layoutX=</span><span class="tok-s">&quot;191.0&quot;</span> <span class="tok-na">layoutY=</span><span class="tok-s">&quot;123.0&quot;</span> <span class="tok-na">radius=</span><span class="tok-s">&quot;9.0&quot;</span> <span class="tok-na">stroke=</span><span class="tok-s">&quot;BLACK&quot;</span> <span class="tok-na">strokeType=</span><span class="tok-s">&quot;INSIDE&quot;</span> <span class="tok-nt">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But why the above tag <code>&lt;Circle&gt;</code> doesn&#8217;t include <code>centerX</code> and <code>centerY</code>?  Actually we can and will replace the attributes <code>layoutX</code> and <code>layoutY</code> with <code>centerX</code> and <code>centerY</code> because we use the <code>Group</code> container that&#8217;s not a part of any other layout (e.g. <code>BorderPane</code> or <code>GridPane</code>). But JavaFX allows you to build complex scenes that can dynamically change sizes and reposition its child components.Hence the x and y coordinates of a component relative to a layout may not be the same as coordinates in the scene. For example, the actual x-coordinate of a component may be calculated by adding the x-coordinate of a container within a scene and the x-coordinate of the component within a container.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s modify the attributes of the tag <code>&lt;Circle&gt;</code> so it&#8217;ll look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;Circle</span> <span class="tok-na">fx:id=</span><span class="tok-s">&quot;ball&quot;</span> <span class="tok-na">fill=</span><span class="tok-s">&quot;#ff1f35&quot;</span> <span class="tok-na">centerX=</span><span class="tok-s">&quot;191.0&quot;</span> <span class="tok-na">centerY=</span><span class="tok-s">&quot;123.0&quot;</span> <span class="tok-na">radius=</span><span class="tok-s">&quot;9.0&quot;</span> <span class="tok-na">stroke=</span><span class="tok-s">&quot;BLACK&quot;</span> <span class="tok-na">strokeType=</span><span class="tok-s">&quot;INSIDE&quot;</span> <span class="tok-nt">/&gt;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_moving_the_ball_to_the_right_paddle">13.5.1. Moving the Ball to the Right Paddle</h4>
<div class="paragraph">
<p>Since the ball will be moving, we&#8217;ll keep track of its center in the new properties <code>ballCenterX</code> and <code>ballCenterY</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">DoubleProperty</span> <span class="tok-n">ballCenterX</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleDoubleProperty</span><span class="tok-o">();</span>
<span class="tok-n">DoubleProperty</span> <span class="tok-n">ballCenterY</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleDoubleProperty</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the method <code>initialize</code> we&#8217;ll set the initial values of these properties to the center coordinates of the ball. We&#8217;ll also bind the above properties to the center of the <code>Circle</code>, so changing <code>ballCenterX</code> and <code>ballCenterY</code> will automatically change the location of the ball on the scene:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">getCenterX</span><span class="tok-o">());</span>
<span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">getCenterY</span><span class="tok-o">());</span>

<span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">centerXProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">);</span>
<span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">centerYProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s place the ball by the current position of the kid&#8217;s paddle. In the method <code>process_key_S</code> we&#8217;ll adjust the <code>centerY</code> coordinate of the ball. Our controller has the variable <code>currentKidPaddleY</code> that remembers the current y-coordinate of the top of the kid&#8217;s paddle. So if we&#8217;ll add to <code>currentKidPaddleY</code> the half of the the paddle&#8217;s height, we&#8217;ll get the the y-coordinate of the paddle&#8217;s center. The <code>centerX</code> coordinate will be the same as the <code>layoutX</code> of the Kid&#8217;s paddle.The new version of the method <code>process_key_S</code>  will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_S</span><span class="tok-o">()</span> <span class="tok-o">{</span>

  <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">doubleValue</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()/</span><span class="tok-mi">2</span><span class="tok-o">);</span>
  <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">getLayoutX</span><span class="tok-o">());</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I ran the <code>PingPong</code> application, moved the paddle up by clicking the arrow key several times, and then pressed the S-key. The ball obediently moved to the current position of the right paddle:</p>
</div>
<div id="FIG13-9" class="imageblock">
<div class="content">
<img src="./images/fig_13_serve_ball.png" alt="fig 13 serve ball">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_serving_the_ball_horizontally">13.5.2. Serving the Ball Horizontally</h4>
<div class="paragraph">
<p>The ball is ready to start moving now. To make the movement smooth we&#8217;ll use the class <code>javafx.animation.Timeline</code> that allows change the values of the GUI component&#8217;s properties over a time interval. Similarly to a movie, the animation is a set of frames that are displayed over a specific period of time. Each frame is a snapshot of a GUI component at a certain state. For the ball movement we&#8217;ll declare the variable <code>timeline</code> of the type <code>TimeLine</code>, which we&#8217;ll use to display a set of snapshots of a ball at different positions along its trajectory.</p>
</div>
<div class="paragraph">
<p>Each frame is represented by a class <code>KeyFrame</code>. Each snapshot is a represented by the class <code>KeyValue</code>. Let&#8217;s write a method <code>moveTheBall</code> that will move the ball horizontally all the way to the left until the <code>centerX</code> will become equal to zero.  If we&#8217;ll be changing only the <code>centerX</code> property of the <code>Circle</code>, it&#8217;ll be moving horizontally.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">moveTheBall</span><span class="tok-o">(){</span>

  <span class="tok-n">timeline</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Timeline</span><span class="tok-o">();</span>   <b class="conum">(1)</b>
  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>

  <span class="tok-n">KeyValue</span> <span class="tok-n">keyValue</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyValue</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">,</span> <span class="tok-mi">0</span><span class="tok-o">);</span>  <b class="conum">(2)</b>
  <span class="tok-n">KeyFrame</span> <span class="tok-n">keyFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyFrame</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Duration</span><span class="tok-o">(</span><span class="tok-mi">1000</span><span class="tok-o">),</span> <span class="tok-n">keyValue</span><span class="tok-o">);</span>   <b class="conum">(3)</b>

  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">getKeyFrames</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">keyFrame</span><span class="tok-o">);</span>    <b class="conum">(4)</b>

  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>      <span class="tok-c1">//    </span><b class="conum">(5)</b>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>First we create an instance of the <code>Timeline</code> object and invoke the <code>setCycleCount</code> requesting that the animation will be done only once. In this example we could have declared the variable <code>timeline</code> inside the method, but keeping this variable on the class level will allow me to programatically stop the animation that I&#8217;ll demonstrate in the next version of the method <code>moveTheBall</code>.</p>
</li>
<li>
<p>Then we&#8217;ll create the <code>KeyValue</code> object to specify which changing value to display in frames. In this case we want the animation to change the x-coordinate of the ball center from its current value <code>ballCenterX</code> to zero.</p>
</li>
<li>
<p>We want the <code>KeyFrame</code> to reach the target (change the <code>centerX</code> specified in <code>KeyValue</code> from the current value to zero) over the period of 1000 milliseconds. The smaller the number, the faster the ball will move. The number of frames will be automatically calculated based on the duration and the target position of the ball.</p>
</li>
<li>
<p>Adding the our <code>KeyFrame</code> object to the timeline completes the preparations.</p>
</li>
<li>
<p>The method <code>play</code> will play the timeline.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now if you&#8217;ll invoke the method <code>moveTheBall</code> from <code>process_key_S</code> the ball will move to the left and stop there. Here&#8217;s what I&#8217;ve got after starting the game and pressing the S-key:</p>
</div>
<div id="FIG13-10" class="imageblock">
<div class="content">
<img src="./images/fig_13_ball_moved.png" alt="fig 13 ball moved">
</div>
</div>
<div class="paragraph">
<p>Our ball is not smart enough to notice that there was a left paddle on its way and went right through it. We&#8217;ll take care of the GUI component collisions a bit later.</p>
</div>
<div class="paragraph">
<p>Depending on the provided duration, the <code>Timeline</code> object will calculate how many snapshots (key frames) to create while the <code>KeyValue</code> is changing to reach the target. The <code>Timeline</code> class has several <a href="http://docs.oracle.com/javase/8/javafx/api/javafx/animation/Timeline.html#constructor.summary">overloaded constructors</a>, and one of the allows to specify the frames per second for the animation.</p>
</div>
<div class="paragraph">
<p>The <code>KeyFrame</code> class also has several <a href="http://docs.oracle.com/javase/8/javafx/api/javafx/animation/KeyFrame.html#constructor.summary">overloaded constructors</a>, and one of them allows you to specify the duration, the event handler for the <code>ActionEvent</code>, and optional key value(s). The handler for the <code>ActionEvent</code> can be implemented as a  lambda expression.</p>
</div>
<div class="paragraph">
<p>In the following version of the method <code>moveTheBall</code> we&#8217;ll write the code to advance the ball at the specified increments.  We&#8217;ll also use different constructors of <code>TimeLine</code> and <code>KeyFrame</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span> <span class="tok-o">=</span> <span class="tok-mi">5</span><span class="tok-o">;</span>

<span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">moveTheBall</span><span class="tok-o">(){</span>

  <span class="tok-n">KeyFrame</span> <span class="tok-n">keyFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyFrame</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Duration</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">),</span>   <b class="conum">(1)</b>
      <span class="tok-n">event</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>

        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">)</span> <span class="tok-o">{</span> <b class="conum">(2)</b>

               <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>       <b class="conum">(3)</b>

        <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
           <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>                           <b class="conum">(4)</b>
        <span class="tok-o">}</span>
      <span class="tok-o">}</span>
  <span class="tok-o">);</span>

  <span class="tok-n">timeline</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Timeline</span><span class="tok-o">(</span><span class="tok-n">keyFrame</span><span class="tok-o">);</span>             <b class="conum">(5)</b>
  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-n">Timeline</span><span class="tok-o">.</span><span class="tok-na">INDEFINITE</span><span class="tok-o">);</span>
  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The first argument of the constructor is the <code>Duration</code> object, but this time it has different meaning than in the previous version of the <code>moveTheBall</code>. The value of 10 means to run the code from the event handler (the lambda expression) every 10 milliseconds.</p>
</li>
<li>
<p>The lambda expression starts with checking if the current value of the x-coordinate of the ball center is larger than the value in <code>BALL_MOVEMENT_INCREMENT</code> to ensure that the ball will not cross the left border and will stay at the 0 coordinates. To make our game more realistic, we&#8217;ll let the ball go off the table in the next version of the <code>moveTheBall</code>.</p>
</li>
<li>
<p>Decrement the value of the <code>ballCenterX</code> by <code>BALL_MOVEMENT_INCREMENT</code>. Because of binding this will move the ball on the GUI.</p>
</li>
<li>
<p>Stop the animation if the ball would fall off the table on the next move.</p>
</li>
<li>
<p>Create the <code>Timeline</code> using our <code>KeyFrame</code> and play it. In this case I requested to play the animation indefinitely, because I don&#8217;t want to calculate how many moves would it take to reach the target position. I&#8217;ll stop the animation manually anyway as explained in step 4.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_serving_the_ball_in_random_directions">13.5.3. Serving the Ball in Random Directions</h4>
<div class="paragraph">
<p>The game that serves the ball horizontally is pretty boring, so let&#8217;s change not only the x-, but y-coordinate as well while the ball is moving. To add some fun, let&#8217;s change the y-coordinate in a random manner, so each ball serving sends the ball in a different direction. We&#8217;ll create a ball serving machine.</p>
</div>
<div class="paragraph">
<p>If the user moved the paddle to the upper half of the table, the ball should be moving either horizontally or down. If the ball is served from the lower half - the ball can move either horizontally or upward. To know the y-coordinate of the table center we&#8217;ll declare the <code>double</code> variable <code>centerTableY</code> and set its value in the method <code>initialize</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">centerTableY</span> <span class="tok-o">=</span> <span class="tok-n">table</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()/</span><span class="tok-mi">2</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As the ball moves, we&#8217;ll modified value of the y-coordinate of the ball center will be assigning it to the property <code>ballCenterY</code>.The following version version of the method <code>moveTheBall</code> implements the random ball servings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">  <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">moveTheBall</span><span class="tok-o">(){</span>

        <span class="tok-n">Random</span> <span class="tok-n">randomYGenerator</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Random</span><span class="tok-o">();</span>
        <span class="tok-kt">double</span> <span class="tok-n">randomYincrement</span> <span class="tok-o">=</span> <span class="tok-n">randomYGenerator</span><span class="tok-o">.</span><span class="tok-na">nextInt</span><span class="tok-o">(</span><span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>         <b class="conum">(1)</b>

        <span class="tok-kd">final</span> <span class="tok-kt">boolean</span> <span class="tok-n">isServingFromTop</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&lt;=</span> <span class="tok-n">centerTableY</span><span class="tok-o">)?</span><span class="tok-kc">true</span><span class="tok-o">:</span><span class="tok-kc">false</span><span class="tok-o">;</span>      <b class="conum">(2)</b>


        <span class="tok-n">KeyFrame</span> <span class="tok-n">keyFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyFrame</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Duration</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">),</span> <span class="tok-n">event</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>

            <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;=</span> <span class="tok-o">-</span><span class="tok-mi">20</span><span class="tok-o">)</span> <span class="tok-o">{</span>    <b class="conum">(3)</b>

                <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>

                <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">isServingFromTop</span><span class="tok-o">)</span> <span class="tok-o">{</span>       <b class="conum">(4)</b>
                    <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">randomYincrement</span><span class="tok-o">);</span>

                <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
                    <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">randomYincrement</span><span class="tok-o">);</span>
                <span class="tok-o">}</span>

            <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
                <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>

            <span class="tok-o">}</span>

        <span class="tok-o">});</span>

        <span class="tok-n">timeline</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Timeline</span><span class="tok-o">(</span><span class="tok-n">keyFrame</span><span class="tok-o">);</span>
        <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-n">Timeline</span><span class="tok-o">.</span><span class="tok-na">INDEFINITE</span><span class="tok-o">);</span>

        <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>

    <span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We create an instance of the class <code>java.util.Random</code>. This class has methods to generate random numbers of different types. Invoking the method <code>nextInt</code> generates a random integer number in the range between zero and the value of the method argument. I decided to use the value of <code>BALL_MOVEMENT_INCREMENT</code> as a top limit. This random number will be used as an increment for the y-coordinate of the moving ball.</p>
</li>
<li>
<p>Using the conditional operator (it&#8217;s explained in Chapter 4) we set the variable <code>isServingFromTop</code> to true if the right paddle is located on the upper half of the table, or to false if the paddle is in the lower half.</p>
</li>
<li>
<p>In the previous version of the method <code>moveTheBall</code> we were keeping the ball on the table when it was reaching the left edge of the table. Now we let the ball fall off the table. The <code>-20</code> is just an arbitrary number - we stop the ball movement after the ball moved 20 pixels past the left table edge. In the final version of the game we&#8217;ll enable the movement for the left paddle, and sometimes it&#8217;ll bounce the ball back.</p>
</li>
<li>
<p>If <code>isServingFromTop</code> is true, we&#8217;re increasing the y-coordinate of the ball&#8217;s center by <code>randomYincrement</code>, otherwise we&#8217;re decreasing it by the same amount. Now the ball will be served in an unpredictable manner and will pretty often fall off the table crossing the top or bottom edge of the table. I took the following screen shot when the moving ball was about to cross the bottom edge of the table.</p>
</li>
</ol>
</div>
<div id="FIG13-11" class="imageblock">
<div class="content">
<img src="./images/fig_13_ball_moved_down.png" alt="fig 13 ball moved down">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_5_moving_the_computer_s_paddle">13.6. Step 5: Moving the Computer&#8217;s Paddle</h3>
<div class="paragraph">
<p>When the ball is served, the Computer needs to move its paddle in the right direction to bounce the ball. This is a pretty easy task since the computer knows that if the Kid&#8217;s paddle served from the top, the ball will move down, and if the ball was served from the bottom it&#8217;ll move up. So the moment the ball is served, the computer&#8217;s paddle should also start moving.</p>
</div>
<div class="paragraph">
<p>First of all, we&#8217;ll declare the property <code>currentComputerPaddleY</code> to keep track of the y-coordinate of the Computer&#8217;s paddle. We&#8217;ll also need to store the initial y-coordinate of the Computer&#8217;s paddle, because on each ball serving this paddle should be in the middle of the left side f the table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">DoubleProperty</span> <span class="tok-n">currentComputerPaddleY</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleDoubleProperty</span><span class="tok-o">();</span>

<span class="tok-kt">double</span> <span class="tok-n">initialComputerPaddleY</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the method <code>initialize</code> we&#8217;ll bind <code>currentComputerPaddleY</code> to the <code>layoutY</code> property of the <code>Rectangle</code> that represents the Computer&#8217;s paddle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">initialComputerPaddleY</span> <span class="tok-o">=</span> <span class="tok-n">compPaddle</span><span class="tok-o">.</span><span class="tok-na">getLayoutY</span><span class="tok-o">();</span>

<span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">initialComputerPaddleY</span><span class="tok-o">);</span>
<span class="tok-n">compPaddle</span><span class="tok-o">.</span><span class="tok-na">layoutYProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">currentComputerPaddleY</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The new version of the method <code>moveTheBall</code> will start the movement of the Computer&#8217;s paddle in the right direction as soon as the ball is served.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">moveTheBall</span><span class="tok-o">(){</span>

  <span class="tok-n">Random</span> <span class="tok-n">randomYGenerator</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Random</span><span class="tok-o">();</span>
  <span class="tok-kt">double</span> <span class="tok-n">randomYincrement</span> <span class="tok-o">=</span> <span class="tok-n">randomYGenerator</span><span class="tok-o">.</span><span class="tok-na">nextInt</span><span class="tok-o">(</span><span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>

  <span class="tok-kd">final</span> <span class="tok-kt">boolean</span> <span class="tok-n">isServingFromTop</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&lt;=</span> <span class="tok-n">centerTableY</span><span class="tok-o">)?</span><span class="tok-kc">true</span><span class="tok-o">:</span><span class="tok-kc">false</span><span class="tok-o">;</span>

  <span class="tok-n">KeyFrame</span> <span class="tok-n">keyFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyFrame</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Duration</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">),</span> <span class="tok-n">event</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>

    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;=</span> <span class="tok-o">-</span><span class="tok-mi">20</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>

        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">isServingFromTop</span><span class="tok-o">)</span> <span class="tok-o">{</span>
          <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">randomYincrement</span><span class="tok-o">);</span>

          <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span> <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">);</span>       <b class="conum">(1)</b>

        <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
          <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">randomYincrement</span><span class="tok-o">);</span>

          <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-o">);</span>      <b class="conum">(2)</b>
        <span class="tok-o">}</span>

    <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
        <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>

        <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">initialComputerPaddleY</span><span class="tok-o">);</span>  <b class="conum">(3)</b>
    <span class="tok-o">}</span>
  <span class="tok-o">});</span>

  <span class="tok-n">timeline</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Timeline</span><span class="tok-o">(</span><span class="tok-n">keyFrame</span><span class="tok-o">);</span>
  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-n">Timeline</span><span class="tok-o">.</span><span class="tok-na">INDEFINITE</span><span class="tok-o">);</span>

  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>If the ball was served from the top, move the Computer&#8217;s paddle one pixel down on each frame.</p>
</li>
<li>
<p>If the ball was served from the lower half of the table, move the Computer&#8217;s paddle one pixel up on each frame.</p>
</li>
<li>
<p>When the ball stops moving, return the Computer&#8217;s paddle to the initial position in the middle of the left side of the table.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_6_bouncing_the_ball">13.7. Step 6: Bouncing the Ball</h3>
<div class="paragraph">
<p>There is no guarantee that the Computer&#8217;s paddle will be advanced to the position to bounce the ball. Our Ping-Pong game doesn&#8217;t implement the algorithm the adjust the movement of the Computer&#8217;s paddle based on the trajectory of the ball&#8217;s movement. But if the ball accidentally contacts the paddle we need to bounce the ball and send it from left to right.</p>
</div>
<div class="paragraph">
<p>Every JavaFX GUI component is a subclass of a <code>Node</code>, which has a special property <code>boundsInParent</code>. It&#8217;s an invisible rectangle that encapsulates the component when it&#8217;s places inside a layout. So our ball and paddles are is sitting inside of these invisible rectangle too. When the ball or paddles are being moved, the coordinates of their <code>boundsInParent</code> properties are being recalculated. If these invisible rectangles of the ball and the paddle intersect, we can say that there was a contact. The method <code>checkForBallPaddleContact</code> returns true if there was a contact, and false if not.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-nf">checkForBallPaddleContact</span><span class="tok-o">(){</span>

  <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">intersects</span><span class="tok-o">(</span><span class="tok-n">compPaddle</span><span class="tok-o">.</span><span class="tok-na">getBoundsInParent</span><span class="tok-o">())){</span>
      <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
  <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
       <span class="tok-k">return</span> <span class="tok-kc">false</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We should call this method from each frame in the timeline that we started in the method <code>moveTheBall</code>. After this check for contact to the method <code>moveTheBall</code> it&#8217;ll look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">moveTheBall</span><span class="tok-o">(){</span>

  <span class="tok-n">Random</span> <span class="tok-n">randomYGenerator</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Random</span><span class="tok-o">();</span>
  <span class="tok-kt">double</span> <span class="tok-n">randomYincrement</span> <span class="tok-o">=</span> <span class="tok-n">randomYGenerator</span><span class="tok-o">.</span><span class="tok-na">nextInt</span><span class="tok-o">(</span><span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>

  <span class="tok-kd">final</span> <span class="tok-kt">boolean</span> <span class="tok-n">isServingFromTop</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&lt;=</span> <span class="tok-n">centerTableY</span><span class="tok-o">)?</span><span class="tok-kc">true</span><span class="tok-o">:</span><span class="tok-kc">false</span><span class="tok-o">;</span>

  <span class="tok-n">KeyFrame</span> <span class="tok-n">keyFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyFrame</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Duration</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">),</span> <span class="tok-n">event</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;=</span> <span class="tok-o">-</span><span class="tok-mi">20</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>

        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">isServingFromTop</span><span class="tok-o">)</span> <span class="tok-o">{</span>
          <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">randomYincrement</span><span class="tok-o">);</span>

          <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span> <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">);</span>

        <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
          <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">randomYincrement</span><span class="tok-o">);</span>

          <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>

        <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">checkForBallPaddleContact</span><span class="tok-o">()){</span>

          <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>               <b class="conum">(1)</b>
          <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">initialComputerPaddleY</span><span class="tok-o">);</span>

          <span class="tok-n">bounceTheBall</span><span class="tok-o">();</span>               <b class="conum">(2)</b>
         <span class="tok-o">};</span>

    <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
        <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>
        <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">initialComputerPaddleY</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
  <span class="tok-o">});</span>

  <span class="tok-n">timeline</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Timeline</span><span class="tok-o">(</span><span class="tok-n">keyFrame</span><span class="tok-o">);</span>
  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-n">Timeline</span><span class="tok-o">.</span><span class="tok-na">INDEFINITE</span><span class="tok-o">);</span>

  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>If there was a ball/paddle contact, we need to stop playing the current <code>timeline</code>, set the Computer&#8217;s paddle to its initial position.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>&lt;2&gt;Then we&#8217;ll need to call the method <code>bounceTheBall</code>, which we&#8217;ll write next.</p>
</div>
<div class="paragraph">
<p>According to step 6 in our game strategy, the computer can only serve the ball horizontally, so writing the <code>bounceTheBall</code> method seems like a pretty simple thing to do. We already wrote a version of the <code>moveTheBall</code> method that sends the ball horizontally from right to left, so just reversing the ball moving direction should be easy.</p>
</div>
<div class="paragraph">
<p>But what if the Kid will move his or her paddle to hit the ball back? OK, then we need to be checking if the ball contacts the Kid&#8217;s paddle too. Can we reuse the method <code>checkForBallPaddleContact</code> for this? Not in its current form, because it&#8217;s written specifically for the computer paddle. We can certainly write a similar method for the Kid&#8217;s paddle and have two almost identical methods, but it&#8217;s better to re-write <code>checkForBallPaddleContact</code> to work for both paddles.</p>
</div>
<div class="paragraph">
<p>In programmer&#8217;s jargon re-writing an existing and working code is called <em>refactoring</em>. So let&#8217;s refactor the method <code>checkForBallPaddleContact</code> by providing the paddle as an argument. Here&#8217;s the refactored version that can be used for both p:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-nf">checkForBallPaddleContact</span><span class="tok-o">(</span><span class="tok-n">Rectangle</span> <span class="tok-n">paddle</span><span class="tok-o">){</span>

    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">intersects</span><span class="tok-o">(</span><span class="tok-n">paddle</span><span class="tok-o">.</span><span class="tok-na">getBoundsInParent</span><span class="tok-o">())){</span>
        <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
    <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
         <span class="tok-k">return</span> <span class="tok-kc">false</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Accordingly, the method <code>moveTheBall</code> would check for the contact with Computer&#8217;s paddle as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">checkForBallPaddleContact</span><span class="tok-o">(</span><span class="tok-n">compPaddle</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To check for the ball contact with the Kid&#8217;s paddle you&#8217;d write this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">checkForBallPaddleContact</span><span class="tok-o">(</span><span class="tok-n">kidPaddle</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s write the method <code>bounceTheBall</code>, which should be very similar to <code>moveTheBall</code>. The ball should move from left to write, if  you&#8217;ve been decreasing the x-coordinate in <code>moveTheBall</code>, you&#8217;ll need to decrease it now. If you&#8217;ve been stopping the game where the coordinate of the ball was less than -20, now it has to be more that the table width plus 20. I could refactor the method <code>moveTheBall</code> to introduce these values as methods arguments, but let&#8217;s keep it as a small project for you. As long as you understand how the code works, you should be able to do it on your own. Here&#8217;s the code of the method <code>bounceTheBall</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">bounceTheBall</span><span class="tok-o">()</span> <span class="tok-o">{</span>

  <span class="tok-kt">double</span> <span class="tok-n">theBallOffTheTableX</span> <span class="tok-o">=</span> <span class="tok-n">table</span><span class="tok-o">.</span><span class="tok-na">getWidth</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-mi">20</span><span class="tok-o">;</span>  <b class="conum">(1)</b>

  <span class="tok-n">KeyFrame</span> <span class="tok-n">keyFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyFrame</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Duration</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">),</span> <span class="tok-n">event</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">);</span>
    <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&lt;</span> <span class="tok-n">theBallOffTheTableX</span><span class="tok-o">)</span> <span class="tok-o">{</span>

       <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>              <b class="conum">(2)</b>

       <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">checkForBallPaddleContact</span><span class="tok-o">(</span><span class="tok-n">kidPaddle</span><span class="tok-o">)){</span>   <b class="conum">(3)</b>
           <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>
           <span class="tok-n">moveTheBall</span><span class="tok-o">();</span>
        <span class="tok-o">};</span>

    <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
       <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

  <span class="tok-o">});</span>

  <span class="tok-n">timeline</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Timeline</span><span class="tok-o">(</span><span class="tok-n">keyFrame</span><span class="tok-o">);</span>
  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-n">Timeline</span><span class="tok-o">.</span><span class="tok-na">INDEFINITE</span><span class="tok-o">);</span>

  <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The ball should stop its movement when its x-coordinate is 20 pixels to the right of the table.</p>
</li>
<li>
<p>Advance the ball to the right until its x-coordinate reaches the value of <code>theBallOffTheTableX</code>.</p>
</li>
<li>
<p>While the Computer bounces the ball, the Kid can press the up and down arrow keys to stop the ball. If the ball contacts the Kid&#8217;s paddle, we call the <code>moveTheBall</code> method to start the random movement to the left again.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The basic functionality of the game is implemented except displaying the game score and starting the new game when one of the players gets 21 points. I leave this part for you to implement on your own.</p>
</div>
<div class="paragraph">
<p>I&#8217;ve been showing and explaining various code fragments of the <code>PingPongController</code> as we&#8217;ve been implementing the game strategy one step at a time. Now I&#8217;ll just show how the code of the <code>PingPongConroller</code> class looks without any additional explanations. You should be able to read and understand the code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kn">package</span> <span class="tok-n">pong</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">javafx.animation.KeyFrame</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.animation.Timeline</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.application.Platform</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.beans.property.DoubleProperty</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.beans.property.SimpleDoubleProperty</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.fxml.FXML</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.input.KeyCode</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.input.KeyEvent</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.shape.Circle</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.scene.shape.Rectangle</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javafx.util.Duration</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Random</span><span class="tok-o">;</span>


<span class="tok-c1">// This code implements 6 steps of the Game strategy</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PingPongController</span> <span class="tok-o">{</span>

 <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span> <span class="tok-o">=</span> <span class="tok-mi">7</span><span class="tok-o">;</span>
 <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span> <span class="tok-o">=</span> <span class="tok-mi">3</span><span class="tok-o">;</span>

 <span class="tok-kt">double</span> <span class="tok-n">centerTableY</span><span class="tok-o">;</span>

 <span class="tok-n">DoubleProperty</span> <span class="tok-n">currentKidPaddleY</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleDoubleProperty</span><span class="tok-o">();</span>
 <span class="tok-n">DoubleProperty</span> <span class="tok-n">currentComputerPaddleY</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleDoubleProperty</span><span class="tok-o">();</span>
 <span class="tok-kt">double</span> <span class="tok-n">initialComputerPaddleY</span><span class="tok-o">;</span>

 <span class="tok-n">DoubleProperty</span> <span class="tok-n">ballCenterX</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleDoubleProperty</span><span class="tok-o">();</span>
 <span class="tok-n">DoubleProperty</span> <span class="tok-n">ballCenterY</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">SimpleDoubleProperty</span><span class="tok-o">();</span>

 <span class="tok-kt">double</span> <span class="tok-n">allowedPaddleTopY</span><span class="tok-o">;</span>
 <span class="tok-kt">double</span> <span class="tok-n">allowedPaddleBottomY</span><span class="tok-o">;</span>

 <span class="tok-n">Timeline</span> <span class="tok-n">timeline</span><span class="tok-o">;</span>

 <span class="tok-nd">@FXML</span>
 <span class="tok-n">Rectangle</span> <span class="tok-n">table</span><span class="tok-o">;</span>
 <span class="tok-nd">@FXML</span>  <span class="tok-n">Rectangle</span> <span class="tok-n">compPaddle</span><span class="tok-o">;</span>
 <span class="tok-nd">@FXML</span>  <span class="tok-n">Rectangle</span> <span class="tok-n">kidPaddle</span><span class="tok-o">;</span>
 <span class="tok-nd">@FXML</span>  <span class="tok-n">Circle</span> <span class="tok-n">ball</span><span class="tok-o">;</span>

 <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">initialize</span><span class="tok-o">()</span>
 <span class="tok-o">{</span>

     <span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">getLayoutY</span><span class="tok-o">());</span>
     <span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">layoutYProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">);</span>

     <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">getCenterX</span><span class="tok-o">());</span>
     <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">getCenterY</span><span class="tok-o">());</span>

     <span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">centerXProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">);</span>
     <span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">centerYProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">);</span>


     <span class="tok-n">initialComputerPaddleY</span> <span class="tok-o">=</span> <span class="tok-n">compPaddle</span><span class="tok-o">.</span><span class="tok-na">getLayoutY</span><span class="tok-o">();</span>
     <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">initialComputerPaddleY</span><span class="tok-o">);</span>
     <span class="tok-n">compPaddle</span><span class="tok-o">.</span><span class="tok-na">layoutYProperty</span><span class="tok-o">().</span><span class="tok-na">bind</span><span class="tok-o">(</span><span class="tok-n">currentComputerPaddleY</span><span class="tok-o">);</span>


     <span class="tok-n">allowedPaddleTopY</span> <span class="tok-o">=</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span><span class="tok-o">;</span>
     <span class="tok-n">allowedPaddleBottomY</span> <span class="tok-o">=</span> <span class="tok-n">table</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span><span class="tok-o">;</span>

     <span class="tok-n">centerTableY</span> <span class="tok-o">=</span> <span class="tok-n">table</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()/</span><span class="tok-mi">2</span><span class="tok-o">;</span>
 <span class="tok-o">}</span>
 <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">keyReleasedHandler</span><span class="tok-o">(</span><span class="tok-n">KeyEvent</span> <span class="tok-n">event</span><span class="tok-o">){</span>

     <span class="tok-n">KeyCode</span> <span class="tok-n">keyCode</span> <span class="tok-o">=</span> <span class="tok-n">event</span><span class="tok-o">.</span><span class="tok-na">getCode</span><span class="tok-o">();</span>

     <span class="tok-k">switch</span> <span class="tok-o">(</span><span class="tok-n">keyCode</span><span class="tok-o">){</span>
         <span class="tok-k">case</span> <span class="tok-nl">UP:</span>
             <span class="tok-n">process_key_Up</span><span class="tok-o">();</span>
             <span class="tok-k">break</span><span class="tok-o">;</span>
         <span class="tok-k">case</span> <span class="tok-nl">DOWN:</span>
             <span class="tok-n">process_key_Down</span><span class="tok-o">();</span>
             <span class="tok-k">break</span><span class="tok-o">;</span>
         <span class="tok-k">case</span> <span class="tok-nl">N:</span>
             <span class="tok-n">process_key_N</span><span class="tok-o">();</span>
             <span class="tok-k">break</span><span class="tok-o">;</span>
         <span class="tok-k">case</span> <span class="tok-nl">Q:</span>
             <span class="tok-n">Platform</span><span class="tok-o">.</span><span class="tok-na">exit</span><span class="tok-o">();</span> <span class="tok-c1">// Terminate the application</span>
             <span class="tok-k">break</span><span class="tok-o">;</span>
         <span class="tok-k">case</span> <span class="tok-nl">S:</span>
             <span class="tok-n">process_key_S</span><span class="tok-o">();</span>
             <span class="tok-k">break</span><span class="tok-o">;</span>
     <span class="tok-o">}</span>
 <span class="tok-o">}</span>


 <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_Up</span><span class="tok-o">()</span> <span class="tok-o">{</span>

     <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;</span> <span class="tok-n">allowedPaddleTopY</span><span class="tok-o">)</span> <span class="tok-o">{</span>
         <span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>
     <span class="tok-o">}</span>
 <span class="tok-o">}</span>

 <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_Down</span><span class="tok-o">()</span> <span class="tok-o">{</span>

     <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()&lt;</span> <span class="tok-n">allowedPaddleBottomY</span><span class="tok-o">)</span> <span class="tok-o">{</span>
         <span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">PADDLE_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>
     <span class="tok-o">}</span>
 <span class="tok-o">}</span>

 <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_N</span><span class="tok-o">()</span> <span class="tok-o">{</span>
     <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Processing the N key&quot;</span><span class="tok-o">);</span>
 <span class="tok-o">}</span>

 <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">process_key_S</span><span class="tok-o">()</span> <span class="tok-o">{</span>

     <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentKidPaddleY</span><span class="tok-o">.</span><span class="tok-na">doubleValue</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()/</span><span class="tok-mi">2</span><span class="tok-o">);</span>
     <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">kidPaddle</span><span class="tok-o">.</span><span class="tok-na">getLayoutX</span><span class="tok-o">());</span>

     <span class="tok-n">moveTheBall</span><span class="tok-o">();</span>
 <span class="tok-o">}</span>

 <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">moveTheBall</span><span class="tok-o">(){</span>

     <span class="tok-n">Random</span> <span class="tok-n">randomYGenerator</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Random</span><span class="tok-o">();</span>
     <span class="tok-kt">double</span> <span class="tok-n">randomYincrement</span> <span class="tok-o">=</span> <span class="tok-n">randomYGenerator</span><span class="tok-o">.</span><span class="tok-na">nextInt</span><span class="tok-o">(</span><span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>

     <span class="tok-kd">final</span> <span class="tok-kt">boolean</span> <span class="tok-n">isServingFromTop</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&lt;=</span> <span class="tok-n">centerTableY</span><span class="tok-o">)?</span><span class="tok-kc">true</span><span class="tok-o">:</span><span class="tok-kc">false</span><span class="tok-o">;</span>

     <span class="tok-n">KeyFrame</span> <span class="tok-n">keyFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyFrame</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Duration</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">),</span> <span class="tok-n">event</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>

         <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;=</span> <span class="tok-o">-</span><span class="tok-mi">20</span><span class="tok-o">)</span> <span class="tok-o">{</span>

             <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>

             <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">isServingFromTop</span><span class="tok-o">)</span> <span class="tok-o">{</span>
                 <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">randomYincrement</span><span class="tok-o">);</span>

                 <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span> <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">);</span>

             <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
                 <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-n">randomYincrement</span><span class="tok-o">);</span>

                 <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-o">);</span>
             <span class="tok-o">}</span>

             <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">checkForBallPaddleContact</span><span class="tok-o">(</span><span class="tok-n">compPaddle</span><span class="tok-o">)){</span>
                 <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>
                 <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">initialComputerPaddleY</span><span class="tok-o">);</span>
                 <span class="tok-n">bounceTheBall</span><span class="tok-o">();</span>
             <span class="tok-o">};</span>

         <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
             <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>

             <span class="tok-n">currentComputerPaddleY</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">initialComputerPaddleY</span><span class="tok-o">);</span>
         <span class="tok-o">}</span>
     <span class="tok-o">});</span>

     <span class="tok-n">timeline</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Timeline</span><span class="tok-o">(</span><span class="tok-n">keyFrame</span><span class="tok-o">);</span>
     <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-n">Timeline</span><span class="tok-o">.</span><span class="tok-na">INDEFINITE</span><span class="tok-o">);</span>

     <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>
 <span class="tok-o">}</span>


 <span class="tok-kd">private</span> <span class="tok-kt">boolean</span> <span class="tok-nf">checkForBallPaddleContact</span><span class="tok-o">(</span><span class="tok-n">Rectangle</span> <span class="tok-n">paddle</span><span class="tok-o">){</span>

     <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ball</span><span class="tok-o">.</span><span class="tok-na">intersects</span><span class="tok-o">(</span><span class="tok-n">paddle</span><span class="tok-o">.</span><span class="tok-na">getBoundsInParent</span><span class="tok-o">())){</span>
         <span class="tok-k">return</span> <span class="tok-kc">true</span><span class="tok-o">;</span>
     <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
          <span class="tok-k">return</span> <span class="tok-kc">false</span><span class="tok-o">;</span>
     <span class="tok-o">}</span>
 <span class="tok-o">}</span>

 <span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">bounceTheBall</span><span class="tok-o">()</span> <span class="tok-o">{</span>

     <span class="tok-kt">double</span> <span class="tok-n">theBallOffTheTableX</span> <span class="tok-o">=</span> <span class="tok-n">table</span><span class="tok-o">.</span><span class="tok-na">getWidth</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-mi">20</span><span class="tok-o">;</span>

     <span class="tok-n">KeyFrame</span> <span class="tok-n">keyFrame</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">KeyFrame</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-nf">Duration</span><span class="tok-o">(</span><span class="tok-mi">10</span><span class="tok-o">),</span> <span class="tok-n">event</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>

         <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&lt;</span> <span class="tok-n">theBallOffTheTableX</span><span class="tok-o">)</span> <span class="tok-o">{</span>

             <span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">set</span><span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">+</span> <span class="tok-n">BALL_MOVEMENT_INCREMENT</span><span class="tok-o">);</span>

             <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">checkForBallPaddleContact</span><span class="tok-o">(</span><span class="tok-n">kidPaddle</span><span class="tok-o">)){</span>
                 <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>
                 <span class="tok-n">moveTheBall</span><span class="tok-o">();</span>
             <span class="tok-o">};</span>

         <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-o">{</span>
             <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">stop</span><span class="tok-o">();</span>
         <span class="tok-o">}</span>

     <span class="tok-o">});</span>

     <span class="tok-n">timeline</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Timeline</span><span class="tok-o">(</span><span class="tok-n">keyFrame</span><span class="tok-o">);</span>
     <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">setCycleCount</span><span class="tok-o">(</span><span class="tok-n">Timeline</span><span class="tok-o">.</span><span class="tok-na">INDEFINITE</span><span class="tok-o">);</span>

     <span class="tok-n">timeline</span><span class="tok-o">.</span><span class="tok-na">play</span><span class="tok-o">();</span>

   <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_displaying_the_game_score">13.8. Project: Displaying the Game Score</h3>
<div class="paragraph">
<p>The goal of this project is to keep track and display the game score. I&#8217;ll just show you how to print the score on the system console, but you&#8217;ll need research how to display the text right on the ping-pong table.</p>
</div>
<div class="paragraph">
<p>If the Kid would serve the ball horizontally, he or she would score one point when the ball goes off the table and its x-coordinate is less than zero. But since the ball is served in a random direction, it can go off the table by crossing top or bottom table&#8217;s borders. In this case the Kid loses the point. When the method <em>moveTheBall</em> stops playing the timeline, the ball&#8217;s x-coordinate is definitely less than zero. So we need to check the y-coordinate of the ball.</p>
</div>
<div class="paragraph">
<p>If the y-coordinate of the ball has a value between zero and the table height, we can assume that the ball crossed the left border of the table and the Kid scores one point.
Otherwise the ball crossed either top or bottom table&#8217;s borders and the Kid should loose the point.</p>
</div>
<div class="paragraph">
<p>The Computer scores one point if it bounces the ball and it crosses the right border of the table.</p>
</div>
<div class="paragraph">
<p>You need to declare two class variable to keep track of the Computer&#8217;s and Kid&#8217;s scores:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kt">int</span> <span class="tok-n">computerScore</span><span class="tok-o">;</span>
<span class="tok-kt">int</span> <span class="tok-n">kidScore</span><span class="tok-o">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll also need to write a method <code>updateScore</code> and invoke it every time the timeline stops playing (in both methods: <code>moveTheBall</code> and <code>bounceTheBall</code> ). The method <code>updateScore</code> can look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">updateScore</span><span class="tok-o">(){</span>

  <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterX</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;</span> <span class="tok-n">table</span><span class="tok-o">.</span><span class="tok-na">getWidth</span><span class="tok-o">()){</span>
      <span class="tok-c1">// Computer bounced the ball and the Kid didn&#39;t hit it back</span>
      <span class="tok-n">computerScore</span> <span class="tok-o">++;</span>
  <span class="tok-o">}</span> <span class="tok-k">else</span> <span class="tok-nf">if</span> <span class="tok-o">(</span><span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">ballCenterY</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">()</span> <span class="tok-o">&lt;=</span> <span class="tok-n">table</span><span class="tok-o">.</span><span class="tok-na">getHeight</span><span class="tok-o">()){</span>
      <span class="tok-c1">// The Kid served the ball and Computer didn&#39;t hit it back</span>
      <span class="tok-n">kidScore</span><span class="tok-o">++;</span>
  <span class="tok-o">}</span> <span class="tok-k">else</span><span class="tok-o">{</span>
      <span class="tok-c1">// The Kid served the ball off the table</span>
      <span class="tok-n">computerScore</span><span class="tok-o">++;</span>
  <span class="tok-o">}</span>


  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Computer: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">computerScore</span> <span class="tok-o">+</span> <span class="tok-s">&quot;, Kid: &quot;</span> <span class="tok-o">+</span> <span class="tok-n">kidScore</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The code that comes with the book has this version of the method <code>updateScore</code> implemented. Your goal is to display the score in a nice font on the bottom left corner of the table. you can learn how to work with the <code>Text</code> and <code>Font</code> classes by studying Oracle&#8217;s tutorial <a href="http://docs.oracle.com/javase/8/javafx/user-interface-tutorial/text.htm#JFXUI734">"Working with Text in JavaFX Applications"</a>.</p>
</div>
<div class="paragraph">
<p>Don&#8217;t forget to implement the Start New Game functionality. You&#8217;ll need to write a method <code>newGame</code>, where you should reset the scores and place the paddles and the ball in the starting positions.
:toc-placement!:
:imagesdir: .</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git_for_kids">14. Git for Kids</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So you wrote a great application, and it worked as expected. Sometime later you&#8217;ve got an idea how to make it even better. After several hours of making changes in your code you&#8217;ve noticed that the application has new bugs in the code that was working fine yesterday. But where is that yesterday&#8217;s version of the code that was working fine? Can you undo (<em>rollback</em>) the latest changes that broke the working code?</p>
</div>
<div class="paragraph">
<p>Many years ago programmers simply were creating backup copies of their code now and then. After some time their hard drives would have multiple folders named like <em>TicTacToe_Feb_1</em>, <em>TicTacToe_Feb_5</em>, <em>TicTacToe_Feb_20</em> an so on. But programmers often work in teams, and what if Joe and Mary are working on the same application? How to make sure that Joe&#8217;s and Mary&#8217;s computers have the working copy of the application with the ability to keep the history of code changes and return to a working version if need be?</p>
</div>
<div class="paragraph">
<p>Programmers use a special software called Version Control Systems (VCS) that allows to keep track of different versions of the source code stored in common <em>source code repositories</em> located on the company&#8217;s servers. There are also special web hosting facilities, where Joe and Mary can safely keep their application code.</p>
</div>
<div class="paragraph">
<p>Software developers make changes in their local copies of the application&#8217;s code, and test them. When the local version of the application works fine, they <em>commit</em> (save) the latest code changes to the source code repository. If Mary has committed her changes, Joe can <em>check out</em> the latest code from the shared repository to his computer. Mary&#8217;s changes will merged with Joe&#8217;s ones on his computer.</p>
</div>
<div class="paragraph">
<p>Now Joe has the latest Mary&#8217;s code, but she doesn&#8217;t have the latest Joe&#8217;s code changes. When Joe decides to commit his latest code to the shared repository, Mary can check them out to her computer.</p>
</div>
<div class="paragraph">
<p>In this chapter I&#8217;ll introduce you to a popular VCS called Git and to the code hosting facility called GitHub. VCS are used by programmers writing code in any languages, not only in Java. As a matter of fact you can keep track of any files using Git and store them in GitHub or other hosts. If your computer get lost or stolen you can always recover the code by <em>pulling</em> it from GitHub.</p>
</div>
<div class="paragraph">
<p>I was using Git as a VCS and GitHub as a shared repository of the drafts of all chapters of this book, and you can find them on the GitHub at <a href="https://github.com/yfain/Java4Kids">https://github.com/yfain/Java4Kids</a>.</p>
</div>
<div class="paragraph">
<p>Understanding how VCS work is very important - that&#8217;s why I included this short Git tutorial in the book about Java.</p>
</div>
<div class="sect2">
<h3 id="_two_types_of_version_control_systems">14.1. Two Types of Version Control Systems</h3>
<div class="paragraph">
<p>There are two types of VCS: centralized and distributed. With centralized systems the source code repository is stored a server, which is <em>the only</em> place that has the latest version of the application as well as all historical files committed by developers in the past.</p>
</div>
<div id="FIG14-1" class="imageblock">
<div class="content">
<img src="./images/fig_14_CentralRepo.png" alt="fig 14 CentralRepo">
</div>
</div>
<div class="paragraph">
<p>If Pete, the new programmer, joins the team, he&#8217;d need to check out the latest code from the central repository and start making his code modifications on his computer. There are many centralized VCS, and some the most popular are CVS, SVN, and Perforce.</p>
</div>
<div class="paragraph">
<p>Distributed VCS store the latest version of the code as well as all historical files <em>on each</em> programmer&#8217;s computer. Popular distributed VCS are Git, Mercurial, and Bazaar. Technically, if you work alone, you can install Git on your computer and have your private VCS without using any remote server as a shared repository. But again, having an extra copy of your project files on a remote server is always a good idea.</p>
</div>
<div class="paragraph">
<p>Programmers usually work in teams, so the following diagram shows three computers - one shared repository on the right and to local repositories (Mary&#8217;s and Joe&#8217;s) on the left.</p>
</div>
<div id="FIG14-2" class="imageblock">
<div class="content">
<img src="./images/fig_14_DistrRepo.png" alt="fig 14 DistrRepo">
</div>
</div>
<div class="paragraph">
<p>At any given time each local repository stores the  history of all updates made by its owner as well as historical updates that the owner pulled from the shared repository. Let&#8217;s see how to create a source code repository of your computer that&#8217;s managed by Git.</p>
</div>
</div>
<div class="sect2">
<h3 id="_introduction_to_git">14.2. Introduction to Git</h3>
<div class="paragraph">
<p>Git is a free distributed VCS, which you can download and install from <a href="http://git-scm.com">http://git-scm.com</a>. There is a chance that your computer already has Git installed, and you can check it out by opening a Command or Terminal window and entering the command <em>git</em>. If it prints a list of available Git commands, you already have Git installed. But still, I&#8217;d suggest to install the latest Git version by following <a href="http://git-scm.com/book/en/v2/Getting-Started-Installing-Git">these instructions</a> for your operational system.</p>
</div>
<div class="paragraph">
<p>There are several <a href="http://git-scm.com/download/gui/linux">GUI tools</a> for working with Git repositories, but we&#8217;ll be using a Command or Terminal window for executing all commands. After the installation is complete, enter the command <em>git --version</em>, and you&#8217;ll see which version of Git you&#8217;ll be using.</p>
</div>
<div class="sect3">
<h4 id="_introducing_yourself_to_git">14.2.1. Introducing Yourself to Git</h4>
<div class="paragraph">
<p>The next step is to introduce yourself to Git by providing your name and the email address. Typically you&#8217;ll be running the <em>git</em> program followed by the command name, which may have various options that start with <em>--</em> or <em>-</em>. To introduce yourself to Git, use the <em>config</em> command with the <em>--global</em> option. This is how I did it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git config --global user.name ”Yakov Fain&quot;
git config --global user.email &quot;yakovfain@gmail.com&quot;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you want to be able to use different user names and emails for different projects, run the above commands from the project directory without the <em>--global</em> option.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Later on, when you&#8217;ll be opening a GitHub account you&#8217;ll need to use the same email as you used with the <em>config</em> command above. Git is ready to manage your projects. Now let&#8217;s create a Git repository for a simple project and learn how to work with it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_new_git_repository">14.3. Creating a New Git Repository</h3>
<div class="paragraph">
<p>For illustration purposes I&#8217;ll create a new folder called <em>gitIntro</em> and will copy there the files <em>Pet.java</em>, <em>Fish.java</em>, and <em>PetMaster.java</em> from Chapter 3. Then I&#8217;ll  open the Terminal window on my MacBook (Windows users open the Command window) and will create a new Git repository by entering the command <em>git init</em>. The content of my <em>gitIntro</em> folder looks as follows:</p>
</div>
<div id="FIG14-3" class="imageblock">
<div class="content">
<img src="./images/fig_14_git_init.png" alt="fig 14 git init">
</div>
</div>
<div class="paragraph">
<p>The <em>git init</em> command has created a hidden directory called <em>.git</em>, which is a Git repository for my <em>gitIntro</em> project. This directory contains a Git database (a.k.a the index) that will store all the changes I&#8217;ll be making to my Java classes through the life of this project.</p>
</div>
<div class="paragraph">
<p>You can start using Git with your old projects any time you want. Just open the directory of any existing project and execute the <em>git init</em> command to create a new local repository. Of course, it won&#8217;t know about your prior code modifications, but from now on you can start tracking them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_selected_git_commands">14.4. Selected Git Commands</h3>
<div class="paragraph">
<p>Git has a couple of dozens commands, but knowing just a half dozen of them may be enough for all your project activities. I&#8217;ll show you several commands that I use daily. Each command may be issued with several options. I&#8217;ll just show you the basic commands to quickly get you started with Git. For more detailed coverage of all Git features and commands you&#8217;ll need to study <a href="http://git-scm.com/doc">online documentation</a>.</p>
</div>
<div class="paragraph">
<p>Typically, my work with Git-controlled projects consists of the following activities:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make the changes to some project files.</p>
</li>
<li>
<p>Check the status of the files in my project.</p>
</li>
<li>
<p>Change the status of all or some of the modified files to trackable by running the <em>add</em> command.</p>
</li>
<li>
<p>Commit all or selected modified files to local Git repository.</p>
</li>
<li>
<p>Push the changes to a shared remote code repository.</p>
</li>
<li>
<p>Repeat.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_the_status_command">14.4.1. The status Command</h4>
<div class="paragraph">
<p>I always start working with Git by opening my project directory and typing <em>git status</em> to see which files I&#8217;ve modified since the last time I&#8217;ve committed the changes to Git repository. Let&#8217;s do it in the directory <em>gitIntro</em>. I havn&#8217;t committed any files to my brand new code repository just yet, and Git will respond with the following status:</p>
</div>
<div id="FIG14-4" class="imageblock">
<div class="content">
<img src="./images/fig_14_git_status.png" alt="fig 14 git status">
</div>
</div>
<div class="paragraph">
<p>Note the first statement indicates that I work with the code branch called <em>master</em>. I&#8217;ll explain how and why create separate code branches a bit later, but for now I have no other branches. The untracked files are displayed in red, which means that they are either new to Git or have been modified after the last commit to the repository. The changes made to the untracked files are not stored in the Git database.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_add_command">14.4.2. The add Command</h4>
<div class="paragraph">
<p>Adding files to a Git repository is done by the command <em>add</em>, which is easy to understand to the process of adding toys to a shopping cart in a toy store. There are lots of toys on the shelves, but you pick only selected ones by placing them into your cart.</p>
</div>
<div id="FIG14-4-1" class="imageblock">
<div class="content">
<img src="./images/fig_14_ToyStore.png" alt="fig 14 ToyStore">
</div>
</div>
<div class="paragraph">
<p>Similarly, you have lots of files in your project&#8217;s folder(s), but you may want to add only selected ones to the git repository, for example <em>git add Fish.java</em>. We call the modified files that must be saved in the Git database <em>trackable</em>, and those the should be ignores - <em>untracked</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you want to know which options exist for any Git command, just enter <em>git --help</em> followed by a command name, for example, <em>git --help add</em>. To quit the help mode just enter the letter <em>q</em> in the Command window.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also add all new or modified files in one shot by executing the command <em>git add --all</em>. After running this command you&#8217;ll get the following output:</p>
</div>
<div id="FIG14-5" class="imageblock">
<div class="content">
<img src="./images/fig_14_git_add_all.png" alt="fig 14 git add all">
</div>
</div>
<div class="paragraph">
<p>Now all my Java files are shown in green, which means that these files became trackable and are ready to be committed to the Git database.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">NOTE</div>
<div class="paragraph">
<p>You shouldn&#8217;t store compiled Java classes or JARs in the source code repositories. You can let Git know which files to ignore by creating a text file named <em>.gitignore</em> in your project directory. Then add there the types of files that Git should ignore. For example, if you&#8217;ll add the following two lines to your <em>.gitigore</em> file, coompiled classes and JARS won&#8217;t be included in your Git database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">*.class
*.jar</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_commit_command">14.4.3. The commit Command</h4>
<div class="paragraph">
<p>If we&#8217;ll continue using the analogy with a toy store, committing is similar to paying for the toys that you placed in your shopping cart. But when you pay at the cash register, you get a receipt, right? On the same note, when you issue a <em>commit</em> command, you need to write a comment about what are you committing. Programmers make multiple commits over the life of each project, and such comments allow to keep tracks of the code changes. For example, you can issue the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git commit -m &quot;initial commit of the classes Fish, Pet, and PetMaster&quot;.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>-m</em> option allows writing a short message in double quotes describing the commit.</p>
</div>
<div id="FIG14-6" class="imageblock">
<div class="content">
<img src="./images/fig_14_git_commit.png" alt="fig 14 git commit">
</div>
</div>
<div class="paragraph">
<p>The "63 insertions" means that total of 63 lines were inserted in the Git database.</p>
</div>
<div class="paragraph">
<p>If you would run the <em>git commit</em> command without any options, Git would open a text editor where you should enter a detailed description of changes being committed. Saving this file will store this description in the Git database.</p>
</div>
<div class="paragraph">
<p>Enter the command <em>git status</em> again, and you&#8217;ll see the "nothing to commit" message. No wonder, I just committed three files and haven&#8217;t modified them again just yet.</p>
</div>
<div id="FIG14-7" class="imageblock">
<div class="content">
<img src="./images/fig_14_git_nothing_to_commit.png" alt="fig 14 git nothing to commit">
</div>
</div>
<div class="paragraph">
<p>Now let me make a small change in the file <em>PetMaster.java</em>. Currently it has the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PetMaster</span> <span class="tok-o">{</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

    <span class="tok-n">String</span> <span class="tok-n">petReaction</span><span class="tok-o">;</span>
    <span class="tok-n">Pet</span> <span class="tok-n">myPet</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">Pet</span><span class="tok-o">();</span>
    <span class="tok-n">myPet</span><span class="tok-o">.</span><span class="tok-na">eat</span><span class="tok-o">();</span>

    <span class="tok-n">petReaction</span> <span class="tok-o">=</span> <span class="tok-n">myPet</span><span class="tok-o">.</span><span class="tok-na">talk</span><span class="tok-o">(</span><span class="tok-s">&quot;Tweet!! Tweet!!&quot;</span><span class="tok-o">);</span>

    <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">petReaction</span><span class="tok-o">);</span>
    <span class="tok-n">myPet</span><span class="tok-o">.</span><span class="tok-na">sleep</span><span class="tok-o">();</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;ll just modify the comment at the top of this file. I&#8217;ll change the text to "Created by Yakov on 3/28/15." Running the <em>git status</em> command again will produce a different output:</p>
</div>
<div id="FIG14-8" class="imageblock">
<div class="content">
<img src="./images/fig_14_git_status_changed.png" alt="fig 14 git status changed">
</div>
</div>
<div class="paragraph">
<p>Git has noticed that the file <em>PetMaster.java</em> has been changed, but until I issue the command <em>add</em> for this file (or all files), Git won&#8217;t track the changes in <em>PetMaster.java</em>. In the toy store setup, it&#8217;s a situation when a toy is displayed on the shelf, you noticed it but have not added to your shopping cart yet. The following two commands will save my latest change in the Git database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git add PetMaster.java
git commit -m &quot;Modified the opening comment in PetMaster.java&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>After committing all the changes <em>git status</em> will tell us again that there is nothing to commit, and the working directory is clean.</p>
</div>
<div class="paragraph">
<p>To summarize, we have three Java classes located in the working directory <em>gitIntro</em>, and the history of modifications and commits is stored in the directory <em>.git</em>. I&#8217;d like to remind you that all the work we&#8217;ve done so far was saved only in the local code repository.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_reset_command">14.4.4. The reset Command</h4>
<div class="paragraph">
<p>Here&#8217;s another scenario to consider. I&#8217;ve just committed the changes to the file <em>PetMaster.java</em> and&#8230;&#8203; got goose bumps. Suddenly I realized that it was a mistake, and I wanted to undo the last commit. The file <em>PetMaster.java</em> has an opening statement "Created by Yakov on 3/28/15.", but I changed my mind and don&#8217;t want to reveal my name. Luckily Git stores all committed code changes (the deltas) in its database.</p>
</div>
<div class="paragraph">
<p>I&#8217;ll show you how to undo the last commit and remove the code changes in <em>PetMaster.java</em>. When you&#8217;ll be trying to repeat all these commands open the file <em>PetMaster.java</em> and note the text of its opening comment, because it&#8217;s going to change right after the <em>reset</em> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git reset HEAD</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>reset</em> command will undo the last commit and will open a text editor containing the description of this  reverted commit, which can look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">Revert &quot;modified the opening comment in PetMaster.java&quot;

This reverts commit 6e18f1c5f437650c1a115c9875403fb9d081f15d.

# Please enter the commit message for your changes. Lines starting
# with &#39;#&#39; will be ignored, and an empty message aborts the commit.
# On branch master
# Changes to be committed:
#	modified:   PetMaster.java
#</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can change this text to better describe what has been done by this <em>reset</em> command. Git will store the saved message in its history files. The 40-character long sequence of digits and letters is a unique code associated with each commit.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you want to see the history of all commits, use the command <em>git log</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So far we&#8217;ve been working with the default branch called <em>master</em>, and now I&#8217;ll explain you what branches are for.</p>
</div>
</div>
<div class="sect3">
<h4 id="_code_branching">14.4.5. Code Branching</h4>
<div class="paragraph">
<p>What if Mary wants to add a new feature to the application, but she&#8217;s afraid that her new code may introduce bugs in the application? She doesn&#8217;t want to modify the code that other programmers may rely on. Joe works on adding another feature and he also wants to keep his code separately. There is a solution to this - both Mary and Joe can create their own branches to keep the new code being developed separately from the <em>master</em> branch, which has tested and working code.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see how Mary can create a separate code branch and add a new method <code>surface</code> to the class <code>Fish</code>, which currently looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Fish</span> <span class="tok-kd">extends</span> <span class="tok-n">Pet</span> <span class="tok-o">{</span>

  <span class="tok-kt">int</span> <span class="tok-n">currentDepth</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">dive</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">howDeep</span><span class="tok-o">){</span>

      <span class="tok-n">currentDepth</span><span class="tok-o">=</span><span class="tok-n">currentDepth</span> <span class="tok-o">+</span> <span class="tok-n">howDeep</span><span class="tok-o">;</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Diving for &quot;</span> <span class="tok-o">+</span>
              <span class="tok-n">howDeep</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet&quot;</span><span class="tok-o">);</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;I&#39;m at &quot;</span> <span class="tok-o">+</span> <span class="tok-n">currentDepth</span> <span class="tok-o">+</span>
              <span class="tok-s">&quot; feet below sea level&quot;</span><span class="tok-o">);</span>

      <span class="tok-k">return</span> <span class="tok-n">currentDepth</span><span class="tok-o">;</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Mary will be running all branching commands in the same directory <em>gitIntro</em>. First, she&#8217;ll create her own branch called <em>mary</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git branch mary</code></pre>
</div>
</div>
<div class="paragraph">
<p>The new branch will be created in the Git database, but Mary remain in the <em>master</em> branch until she switches to the new branch by executing the <em>checkout</em> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git checkout mary</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>git status</em> command is our friend. Mary uses it often to make sure that she works in the proper branch:</p>
</div>
<div id="FIG14-9" class="imageblock">
<div class="content">
<img src="./images/fig_14_new_branch.png" alt="fig 14 new branch">
</div>
</div>
<div class="paragraph">
<p>You can also print the names of all branches that exist in your Git repository by running the command <em>git branch</em>. The current branch will be shown in green and marked with an asterisk.</p>
</div>
<div class="paragraph">
<p>Now Mary adds the following method to the class <code>Fish</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">surface</span><span class="tok-o">(){</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Going up &quot;</span> <span class="tok-o">+</span> <span class="tok-n">currentDepth</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet.&quot;</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the usual sequence of commands <em>status</em>, <em>add</em>, and <em>commit</em> Mary commits the changes to the branch <em>mary</em>:</p>
</div>
<div id="FIG14-10" class="imageblock">
<div class="content">
<img src="./images/fig_14_add_surface.png" alt="fig 14 add surface">
</div>
</div>
<div class="paragraph">
<p>At any given time the working directory will have only one copy of each file with the content that correspond to the current branch. Hence the class <code>Fish</code> from the branch <em>mary</em> has the method <code>surface</code>. Now Mary  switches back to the branch <em>master</em> by running <em>git checkout master</em> and opens the file <em>Fish.java</em> - the method <code>surface</code> isn&#8217;t there! Git seamlessly moved the older version of <em>Fish.java</em> from its database back to the working directory. It happened really fast, because in the distributed VCS the complete code repository is located on the programmers computer and there is no need to do any communication over the network.</p>
</div>
<div class="paragraph">
<p>Mary tested the new version of the class <code>Fish</code> and she&#8217;s ready to include it in the <em>master</em> branch. Using the VCS terminology, she wants to merge the code located in the branch <em>mary</em> into the code in the <em>master</em> branch. From the <em>master</em> branch Mary runs the following <em>merge</em> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git merge mary</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s how it may look in the Terminal window:</p>
</div>
<div id="FIG14-11" class="imageblock">
<div class="content">
<img src="./images/fig_14_merge.png" alt="fig 14 merge">
</div>
</div>
<div class="paragraph">
<p>In this case Git was able to automatically merge two versions of the file <em>Fish.java</em>. But sometimes the changes are conflicting with each other and manual editing is required to resolve the conflicts.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conflict_resolution">14.4.6. Conflict Resolution</h4>
<div class="paragraph">
<p>Since Mary was the only programmer working with the file <em>Fish.java</em> Git just kept track of all insertions, deletions, and changes and re-applied them to the older version of the file during the merge. But when more than one programmer works on the same file they could accidentally modify the same piece of code in different branches. This may cause merge conflicts, and Git will mark the code fragments that need to be merged manually.</p>
</div>
<div class="paragraph">
<p>I&#8217;ll illustrate this by creating conflicting changes on purpose. First, I&#8217;ll add three exclamation marks in the method <code>surface</code> in the <em>master</em> branch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Diving for &quot;</span> <span class="tok-o">+</span> <span class="tok-n">howDeep</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet!!!&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;ll commit the changes to the <em>master</em> branch, then switch to the branch <em>mary</em> and add the question marks there in the same place where exclamations were placed in <em>master</em>. So in the branch <em>mary</em> this line will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Diving for &quot;</span> <span class="tok-o">+</span> <span class="tok-n">howDeep</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet???&quot;</span><span class="tok-o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now I&#8217;ll switch back to <em>master</em> branch and will try to do a merge. Clearly Git can&#8217;t take a responsibility in picking one version over the other. We got a conflict:</p>
</div>
<div id="FIG14-12" class="imageblock">
<div class="content">
<img src="./images/fig_14_conflict.png" alt="fig 14 conflict">
</div>
</div>
<div class="paragraph">
<p>If you&#8217;ll open the file <em>Fish.java</em> you&#8217;ll find some duplicate code with marked with special tags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">surface</span><span class="tok-o">(){</span>
        <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Going up &quot;</span> <span class="tok-o">+</span>
<span class="tok-o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="tok-n">HEAD</span>
        	    <span class="tok-n">currentDepth</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet!!!&quot;</span><span class="tok-o">);</span>
<span class="tok-o">=======</span>
        	    <span class="tok-n">currentDepth</span> <span class="tok-o">+</span> <span class="tok-s">&quot; feet???&quot;</span><span class="tok-o">);</span>
<span class="tok-o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="tok-n">mary</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The conflicting code section marked as <em>HEAD</em> corresponds to the version in the <em>master</em> branch, and the other one is from <em>mary</em>. Now you need to manually edit the file <em>Fish.java</em> to keep the version of the conflicting line of code that you like. Commit the changes to the <em>master</em> branch and the conflict is resolved.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can find more detailed explanations of all Git features in the free book titled <a href="http://git-scm.com/book/en/v2">Pro Git</a> published by Apress.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_publishing_your_code_on_github">14.5. Publishing Your Code on GitHub</h3>
<div class="paragraph">
<p>If you have a shared Git repository on a remote computer, you&#8217;ll need to synchronize with is the content from your local Git repository. Usually I do it several times a day. Even if you work on the project alone, you may want to have a current copy of your Git repository in the remote computer.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/">GitHub</a> is a Web-based Git repository hosting service, where you can create a shared code repository free of charge as long as you don&#8217;t mind keeping your code open to the public. People or organizations that want to create private repositories on GitHub can purchase a paid account. But we have nothing to hide. Moreover, programmers who have their code published on GitHub are treated with additional respect.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
GitHub is not the only hosting service for Git repositories on the Web. <a href="https://bitbucket.org/">Bitbucket</a> is yet another popular place for storing public and private Git repositories.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_creating_a_github_repository">14.5.1. Creating a GitHub Repository</h4>
<div class="paragraph">
<p>To be able to publish your Git repository on GitHub, you need to create an account there. Visit the Web site <a href="https://github.com/">https://github.com</a> and sign up for it. You&#8217;ll need to pick a user name for yourself and enter the email, which should be the same as you&#8217;ve used with  the <em>git config</em> command (see the section Introducing Yourself to Git). GitHub will send you a verification  email to this address, and you&#8217;ll need to respond to it. For illustration purposes I&#8217;ve created a new GitHub account with the user ID <em>java4kids</em>.</p>
</div>
<div class="paragraph">
<p>After creating a free account you&#8217;ll see a green button titled "+ New repository". Click on it and enter the name and description of your project. Since our goal is to publish the files from the local directory <em>gitIntro</em>, I&#8217;ll use the same name for my GitHub repository. As you see in the following screen shot, I&#8217;ve entered the repository name and its description:</p>
</div>
<div id="FIG14-13" class="imageblock">
<div class="content">
<img src="./images/fig_14_github_new.png" alt="fig 14 github new">
</div>
</div>
<div class="paragraph">
<p>Pressing the button titled "Create Repository" and an empty repository is ready. The GitHub will show you the following page with short instructions on how to upload your code there.</p>
</div>
<div id="FIG14-14" class="imageblock">
<div class="content">
<img src="./images/fig_14_github_setup.png" alt="fig 14 github setup">
</div>
</div>
<div class="paragraph">
<p>Note the HTTPS URL of this repository on top. It&#8217;s used for cloning that&#8217;s described later.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pushing_the_local_repository_to_github">14.5.2. Pushing the Local Repository to GitHub</h4>
<div class="paragraph">
<p>Since we already have an existing repository in the directory local directory <em>gitIntro</em>, we&#8217;ll need to go there in the Command or Terminal window and enter the suggested commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git remote add origin https://github.com/java4kids/gitIntro.git   <b class="conum">(1)</b>
git push -u origin master <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>When a remote repository is created, it gets a name, which by default is <em>origin</em>. So the first command adds a URL of the newly created origin to the configuration of your Git project. The name <em>origin</em> serves as an alias name to that long GitHub URL.</p>
</li>
<li>
<p>The Git <em>push</em> command uploads the local code to the remote repository. So you commit changes to a local Git repository, and push them to the remote one. Accordingly, the second command uploaded my Git-managed repository to GitHub. The <em>-u</em> option means upstream. You&#8217;ll use it with the first push to link you local repository to the the remote one. Subsequent <em>push</em> commands will be issued without the <em>-u</em> option.</p>
</li>
</ol>
</div>
<div id="FIG14-14-1" class="imageblock">
<div class="content">
<img src="./images/fig_14_GitPush.png" alt="fig 14 GitPush">
</div>
</div>
<div class="paragraph">
<p>After running these commands the code and the Git database from my local directory <em>gitIntro</em> is published on GitHub. Now if you or anyone else will visit the URL <a href="https://github.com/java4kids/gitIntro">https://github.com/java4kids/gitIntro</a>, they&#8217;ll see the Web page that looks similar to this:</p>
</div>
<div id="FIG14-15" class="imageblock">
<div class="content">
<img src="./images/fig_14_github_pushed.png" alt="fig 14 github pushed">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pulling_the_latest_version_from_github">14.5.3. Pulling The Latest Version from GitHub</h4>
<div class="paragraph">
<p>The <em>pull</em> command downloads and merges the latest code from GitHub to your computer.</p>
</div>
<div id="FIG14-15-1" class="imageblock">
<div class="content">
<img src="./images/fig_14_GitPull.png" alt="fig 14 GitPull">
</div>
</div>
<div class="paragraph">
<p>If you work alone on the project, you won&#8217;t use the <em>pull</em> command that much, because no one else is pushing the code changes there. You&#8217;ll be repeatedly running the following sequence of git commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>add</em>  - to make the files trackable</p>
</li>
<li>
<p><em>commit</em> - to commit changes in the local Git repository</p>
</li>
<li>
<p><em>push</em> - to upload files to the shared repository</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>But as soon as someone else will join the project, you&#8217;ll need to run the <em>pull</em> command periodically to make sure you have the latest version of the code that includes all the changes made by other team members, which are called <em>collaborators</em>, e.g. our friends Mary and Joe are collaborators.</p>
</div>
<div class="paragraph">
<p>To add a collaborator to your GitHub project, you&#8217;d need to visit you shared project repository on GitHub (e.g. <a href="https://github.com/java4kids/gitIntro" class="bare">https://github.com/java4kids/gitIntro</a>), click on the Setting icon on the right and use the Collaborators link on the next Web page. Of course, this new collaborator must be registered on GitHub and have an ID. This process is described step-by-step in <a href="https://help.github.com/articles/adding-collaborators-to-a-personal-repository/">GitHub documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cloning">14.5.4. Cloning</h4>
<div class="paragraph">
<p>Say, Peter joins the existing project and Joe and Mary want him to get the latest code installed. Peter will also use Git and GitHub, so he needs to install Git on his computer, but Peter doen&#8217;t have to create a new folder and run the <em>git init</em> command there. Git has a <em>clone</em> command that can take the existing code from a  shared repository and create its copy on Peter&#8217;s computer. The <em>clone</em> command downloads the latest project&#8217;s code including the entire Git database with all the history of changes made by Joe and Mary in the past. You can do cloning either by clicking the button "Clone in Desktop" on GitHub or by running <em>git clone</em> in the Command window.</p>
</div>
<div class="paragraph">
<p>While writing this book I stored all its code examples on GitHub at <a href="https://github.com/yfain/Java4Kids_code">https://github.com/yfain/Java4Kids_code</a>. You can clone my Git repository from GitHub and start using, improving, or adding new code samples. Just visit the above Web page and copy the URL from the box HTTPS clone URL on the right hand side:</p>
</div>
<div id="FIG14-16" class="imageblock">
<div class="content">
<img src="./images/fig_14_CloneURL.png" alt="fig 14 CloneURL">
</div>
</div>
<div class="paragraph">
<p>You can see only a part of this URL, but when you copy it into the clipboard it&#8217;ll look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">https://github.com/yfain/Java4Kids_code.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now open the Command (or Terminal) window and run the <em>clone</em> command using the above URL as parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">git clone https://github.com/yfain/Java4Kids_code.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a couple of seconds you&#8217;ll find in your computer the directory <em>Java4Kids_code</em> with all code samples and the <em>.git</em> folder inside. This is how I did it on my Mac computer:</p>
</div>
<div id="FIG14-17" class="imageblock">
<div class="content">
<img src="./images/fig_14_Cloning.png" alt="fig 14 Cloning">
</div>
</div>
<div class="paragraph">
<p>As a matter of fact you can clone any GitHub open source repository on your computer and work with the code without even notifying the author of the code. But creating a clone doesn&#8217;t mean that you can push your code changes back to the author&#8217;s GitHub repository without his approval. GitHub has special procedures for this called Forking and Pull Requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_forking_and_pull_requests">14.5.5. Forking and Pull Requests</h4>
<div class="paragraph">
<p>If cloning creates a copy of someone&#8217;s remote repository on your computer, forking creates a new GitHub repository from the existing one. If you fork a project on GitHub, you can clone this project from your own GitHub account, and work with it as if it&#8217;s yours. Then if you want to contact the author offering your version of the code, you need to send a <em>pull request</em> to the author. By creating a pull request you are saying to the author, "I just improved your code and committed it into my repository. Please look at it and pull it from my repository if, you like it".</p>
</div>
<div class="paragraph">
<p>Say you want to be a contributor to my code samples for this book. Instead of cloning explained in the previous section, just go to the GitHub page of my project and click on the button Fork at the top of the page:</p>
</div>
<div id="FIG14-18" class="imageblock">
<div class="content">
<img src="./images/fig_14_Fork.png" alt="fig 14 Fork">
</div>
</div>
<div class="paragraph">
<p>This will create a new repository under your GitHub account and will copy my code there. Then you can clone this project from your repository and work with it. When you&#8217;ve improved my code or fixed a bug, push it to your forked project. Then visit my GitHub page and press the button Pull Request there:</p>
</div>
<div id="FIG14-19" class="imageblock">
<div class="content">
<img src="./images/fig_14_PullRequest.png" alt="fig 14 PullRequest">
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll be able to create a pull request and describe the code change that you&#8217;ve already implemented and committed into the forked repository. Actually, I have one pull request at the time of this writing. Let&#8217;s click on this little circle with the digit 1 and see what&#8217;s there:</p>
</div>
<div id="FIG14-20" class="imageblock">
<div class="content">
<img src="./images/fig_14_PullRequest_YF.png" alt="fig 14 PullRequest YF">
</div>
</div>
<div class="paragraph">
<p>The user with the ID <em>wbrehaut</em> found a typo in my file <em>CreatePlayStation4Objects.java</em>. After looking at the code in this file I saw that it&#8217;s a typo indeed, and pressing the green button "Merge pull request" will automatically merge the correct line into my code.</p>
</div>
<div class="paragraph">
<p>The following diagram illustrates the forking and pull request processes:</p>
</div>
<div id="FIG14-21" class="imageblock">
<div class="content">
<img src="./images/fig_14_Forking.png" alt="fig 14 Forking">
</div>
</div>
<div class="paragraph">
<p>Not every pull request can be automatically merged, especially if multiple code changes have been done. In this case you&#8217;d need to do a manual merge right in the GitHub. I always leave a Thank You comment to people who helped making my code better.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cloning_from_intellij_idea">14.5.6. Cloning From IntelliJ IDEA</h4>
<div class="paragraph">
<p>All popular Java IDE support working with Git. In IDEA open the menu VCS and select the menu item Checkout from Version Control and then GitHub as shown below.</p>
</div>
<div id="FIG14-22" class="imageblock">
<div class="content">
<img src="./images/fig_14_IDEA_vcs1.png" alt="fig 14 IDEA vcs1">
</div>
</div>
<div class="paragraph">
<p>IDEA will ask you to login to GitHub. Use the email and the password that you used while creating your GitHub account. Then IDEA will ask you for its own password database - leave it blank. Now IDEA is ready to clone any public repository provided that you know the clone URL, which is <a href="https://github.com/yfain/Java4Kids_code.git" class="bare">https://github.com/yfain/Java4Kids_code.git</a> in our case. You should enter this URL in the next window that may look similar to this one:</p>
</div>
<div id="FIG14-23" class="imageblock">
<div class="content">
<img src="./images/fig_14_IDEA_vcs2.png" alt="fig 14 IDEA vcs2">
</div>
</div>
<div class="paragraph">
<p>The field with the name of the project directory will be populated automatically, but you can change it if you want. Press the button Clone and IDEA will clone all the projects into the specified directory and will ask you if you want to open a project. Selecting Yes will open one of the IDEA projects (e.g. Chapter7). You&#8217;ll also see a warning about unregistered VCS root, which you can ignore, as you won&#8217;t be directly pushing any code changes into my GitHub repository.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ll open the project directory with File Manager (or Finder), you&#8217;ll see there other folders that contain code samples for all the chapters. You can open any of these projects in IDEA by selecting the menu File | Open.
Note that this project directory has a folder named <em>.git</em>, which contains Git database with the history of all commits that I did while writing code samples for this book.</p>
</div>
<div class="paragraph">
<p>If you see any compilation errors, open the menu File | Project Structure and make sure that the project language level is set to "8 - Lambdas, type annotations etc."</p>
</div>
<div class="paragraph">
<p>IntelliJ IDEA fully supports Git, so you can run all Git commands without the need to use the Command window. You can find the description of Git support in the <a href="https://www.jetbrains.com/idea/help/using-git-integration.html">IDEA documentation</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_epilogue">Epilogue</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This book is over. I hope you&#8217;ve enjoyed reading it as much as I enjoyed my writing. Your process of studying Java is far from being over. If you liked this book and want to continue your Java journey, consider reading my other Java book for adults, which is called "Java 24-Hour Trainer", 2nd Edition, Wiley. That book comes with videos that illustrate the materials covered in each chapter. I also explain the server-side programming in Java there.
Maybe one day I&#8217;ll write a more advanced Java book for kids too. Thank you for reading my book, and good luck!</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-05-02 16:27:41 EDT
</div>
</div>
</body>
</html>